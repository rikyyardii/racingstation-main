import{r,u as O,c as _,o as X,C as q,a as l,b as e,_ as H,d as U,e as y,f as u,F as $,g as C,h as v,i as J,T as Q,t as i,j as I,k as Y,m as Z,l as n,n as K,v as tt}from"./D0Mnjpd1.js";import{S as et,M as st,a as ot,X as x,F as at}from"./BVbX7xDA.js";import{A as nt}from"./5ygJbq71.js";import{u as rt}from"./DCF8Nkg_.js";import{s as lt}from"./BwXMvEM_.js";import{C as it}from"./DrkGv-by.js";const ct={class:"app"},ut={class:"header-content"},dt={class:"header-controls"},mt={class:"desktop-nav"},vt=["href"],ht={key:0,class:"mobile-nav"},ft={class:"mobile-nav-content"},pt=["href"],gt={class:"live-streaming"},_t={key:0},yt={class:"video-container"},wt=["src"],kt={key:0,class:"button-container"},St=["onClick"],bt={class:"live-commentary"},$t={class:"update-info"},Ct={class:"time"},It={class:"text-justify"},Ut={__name:"[id]",setup(Lt){const L=r(""),h=r(!1),f=r(!0),D=["Latest News","Watch Sports"],w=Y().params.id||null,p=r(""),d=r(""),m=r(""),k=r(""),B=r(""),T=r(null),S=r([]),W=r("");let b=null;const N=t=>{if(m.value!==t){m.value=t;const o=window.history.state;window.history.replaceState(o,"",window.location.href)}},M=()=>{h.value=!h.value},V=()=>{f.value=!f.value,document.body.classList.toggle("light-mode",!f.value)},R=t=>{switch(t){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},E=()=>{const t=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t),s=t.getDate(),a=new Intl.DateTimeFormat("en-US",{month:"short"}).format(t),g=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(t),G=t.toLocaleTimeString("en-US",{hour12:!0});L.value=`${o}, ${s} ${a} ${g}. ${G}`},{API_URL:F,IMAGE_URL:c}=O().public,j=t=>{const o=c.startsWith("http")?c:`https://${c}`;return!t||typeof t!="string"?`${o}/public/img/racingstation-stream.png`:t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/public/img/")?`${o}${t}`:`${o}/public/img/${t}`};_(()=>p.value||"RacingStation Stream"),_(()=>k.value||"Watch live streaming of your favorite events.");const A=_(()=>`${c.startsWith("http")?c:`https://${c}`}/public/img/racingstation-stream.png`);rt({title:"RacingStation Stream",ogTitle:"RacingStation Stream",description:"Watch live streaming of your favorite events.",ogDescription:"Watch live streaming of your favorite events.",ogImage:A,twitterTitle:"RacingStation Stream",twitterDescription:"Watch live streaming of your favorite events.",twitterCard:"summary_large_image"});const P=async t=>{const o=Z();try{const s=await fetch(`${F}/streams/${t}`);if(s.ok){const a=await s.json();p.value=a.title,d.value=a.event,k.value=a.content,W.value=a.status,B.value=j(a.image_path),a.status==="enable"?m.value=a.link:m.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},z=async t=>{try{const o=await fetch(`${F}/streams/${t}`);if(o.ok){const s=await o.json();S.value=[],["link","link2","link3","link4"].forEach((a,g)=>{s[a]&&S.value.push({label:`Server ${g+1}`,url:s[a],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};return _(()=>d.value?`(${d.value})`:""),X(()=>{w?(P(w),z(w)):console.error("Slug is undefined"),E(),b=lt(E,1e3),document.addEventListener("contextmenu",t=>t.preventDefault()),document.addEventListener("keydown",t=>{(t.ctrlKey&&t.shiftKey&&t.code==="KeyI"||t.ctrlKey&&t.shiftKey&&t.code==="KeyC"||t.ctrlKey&&t.code==="KeyU"||t.code==="F12")&&(t.preventDefault(),t.stopPropagation())})}),q(()=>{b!==null&&clearInterval(b),document.removeEventListener("contextmenu",t=>t.preventDefault()),document.removeEventListener("keydown",t=>{})}),(t,o)=>(n(),l("div",ct,[e("header",null,[e("div",ut,[o[0]||(o[0]=e("h1",{class:"logo"},[e("img",{src:H,alt:"RacingStation Logo",class:"logo-image"}),U(" RacingStation ")],-1)),e("div",dt,[e("button",{onClick:V,class:"icon-button"},[f.value?(n(),y(u(et),{key:0})):(n(),y(u(st),{key:1}))]),e("button",{onClick:M,class:"icon-button menu-toggle"},[h.value?(n(),y(u(x),{key:1})):(n(),y(u(ot),{key:0}))]),e("nav",mt,[e("ul",null,[(n(),l($,null,C(D,s=>e("li",{key:s},[e("a",{href:R(s),class:K({active:T.value===s})},i(s),11,vt)])),64))])])])])]),v(Q,{name:"slide"},{default:J(()=>[h.value?(n(),l("nav",ht,[e("div",ft,[e("button",{onClick:M,class:"icon-button close-menu"},[v(u(x))]),e("ul",null,[(n(),l($,null,C(D,s=>e("li",{key:s},[e("a",{href:R(s),class:K({active:T.value===s})},i(s),11,pt)])),64))])])])):I("",!0)]),_:1}),e("main",null,[v(nt),e("div",gt,[e("h1",null,[U(i(p.value)+" ",1),d.value?(n(),l("span",_t,"("+i(d.value)+")",1)):I("",!0)]),e("div",yt,[e("iframe",{src:m.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,wt),o[1]||(o[1]=e("div",{class:"iframe-overlay"},null,-1))]),W.value==="enable"?(n(),l("div",kt,[(n(!0),l($,null,C(S.value,(s,a)=>(n(),l("button",{key:a,class:"action-button",onClick:tt(g=>N(s.url),["prevent"])},i(s.label),9,St))),128))])):I("",!0),e("div",bt,[e("div",$t,[v(u(it)),e("span",Ct,i(L.value),1)]),e("h1",null,"What is "+i(p.value)+"?",1),e("p",It,i(k.value),1)])])]),v(at)]))}};export{Ut as default};
