import{s as S,G as T,H as U,r as V,k as E,m as D,c as w,a as t,_ as C,b as I,y as L,z as i,A as o,D as b,o as M}from"./B683Eh06.js";import{u as A}from"./kDA8QHO3.js";import{a as k}from"./CCb-kr4I.js";import{D as d}from"./DcQSltNB.js";const B={class:"app-wrapper"},R={class:"header-content"},q={class:"container"},z={class:"form-group"},J={__name:"[id]",setup(O){const r=T(),s=U(),l=V({title:"",category:"",event:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",scheduled_enable_time:null,scheduled_disable_time:null,status:""}),{API_URL:m}=E().public,p=n=>n?(n.includes("T")?d.fromISO(n,{zone:"UTC"}):d.fromSQL(n,{zone:"UTC"})).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm"):null,f=async()=>{try{const n=s.params.slug||s.params.id,{data:e}=await k.get(`${m}/streams/${n}`);console.log("Raw data:",e),e.scheduled_enable_time&&(e.scheduled_enable_time=p(e.scheduled_enable_time),console.log("Converted time:",e.scheduled_enable_time)),e.scheduled_disable_time&&(e.scheduled_disable_time=p(e.scheduled_disable_time)),l.value=e}catch(n){console.error("Error fetching stream data:",n)}},g=()=>{r.push("/rikya/components/Livestream")};A({title:"Edit Streaming",ogTitle:"Edit Streaming"}),D(async()=>{await f()});const y=async()=>{var n;try{const e=s.params.slug||s.params.id;if(!e){alert("Slug tidak ditemukan!");return}let a=null;if(l.value.scheduled_enable_time){const u=d.fromISO(l.value.scheduled_enable_time,{zone:"Asia/Jakarta"});if(!u.isValid){alert("Format waktu tidak valid!");return}a=u.toISO()}let v=null;l.value.scheduled_disable_time&&(v=d.fromISO(l.value.scheduled_disable_time,{zone:"Asia/Jakarta"}).toISO());const x={...l.value,scheduled_enable_time:a,scheduled_disable_time:v};await k.put(`${m}/streams/${e}`,x),alert("Stream berhasil diperbarui!"),r.go(-1)}catch(e){console.error("Error updating stream:",((n=e.response)==null?void 0:n.data)||e.message),alert("Gagal memperbarui stream.")}};return(n,e)=>(M(),w("div",B,[t("header",null,[t("div",R,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...a)=>n.navigateToArtikel&&n.navigateToArtikel(...a)),style:{cursor:"pointer"}},e[13]||(e[13]=[t("img",{src:C,alt:"RacingStation Logo",class:"logo-image"},null,-1),I(" Dashboard ")]))])]),t("div",q,[e[29]||(e[29]=t("h2",{class:"black-text"},"Edit Livestream",-1)),t("form",{onSubmit:L(y,["prevent"])},[t("div",null,[e[14]||(e[14]=t("label",{for:"title"},"Title",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.title=a),id:"title",required:""},null,512),[[o,l.value.title]])]),t("div",z,[e[16]||(e[16]=t("label",{for:"category"},"Category:",-1)),i(t("select",{id:"category","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.category=a),required:""},e[15]||(e[15]=[t("option",{value:"Motorsport"},"Motorsport",-1),t("option",{value:"Football"},"Football",-1)]),512),[[b,l.value.category]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"event"},"Live Event",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.event=a),id:"event"},null,512),[[o,l.value.event]])]),t("div",null,[e[18]||(e[18]=t("label",{for:"excerpt"},"Excerpt",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.excerpt=a),id:"excerpt",required:""},null,512),[[o,l.value.excerpt]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"link"},"Link 1",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>l.value.link=a),id:"link",required:""},null,512),[[o,l.value.link]])]),t("div",null,[e[20]||(e[20]=t("label",{for:"link2"},"Link 2",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.link2=a),id:"link2"},null,512),[[o,l.value.link2]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"link3"},"Link 3",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=a=>l.value.link3=a),id:"link3"},null,512),[[o,l.value.link3]])]),t("div",null,[e[22]||(e[22]=t("label",{for:"link4"},"Link 4",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=a=>l.value.link4=a),id:"link4"},null,512),[[o,l.value.link4]])]),t("div",null,[e[23]||(e[23]=t("label",{for:"content"},"Content",-1)),i(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.value.content=a),id:"content",required:""},null,512),[[o,l.value.content]])]),t("div",null,[e[24]||(e[24]=t("label",{for:"scheduledEnableTime"},"Jadwal Enable (WIB)",-1)),i(t("input",{type:"datetime-local",id:"scheduledEnableTime","onUpdate:modelValue":e[10]||(e[10]=a=>l.value.scheduled_enable_time=a)},null,512),[[o,l.value.scheduled_enable_time]])]),t("div",null,[e[25]||(e[25]=t("label",{for:"scheduledDisableTime"},"Jadwal Disable (WIB)",-1)),i(t("input",{type:"datetime-local",id:"scheduledDisableTime","onUpdate:modelValue":e[11]||(e[11]=a=>l.value.scheduled_disable_time=a)},null,512),[[o,l.value.scheduled_disable_time]])]),t("div",null,[e[27]||(e[27]=t("label",{for:"status"},"Status",-1)),i(t("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>l.value.status=a),id:"status"},e[26]||(e[26]=[t("option",{value:"enable"},"Enable",-1),t("option",{value:"disable"},"Disable",-1)]),512),[[b,l.value.status]])]),t("div",{class:"buttons-container"},[e[28]||(e[28]=t("button",{type:"submit",class:"action-btn update-btn"},"Update Stream",-1)),t("button",{type:"button",onClick:g,class:"action-btn cancel-btn"},"Cancel")])],32)])]))}},G=S(J,[["__scopeId","data-v-2f8699d1"]]);export{G as default};
