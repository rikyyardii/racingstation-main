import{x as v,c as m,a as t,d as b,A as k,z as a,B as n,E as p,F as f,f as y,k as c,r as x,D as _,p as T,q as U,o as u,t as g}from"./BOtnuwXw.js";import{u as h}from"./CnjxPKYK.js";import{a as S}from"./xsH4HHeE.js";import{_ as E}from"./B0KwrY0A.js";const L={setup(){const i=U(),{API_URL:e}=c().public,s=x([]),o=_({image:null,title:"",category:"",event:"",event_type:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",scheduled_enable_time:null,scheduled_disable_time:null}),r=async()=>{try{console.log("Fetching event categories from database...");const l=await S.get(`${e}/event-categories`);s.value=l.data,console.log("Event categories fetched:",s.value)}catch(l){console.error("Error fetching categories:",l),s.value=[]}};return T(async()=>{await r()}),h({title:"Tambah Data Stream",ogTitle:"Tambah Data Stream"}),{stream:o,eventCategories:s,navigateToArtikel:()=>{i.push("/rikya/components/Livestream")},router:i,API_URL:e}},methods:{async handleImageUpload(i){const e=i.target.files[0];if(e&&e.type==="image/png"){const s=new FormData;s.append("image",e);try{const r=await(await fetch(`${this.API_URL}/upload-image`,{method:"POST",body:s})).json();r.success?this.stream.image=r.imagePath:alert("Failed to upload image.")}catch(o){console.error("Error uploading image:",o),alert("Error uploading image.")}}else alert("Please upload a PNG file."),i.target.value=""},async submitStream(){try{const i={title:this.stream.title,category:this.stream.category,event:this.stream.event,event_type:this.stream.event_type||null,excerpt:this.stream.excerpt,link:this.stream.link,link2:this.stream.link2||null,link3:this.stream.link3||null,link4:this.stream.link4||null,content:this.stream.content,session_name:null,scheduled_enable_time:this.stream.scheduled_enable_time||null,scheduled_disable_time:this.stream.scheduled_disable_time||null,image_path:this.stream.image||null};console.log("Payload being sent:",i);const e=await fetch(`${this.API_URL}/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),s=await e.json();console.log("Response status:",e.status),console.log("Result:",s),e.ok?(alert("Stream submitted successfully!"),this.router.push("/rikya/components/Livestream"),this.resetForm()):(console.error("Error submitting stream:",s.error||s.message),alert("Error submitting stream: "+(s.error||s.message)))}catch(i){console.error("Error submitting stream:",i),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",category:"",event:"",event_type:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",scheduled_enable_time:null,scheduled_disable_time:null}}}},V={class:"app-wrapper"},w={class:"header-content"},C={class:"dashboard"},A={class:"form-container"},D={class:"form-group"},P={class:"form-group"},R={class:"form-group"},F={class:"form-group"},q={class:"form-group"},B=["value"],I={class:"form-group"},M={class:"form-group"},N={class:"form-group"},O={class:"form-group"},j={class:"form-group"},J={class:"form-group"},G={class:"form-group"},z={class:"form-group"},W={class:"buttons-container"};function H(i,e,s,o,r,d){return u(),m("div",V,[t("header",null,[t("header",null,[t("div",w,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...l)=>o.navigateToArtikel&&o.navigateToArtikel(...l)),style:{cursor:"pointer"}},e[16]||(e[16]=[t("img",{src:E,alt:"RacingStation Logo",class:"logo-image"},null,-1),b(" Dashboard ")]))])])]),t("div",C,[e[34]||(e[34]=t("h1",{class:"black-text"},"Add Live stream",-1)),t("div",A,[t("form",{onSubmit:e[15]||(e[15]=k((...l)=>d.submitStream&&d.submitStream(...l),["prevent"]))},[t("div",D,[e[17]||(e[17]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...l)=>d.handleImageUpload&&d.handleImageUpload(...l)),required:""},null,32)]),t("div",P,[e[18]||(e[18]=t("label",{for:"title"},"Title",-1)),a(t("input",{type:"text",id:"title","onUpdate:modelValue":e[2]||(e[2]=l=>o.stream.title=l),required:""},null,512),[[n,o.stream.title]])]),t("div",R,[e[20]||(e[20]=t("label",{for:"category"},"Category",-1)),a(t("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=l=>o.stream.category=l),required:""},e[19]||(e[19]=[t("option",{value:"Motorsport"},"Motorsport",-1),t("option",{value:"Football"},"Football",-1),t("option",{value:"Basketball"},"Basketball",-1),t("option",{value:"Other"},"Other",-1)]),512),[[p,o.stream.category]])]),t("div",F,[e[21]||(e[21]=t("label",{for:"title"},"Live Event",-1)),a(t("input",{type:"text",id:"event","onUpdate:modelValue":e[4]||(e[4]=l=>o.stream.event=l),required:""},null,512),[[n,o.stream.event]])]),t("div",q,[e[22]||(e[22]=t("label",{for:"event_type"},"Tipe Race Week",-1)),a(t("select",{id:"event_type","onUpdate:modelValue":e[5]||(e[5]=l=>o.stream.event_type=l)},[(u(!0),m(f,null,y(o.eventCategories,l=>(u(),m("option",{key:l.id,value:l.event_type_description},g(l.name.toUpperCase())+" - "+g(l.description),9,B))),128))],512),[[p,o.stream.event_type]])]),t("div",I,[e[23]||(e[23]=t("label",{for:"excerpt"},"Excerpt",-1)),a(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[6]||(e[6]=l=>o.stream.excerpt=l),required:""},null,512),[[n,o.stream.excerpt]])]),t("div",M,[e[24]||(e[24]=t("label",{for:"link"},"Link 1",-1)),a(t("input",{type:"text",id:"link","onUpdate:modelValue":e[7]||(e[7]=l=>o.stream.link=l),required:""},null,512),[[n,o.stream.link]])]),t("div",N,[e[25]||(e[25]=t("label",{for:"link2"},"Link 2",-1)),a(t("input",{type:"text",id:"link2","onUpdate:modelValue":e[8]||(e[8]=l=>o.stream.link2=l)},null,512),[[n,o.stream.link2]])]),t("div",O,[e[26]||(e[26]=t("label",{for:"link3"},"Link 3",-1)),a(t("input",{type:"text",id:"link3","onUpdate:modelValue":e[9]||(e[9]=l=>o.stream.link3=l)},null,512),[[n,o.stream.link3]])]),t("div",j,[e[27]||(e[27]=t("label",{for:"link4"},"Link 4",-1)),a(t("input",{type:"text",id:"link4","onUpdate:modelValue":e[10]||(e[10]=l=>o.stream.link4=l)},null,512),[[n,o.stream.link4]])]),t("div",J,[e[28]||(e[28]=t("label",{for:"content"},"Content",-1)),a(t("textarea",{id:"content","onUpdate:modelValue":e[11]||(e[11]=l=>o.stream.content=l),required:""},null,512),[[n,o.stream.content]])]),t("div",G,[e[29]||(e[29]=t("label",{for:"scheduledEnableTime"},"Jadwal Start Live (opsional)",-1)),a(t("input",{type:"datetime-local",id:"scheduledEnableTime","onUpdate:modelValue":e[12]||(e[12]=l=>o.stream.scheduled_enable_time=l)},null,512),[[n,o.stream.scheduled_enable_time]]),e[30]||(e[30]=t("small",null,"Biarkan kosong untuk status disable",-1))]),t("div",z,[e[31]||(e[31]=t("label",{for:"scheduledDisableTime"},"Jadwal End Live (opsional)",-1)),a(t("input",{type:"datetime-local",id:"scheduledDisableTime","onUpdate:modelValue":e[13]||(e[13]=l=>o.stream.scheduled_disable_time=l)},null,512),[[n,o.stream.scheduled_disable_time]]),e[32]||(e[32]=t("small",null,"Biarkan kosong untuk status disable",-1))]),t("div",W,[e[33]||(e[33]=t("button",{type:"submit",class:"action-btn update-btn"},"Submit Stream",-1)),t("button",{type:"button",onClick:e[14]||(e[14]=(...l)=>o.navigateToArtikel&&o.navigateToArtikel(...l)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const Z=v(L,[["render",H],["__scopeId","data-v-a988e482"]]);export{Z as default};
