import{s as k,r as A,k as x,x as M,m as C,c as p,a as e,b as I,y as D,z as s,C as U,A as d,p as w,q as E,o as g}from"./-H9k7hHH.js";import{D as u}from"./DcQSltNB.js";import{u as R}from"./CisZnfUO.js";import{_ as S}from"./Df0pBcOv.js";const q={setup(){const o=A({id:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:"",image:null}),t=w(),f=E(),r=i=>u.fromISO(i).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd"),v=i=>i?u.fromISO(i).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm"):"",{API_URL:m,IMAGE_URL:a}=x().public,y=async i=>{try{const l=await(await fetch(`${m}/articles/${i}`)).json(),c=u.fromISO(l.date,{zone:"UTC"}).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm");o.value={...o.value,id:l.id,category:l.category,title:l.title,excerpt:l.excerpt||generateExcerpt(l.content),date:c,author:l.author,readingTime:l.reading_time,content:l.content,image:l.image_path?`${a}${l.image_path}`:null}}catch(n){console.error("Error fetching article:",n)}},b=i=>{const l=i.trim();if(!l){o.value.readingTime=0;return}const c=l.split(/\s+/).length;o.value.readingTime=Math.ceil(c/200)};M(()=>o.value.content,i=>{b(i)},{immediate:!0});const T=async()=>{if(!o.value.id){alert("ID artikel tidak valid.");return}try{const i=u.fromISO(o.value.date,{zone:"Asia/Jakarta"}).toUTC().toISO(),n=await fetch(`${m}/articles/${o.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:o.value.category,title:o.value.title,excerpt:o.value.excerpt,date:i,author:o.value.author,readingTime:o.value.readingTime,content:o.value.content})}),l=await n.json();n.ok?(alert("Artikel berhasil diperbarui!"),f.push("../components/Home")):alert("Gagal memperbarui artikel: "+l.error)}catch(i){console.error("Error updating article:",i),alert("Terjadi kesalahan saat memperbarui artikel.")}};return R({title:"Edit Artikel",ogTitle:"Edit Artikel"}),C(()=>{const i=t.params.id;i?(y(i),o.value.id=i):console.error("ID artikel tidak ditemukan pada route.")}),{article:o,submitArticle:T,formatDate:r,formatDateForInput:v}}},V={class:"app-wrapper"},h={class:"header-content"},F={class:"dashboard"},O={class:"form-container"},P={class:"form-group"},_={key:0},H=["src"],J={key:1},j={class:"form-group"},G={class:"form-group"},N={class:"form-group"},W={class:"form-group"},z=["value"],B={class:"form-group"},L={class:"form-group"},Z={class:"form-group"};function K(o,t,f,r,v,m){return g(),p("div",V,[e("header",null,[e("div",h,[e("h1",{class:"logo",onClick:t[0]||(t[0]=(...a)=>o.navigateToArtikel&&o.navigateToArtikel(...a)),style:{cursor:"pointer"}},t[9]||(t[9]=[e("img",{src:S,alt:"RacingStation Logo",class:"logo-image"},null,-1),I(" Dashboard ")]))])]),e("div",F,[t[21]||(t[21]=e("h1",null,"Edit Articles",-1)),e("div",O,[e("form",{onSubmit:t[8]||(t[8]=D((...a)=>r.submitArticle&&r.submitArticle(...a),["prevent"]))},[e("div",P,[t[11]||(t[11]=e("label",null,"Current Image:",-1)),r.article.image?(g(),p("div",_,[e("img",{src:r.article.image,alt:"Current Article Image",class:"current-image"},null,8,H)])):(g(),p("div",J,t[10]||(t[10]=[e("span",null,"No image available",-1)])))]),e("div",j,[t[13]||(t[13]=e("label",{for:"category"},"Category:",-1)),s(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=a=>r.article.category=a),required:""},t[12]||(t[12]=[e("option",{value:"Formula 1"},"Formula 1",-1),e("option",{value:"MotoGP"},"MotoGP",-1),e("option",{value:"WEC"},"WEC",-1),e("option",{value:"WRC"},"WRC",-1)]),512),[[U,r.article.category]])]),e("div",G,[t[14]||(t[14]=e("label",{for:"title"},"Title:",-1)),s(e("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=a=>r.article.title=a),required:""},null,512),[[d,r.article.title]])]),e("div",N,[t[15]||(t[15]=e("label",{for:"excerpt"},"Excerpt:",-1)),s(e("input",{type:"text",id:"excerpt","onUpdate:modelValue":t[3]||(t[3]=a=>r.article.excerpt=a),required:""},null,512),[[d,r.article.excerpt]])]),e("div",W,[t[16]||(t[16]=e("label",{for:"date"},"Date:",-1)),e("input",{type:"datetime-local",id:"date",value:r.formatDateForInput(r.article.date),onInput:t[4]||(t[4]=a=>r.article.date=a.target.value),required:""},null,40,z)]),e("div",B,[t[17]||(t[17]=e("label",{for:"author"},"Author:",-1)),s(e("input",{type:"text",id:"author","onUpdate:modelValue":t[5]||(t[5]=a=>r.article.author=a),required:""},null,512),[[d,r.article.author]])]),e("div",L,[t[18]||(t[18]=e("label",{for:"content"},"Content:",-1)),s(e("textarea",{id:"content","onUpdate:modelValue":t[6]||(t[6]=a=>r.article.content=a),required:""},null,512),[[d,r.article.content]])]),e("div",Z,[t[19]||(t[19]=e("label",{for:"readingTime"},"Reading Time (min):",-1)),s(e("input",{type:"number",id:"readingTime","onUpdate:modelValue":t[7]||(t[7]=a=>r.article.readingTime=a),required:"",disabled:""},null,512),[[d,r.article.readingTime]])]),t[20]||(t[20]=e("button",{type:"submit"},"Update Article",-1))],32)])])])}const tt=k(q,[["render",K],["__scopeId","data-v-90feca4e"]]);export{tt as default};
