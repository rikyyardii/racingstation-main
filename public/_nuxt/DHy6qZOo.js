import{v,c as S,a as o,d as g,A as y,z as b,B as f,t as w,r as k,k as C,q as h,o as T}from"./DX2j-DXT.js";import{u as _}from"./BpEgIk2w.js";import{_ as N}from"./DgMYvVGe.js";const x={setup(){const n=k({name:"",link:""}),e=k(!1),m=h(),{API_URL:s}=C().public,c=async()=>{if(!e.value)try{e.value=!0;const r={name:n.value.name.trim(),link:n.value.link.trim()};console.log("Creating new category with payload:",r),console.log("API URL:",`${s}/sosmed-links`);const a=await fetch(`${s}/sosmed-links`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log("Create response status:",a.status),!a.ok){let l=`HTTP error! status: ${a.status}`;try{const d=await a.json();console.log("Create error response:",d),d.error&&(l=d.error)}catch{console.log("Could not parse error response as JSON")}throw new Error(l)}const p=a.headers.get("content-type");if(!p||!p.includes("application/json")){const l=await a.text();throw console.log("Non-JSON create response:",l),new Error("Server returned non-JSON response")}const i=await a.json();if(console.log("Create result:",i),i.message&&i.id)alert("Sosmed Link berhasil dibuat!"),m.push("/rikya/components/Sosmed");else throw new Error(i.error||"Gagal membuat sosmed link")}catch(r){console.error("Error creating sosmed:",r),alert(r.message||"Terjadi kesalahan saat membuat categories")}finally{e.value=!1}},u=()=>{m.push("/rikya/components/Sosmed")},t=()=>{categories.value={name:"",link:""}};return _({title:"Add New Sosmed",ogTitle:"Add New Sosmed  "}),{sosmed:n,isSubmitting:e,submitSosmed:c,navigateToCategories:u,resetForm:t}}},A={class:"app-wrapper"},L={class:"header-content"},M={class:"dashboard"},j={class:"form-container"},E={class:"form-group"},O={class:"form-group"},R={class:"buttons-container"},q=["disabled"];function B(n,e,m,s,c,u){return T(),S("div",A,[o("header",null,[o("div",L,[o("h1",{class:"logo",onClick:e[0]||(e[0]=(...t)=>s.navigateToCategories&&s.navigateToCategories(...t)),style:{cursor:"pointer"}},e[5]||(e[5]=[o("img",{src:N,alt:"RacingStation Logo",class:"logo-image"},null,-1),g(" Dashboard ")]))])]),o("div",M,[o("div",j,[e[8]||(e[8]=o("h1",{class:"black-text"},"Add New Sosmed",-1)),o("form",{onSubmit:e[4]||(e[4]=y((...t)=>s.submitSosmed&&s.submitSosmed(...t),["prevent"]))},[o("div",E,[e[6]||(e[6]=o("label",{for:"name"},[g("Nama "),o("span",{class:"required"},"*")],-1)),b(o("input",{type:"text",id:"name","onUpdate:modelValue":e[1]||(e[1]=t=>s.sosmed.name=t),required:"",placeholder:"Masukkan nama sosmed"},null,512),[[f,s.sosmed.name]])]),o("div",O,[e[7]||(e[7]=o("label",{for:"description"},"Link",-1)),b(o("input",{id:"description","onUpdate:modelValue":e[2]||(e[2]=t=>s.sosmed.link=t),required:"",placeholder:"Masukkan deskripsi sosmed"},null,512),[[f,s.sosmed.link]])]),o("div",R,[o("button",{type:"submit",class:"action-btn create-btn",disabled:s.isSubmitting},w(s.isSubmitting?"Creating...":"Create Sosmed Link"),9,q),o("button",{type:"button",onClick:e[3]||(e[3]=(...t)=>s.navigateToCategories&&s.navigateToCategories(...t)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const U=v(x,[["render",B],["__scopeId","data-v-4b76e668"]]);export{U as default};
