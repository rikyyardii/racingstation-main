import{s as k,c as u,a as t,d as y,z as c,y as s,A as r,D as p,F as b,f as F,k as P,C as x,r as S,x as h,q as R,o as g,t as T}from"./CFG83du_.js";import{u as _}from"./C24GBl0v.js";import{_ as M}from"./B-NxDpHj.js";const U={setup(){const n=R(),{API_URL:e}=P().public,l={f1:[{value:"Free Practice 1 F1",text:"FP1 (F1)"},{value:"Free Practice 2 F1",text:"FP2 (F1)"},{value:"Free Practice 3 F1",text:"FP3 (F1)"},{value:"Qualifying F1",text:"Qualifying (F1)"},{value:"Spint Race F1",text:"Sprint (F1)"},{value:"Race F1",text:"Race (F1)"}],f1Sprint:[{value:"Free Practice 1 F1",text:"FP1 (F1)"},{value:"Sprint Qualifying F1",text:"Sprint Qualifying (F1)"},{value:"Sprint Race F1",text:"Sprint (F1)"},{value:"Qualifying F1",text:"Qualifying (F1)"},{value:"Race F1",text:"Race (F1)"}],motogp:[{value:"Free Practice 1 MotoGP",text:"FP1 (MotoGP)"},{value:"Practice MotoGP",text:"Practice (MotoGP)"},{value:"Free Practice 2 MotoGP",text:"FP2 (MotoGP)"},{value:"Qualifying MotoGP",text:"Qualifying (MotoGP)"},{value:"Free Practice 2 & Qualifying MotoGP",text:"FP2 & Quali (MotoGP)"},{value:"Sprint Race MotoGP",text:"Sprint (MotoGP)"},{value:"Warm Up",text:"Warm Up (MotoGP)"},{value:"Race MotoGP",text:"Race (MotoGP)"}],other:[{value:"Race FIA WEC",text:"Race (WEC)"},{value:"Match",text:"Match (All Football)"}]},i=x({image:null,title:"",category:"",event:"",event_type:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",session_name:"",event_type:"",scheduled_enable_time:null,scheduled_disable_time:null}),o=S(l.other),d=()=>{const m=i.event_type;m==="(The link will remain the same for all sessions in this race week including FP1, FP2, FP3, Qualifying, and Race)"?o.value=l.f1:m==="(The link will remain the same for all sessions in this race week including FP1, Sprint Qualifying, Sprint Race, Qualifying, and Race)"?o.value=l.f1Sprint:m==="(The link will remain the same for all sessions in this race week including FP1, Practice, FP2, Qualifying, Sprint, Warm Up and Race)"?o.value=l.motogp:o.value=l.other;const v=o.value.map(f=>f.value);v.includes(i.session_name)||(i.session_name=v[0]||"")};return d(),h(()=>i.event_type,d),_({title:"Tambah Data Stream",ogTitle:"Tambah Data Stream"}),{stream:i,navigateToArtikel:()=>{n.push("/rikya/components/Livestream")},router:n,filteredSessionOptions:o,updateSessionOptions:d,API_URL:e}},methods:{async handleImageUpload(n){const e=n.target.files[0];if(e&&e.type==="image/png"){const l=new FormData;l.append("image",e);try{const o=await(await fetch(`${this.API_URL}/upload-image`,{method:"POST",body:l})).json();o.success?this.stream.image=o.imagePath:alert("Failed to upload image.")}catch(i){console.error("Error uploading image:",i),alert("Error uploading image.")}}else alert("Please upload a PNG file."),n.target.value=""},async submitStream(){try{const n={title:this.stream.title,category:this.stream.category,event:this.stream.event,event_type:this.stream.event_type,excerpt:this.stream.excerpt,link:this.stream.link,link2:this.stream.link2,link3:this.stream.link3,link4:this.stream.link4,content:this.stream.content,session_name:this.stream.session_name,event_type:this.stream.event_type,scheduled_enable_time:this.stream.scheduled_enable_time,scheduled_disable_time:this.stream.scheduled_disable_time,imagePath:this.stream.image},e=await fetch(`${this.API_URL}/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),l=await e.json();console.log("Response status:",e.status),console.log("Result:",l),e.ok?(alert("Stream submitted successfully!"),this.router.push("/rikya/components/Livestream"),this.resetForm()):(console.error("Error submitting stream:",l.error||l.message),alert("Error submitting stream: "+(l.error||l.message)))}catch(n){console.error("Error submitting stream:",n),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",category:"",event:"",event_type:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",session_name:"",event_type:"",scheduled_enable_time:null,scheduled_disable_time:null},this.updateSessionOptions()}}},w={class:"app-wrapper"},G={class:"header-content"},Q={class:"dashboard"},V={class:"form-container"},E={class:"form-group"},L={class:"form-group"},A={class:"form-group"},C={class:"form-group"},D={class:"form-group"},O={class:"form-group"},I={class:"form-group"},q={class:"form-group"},W={class:"form-group"},B={class:"form-group"},N={class:"form-group"},j=["value"],J={class:"form-group"},z={class:"form-group"},H={class:"form-group"},K={class:"buttons-container"};function X(n,e,l,i,o,d){return g(),u("div",w,[t("header",null,[t("header",null,[t("div",G,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...a)=>i.navigateToArtikel&&i.navigateToArtikel(...a)),style:{cursor:"pointer"}},e[18]||(e[18]=[t("img",{src:M,alt:"RacingStation Logo",class:"logo-image"},null,-1),y(" Dashboard ")]))])])]),t("div",Q,[e[38]||(e[38]=t("h1",{class:"black-text"},"Add Live stream",-1)),t("div",V,[t("form",{onSubmit:e[17]||(e[17]=c((...a)=>d.submitStream&&d.submitStream(...a),["prevent"]))},[t("div",E,[e[19]||(e[19]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...a)=>d.handleImageUpload&&d.handleImageUpload(...a)),required:""},null,32)]),t("div",L,[e[20]||(e[20]=t("label",{for:"title"},"Title",-1)),s(t("input",{type:"text",id:"title","onUpdate:modelValue":e[2]||(e[2]=a=>i.stream.title=a),required:""},null,512),[[r,i.stream.title]])]),t("div",A,[e[22]||(e[22]=t("label",{for:"category"},"Category:",-1)),s(t("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=a=>i.stream.category=a),required:""},e[21]||(e[21]=[t("option",{value:"Motorsport"},"Motorsport",-1),t("option",{value:"Football"},"Football",-1),t("option",{value:"Basketball"},"Basketball",-1)]),512),[[p,i.stream.category]])]),t("div",C,[e[23]||(e[23]=t("label",{for:"title"},"Live Event",-1)),s(t("input",{type:"text",id:"event","onUpdate:modelValue":e[4]||(e[4]=a=>i.stream.event=a),required:""},null,512),[[r,i.stream.event]])]),t("div",D,[e[25]||(e[25]=t("label",{for:"event_type"},"Tipe Race Week",-1)),s(t("select",{id:"event_type","onUpdate:modelValue":e[5]||(e[5]=a=>i.stream.event_type=a),onChange:e[6]||(e[6]=(...a)=>i.updateSessionOptions&&i.updateSessionOptions(...a))},e[24]||(e[24]=[t("option",{value:""},"kosong (Race WEC dan lainnya)",-1),t("option",{value:"(The link will remain the same for all sessions in this race week including FP1, FP2, FP3, Qualifying, and Race)"},"Normal (F1)",-1),t("option",{value:"(The link will remain the same for all sessions in this race week including FP1, Sprint Qualifying, Sprint Race, Qualifying, and Race)"},"Sprint (F1)",-1),t("option",{value:"(The link will remain the same for all sessions in this race week including FP1, Practice, FP2, Qualifying, Sprint, Warm Up and Race)"},"Normal (MotoGP)",-1)]),544),[[p,i.stream.event_type]])]),t("div",O,[e[26]||(e[26]=t("label",{for:"excerpt"},"Excerpt",-1)),s(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[7]||(e[7]=a=>i.stream.excerpt=a),required:""},null,512),[[r,i.stream.excerpt]])]),t("div",I,[e[27]||(e[27]=t("label",{for:"link"},"Link 1",-1)),s(t("input",{type:"text",id:"link","onUpdate:modelValue":e[8]||(e[8]=a=>i.stream.link=a),required:""},null,512),[[r,i.stream.link]])]),t("div",q,[e[28]||(e[28]=t("label",{for:"link2"},"Link 2",-1)),s(t("input",{type:"text",id:"link2","onUpdate:modelValue":e[9]||(e[9]=a=>i.stream.link2=a)},null,512),[[r,i.stream.link2]])]),t("div",W,[e[29]||(e[29]=t("label",{for:"link3"},"Link 3",-1)),s(t("input",{type:"text",id:"link3","onUpdate:modelValue":e[10]||(e[10]=a=>i.stream.link3=a)},null,512),[[r,i.stream.link3]])]),t("div",B,[e[30]||(e[30]=t("label",{for:"link4"},"Link 4",-1)),s(t("input",{type:"text",id:"link4","onUpdate:modelValue":e[11]||(e[11]=a=>i.stream.link4=a)},null,512),[[r,i.stream.link4]])]),t("div",N,[e[31]||(e[31]=t("label",{for:"session_name"},"Pilih sesi",-1)),s(t("select",{id:"session_name","onUpdate:modelValue":e[12]||(e[12]=a=>i.stream.session_name=a)},[(g(!0),u(b,null,F(i.filteredSessionOptions,a=>(g(),u("option",{key:a.value,value:a.value},T(a.text),9,j))),128))],512),[[p,i.stream.session_name]])]),t("div",J,[e[32]||(e[32]=t("label",{for:"content"},"Content",-1)),s(t("textarea",{id:"content","onUpdate:modelValue":e[13]||(e[13]=a=>i.stream.content=a),required:""},null,512),[[r,i.stream.content]])]),t("div",z,[e[33]||(e[33]=t("label",{for:"scheduledEnableTime"},"Jadwal Start Live (opsional)",-1)),s(t("input",{type:"datetime-local",id:"scheduledEnableTime","onUpdate:modelValue":e[14]||(e[14]=a=>i.stream.scheduled_enable_time=a)},null,512),[[r,i.stream.scheduled_enable_time]]),e[34]||(e[34]=t("small",null,"Biarkan kosong untuk status disable",-1))]),t("div",H,[e[35]||(e[35]=t("label",{for:"scheduledDisableTime"},"Jadwal End Live (opsional)",-1)),s(t("input",{type:"datetime-local",id:"scheduledDisableTime","onUpdate:modelValue":e[15]||(e[15]=a=>i.stream.scheduled_disable_time=a)},null,512),[[r,i.stream.scheduled_disable_time]]),e[36]||(e[36]=t("small",null,"Biarkan kosong untuk status disable",-1))]),t("div",K,[e[37]||(e[37]=t("button",{type:"submit",class:"action-btn update-btn"},"Submit Stream",-1)),t("button",{type:"button",onClick:e[16]||(e[16]=(...a)=>i.navigateToArtikel&&i.navigateToArtikel(...a)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const ee=k(U,[["render",X],["__scopeId","data-v-e9d684d1"]]);export{ee as default};
