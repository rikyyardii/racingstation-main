import{s as $,m as N,r as d,u as L,o as M,c as r,z as m,a as _,b as t,d as S,x as T,y as B,F as I,g as R,t as n,l as h}from"./DxxQWAzE.js";import{a as k}from"./CCb-kr4I.js";const V={class:"container"},F={class:"table-controls"},U={class:"right-controls"},j={class:"search-box"},z={class:"table-container"},G={class:"data-table"},O={class:"action-buttons"},Q=["onClick"],q=["onClick"],H={class:"table-footer"},J={class:"entries-info"},K={class:"pagination"},W=["disabled"],X={class:"page-number"},Y=["disabled"],Z={__name:"Artikel",setup(tt){const p=N(),c=d(""),l=d(1),o=d(5),u=d([]),{API_URL:b}=L().public;M(async()=>{try{const e=await k.get(`${b}/articles_card`);u.value=e.data.sort((s,a)=>new Date(a.date)-new Date(s.date))}catch(e){console.error("Error fetching articles:",e)}});const g=r(()=>u.value.filter(e=>{const s=c.value.toLowerCase();return Object.values(e).some(a=>a.toString().toLowerCase().includes(s))})),i=r(()=>g.value.length),f=r(()=>Math.ceil(i.value/o.value)),y=r(()=>{const e=(l.value-1)*o.value,s=e+o.value;return g.value.slice(e,s)}),w=r(()=>i.value===0?0:(l.value-1)*o.value+1),x=r(()=>{const e=l.value*o.value;return e>i.value?i.value:e}),A=()=>{p.push("add_artikel")},C=e=>{p.push(`/rikya/edit_artikel/${e.slug}`)},P=async e=>{if(confirm("Are you sure you want to delete this article?"))try{const a=await k.delete(`${b}/articles/${e.id}`);alert(a.data.message),u.value=u.value.filter(v=>v.id!==e.id)}catch(a){console.error("Error deleting article:",a),alert("Gagal menghapus artikel.")}},E=()=>{l.value>1&&l.value--},D=()=>{l.value<f.value&&l.value++};return m(c,()=>{l.value=1}),m(o,()=>{l.value=1}),(e,s)=>(h(),_("div",V,[s[4]||(s[4]=t("h2",{class:"black-text"},"Article Management",-1)),t("div",F,[t("div",{class:"left-controls"},[t("button",{onClick:A,class:"new-btn"},s[1]||(s[1]=[t("span",{class:"plus-icon"},"+",-1),S(" New")]))]),t("div",U,[t("div",j,[s[2]||(s[2]=t("label",null,"Search:",-1)),T(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),class:"search-input"},null,512),[[B,c.value]])])])]),t("div",z,[t("table",G,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Author"),t("th",null,"Action")])],-1)),t("tbody",null,[(h(!0),_(I,null,R(y.value,a=>(h(),_("tr",{key:a.id},[t("td",null,n(a.id),1),t("td",null,n(a.title),1),t("td",null,n(a.author),1),t("td",O,[t("button",{onClick:v=>C(a),class:"edit-btn"},"Edit",8,Q),t("button",{onClick:v=>P(a),class:"delete-btn"},"Delete",8,q)])]))),128))])])]),t("div",H,[t("div",J,"Showing "+n(w.value)+" to "+n(x.value)+" of "+n(i.value)+" entries",1),t("div",K,[t("button",{onClick:E,disabled:l.value===1,class:"pagination-btn"},"Previous",8,W),t("span",X,n(l.value),1),t("button",{onClick:D,disabled:l.value===f.value,class:"pagination-btn"},"Next",8,Y)])])]))}},at=$(Z,[["__scopeId","data-v-73697e58"]]);export{at as default};
