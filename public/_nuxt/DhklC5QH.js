import{r as n,k as ne,l as m,p as z,x as re,y as le,c as r,a as e,_ as ie,b as y,d as C,u as i,F as R,e as A,f as l,w as D,T as ce,z as U,A as T,B as F,H as Q,g as _,C as ue,n as de,t as h,D as me,o,h as ve}from"./Bxt6o2xq.js";import{S as he,M as ge,a as pe,X as K,F as _e}from"./B2L3iXDp.js";import{A as fe}from"./D3oWMSfX.js";import{u as Se}from"./zaQ_01pX.js";import{s as we}from"./BdWtB1Jz.js";import{S as I,A as be,C as ke,a as ye}from"./CLHvAP1F.js";const Ce={class:"app"},Le={class:"header-content"},Me={class:"header-controls"},Re={class:"desktop-nav"},Ae={key:0,class:"mobile-nav"},De={class:"mobile-nav-content"},Te={key:0,class:"articles-section"},Ie={class:"stream-header"},Ne={key:0,class:"search-container"},xe={type:"submit",class:"search-button"},Pe={type:"submit",class:"search-button"},Ve={class:"stream-grid"},Ee=["onClick"],We={class:"stream-image-container"},$e=["src","alt"],Be={key:1},ze={class:"stream-content"},Ue={class:"stream-footer"},Fe={class:"read-more"},Qe={key:1,class:"pagination"},Ke=["disabled"],Oe={class:"pagination-info"},je=["disabled"],N=6,tt={__name:"stream",setup(qe){const O=n(""),j=me(),q=n(""),x=()=>{const t=new Date;O.value=t.toLocaleTimeString()},G=n(null),f=n(!1),S=n(!0),P=n("Latest News");n(!1),n(""),n("");const u=n(""),v=n(!1),g=n(!1),V=["Latest News","Watch Sports"],E=t=>{switch(t){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},L=()=>{f.value=!f.value},H=()=>{S.value=!S.value,document.body.classList.toggle("light-mode",!S.value)},M=n([]),{API_URL:J,IMAGE_URL:w}=ne().public,X=m(()=>"RacingStation Stream"),Y=m(()=>"Watch live streaming of your favorite sports events with RacingStation Stream"),Z=m(()=>`${w.startsWith("http")?w:`https://${w}`}/public/img/racingstation-stream.png`);Se({title:X,ogTitle:"RacingStation Stream",description:Y,ogDescription:"Watch live streaming of your favorite events.",ogImage:Z,twitterTitle:"RacingStation Stream",twitterDescription:"Watch live streaming of your favorite sports events with RacingStation Stream",twitterCard:"summary_large_image"});const W=async()=>{try{const t=await fetch(`${J}/streams_card`);if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();M.value=a.map(d=>(M.value.length===0&&(q.value=d.title),{...d,image_path:`${w}${d.image_path}`}))}catch(t){console.error("Error fetching streams:",t)}},b=()=>{localStorage.setItem("streamSearchQuery",u.value),v.value&&(g.value=!1)},$=m(()=>{const t=u.value.trim().toLowerCase();return t?B.value.filter(a=>a.title.toLowerCase().includes(t)):B.value}),ee=()=>{g.value=!g.value},p=()=>{v.value=window.innerWidth<=640,v.value||(g.value=!0)};z(()=>{const t=localStorage.getItem("streamSearchQuery");t&&(u.value=t),p(),window.addEventListener("resize",p),W()}),z(()=>{p(),window.addEventListener("resize",p),W(),x(),we(x,1e3);const t=localStorage.getItem("selectedArticle");t&&(G.value=JSON.parse(t),P.value="Detailed Article")}),re(()=>{localStorage.removeItem("streamSearchQuery"),window.removeEventListener("resize",p)});const B=m(()=>M.value.slice().sort((t,a)=>{const d=new Date(t.created_at),s=new Date(a.created_at);return d-s})),c=n(1),k=m(()=>Math.ceil($.value.length/N));le(u,t=>{t.trim()&&(c.value=1)});const te=m(()=>{const t=(c.value-1)*N,a=t+N;return $.value.slice(t,a)}),se=()=>{c.value<k.value&&c.value++},ae=()=>{c.value>1&&c.value--},oe=t=>{j.push(`/watch/${t}`)};return(t,a)=>{const d=ve;return o(),r("div",Ce,[e("header",null,[e("div",Le,[a[2]||(a[2]=e("h1",{class:"logo"},[e("img",{src:ie,alt:"RacingStation Logo",class:"logo-image"}),y(" RacingStation ")],-1)),e("div",Me,[e("button",{onClick:H,class:"icon-button"},[S.value?(o(),C(i(he),{key:0})):(o(),C(i(ge),{key:1}))]),e("button",{onClick:L,class:"icon-button menu-toggle"},[f.value?(o(),C(i(K),{key:1})):(o(),C(i(pe),{key:0}))]),e("nav",Re,[e("ul",null,[(o(),r(R,null,A(V,s=>e("li",{key:s},[l(d,{to:E(s),class:"no-active-link"},{default:D(()=>[y(h(s),1)]),_:2},1032,["to"])])),64))])])])])]),l(ce,{name:"slide"},{default:D(()=>[f.value?(o(),r("nav",Ae,[e("div",De,[e("button",{onClick:L,class:"icon-button close-menu"},[l(i(K))]),e("ul",null,[(o(),r(R,null,A(V,s=>e("li",{key:s},[l(d,{to:E(s),class:"no-active-link",onClick:L},{default:D(()=>[y(h(s),1)]),_:2},1032,["to"])])),64))])])])):_("",!0)]),_:1}),e("main",null,[l(fe),P.value==="Latest News"?(o(),r("div",Te,[e("div",Ie,[a[3]||(a[3]=e("h2",{class:"font-sans font-normal"},"Live Sports",-1)),v.value?_("",!0):(o(),r("div",Ne,[e("form",{onSubmit:U(b,["prevent"]),class:"search-form"},[T(e("input",{type:"search","onUpdate:modelValue":a[0]||(a[0]=s=>u.value=s),placeholder:"Search live streams...",class:"search-input","aria-label":"Search streams",onKeyup:Q(b,["enter"])},null,544),[[F,u.value]]),e("button",xe,[l(i(I),{class:"search-icon"})])],32)])),T(e("button",{onClick:ee,class:"mobile-search-icon"},[l(i(I),{class:"search-icon"})],512),[[ue,v.value]])]),v.value?(o(),r("div",{key:0,class:de(["search-container mobile-search",{"mobile-search-active":g.value}])},[e("form",{onSubmit:U(b,["prevent"]),class:"search-form"},[T(e("input",{type:"search","onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),placeholder:"Search live streams...",class:"search-input","aria-label":"Search streams",onKeyup:Q(b,["enter"])},null,544),[[F,u.value]]),e("button",Pe,[l(i(I),{class:"search-icon"})])],32)],2)):_("",!0),e("div",Ve,[(o(!0),r(R,null,A(te.value,s=>(o(),r("article",{key:s.slug,class:"stream-card",onClick:Ge=>oe(s.slug)},[e("div",We,[s.image_path?(o(),r("img",{key:0,src:s.image_path,alt:s.title,class:"stream-image"},null,8,$e)):(o(),r("p",Be,"Image not available"))]),e("div",ze,[e("h3",null,h(s.title),1),e("p",null,h(s.excerpt),1),e("div",Ue,[e("span",Fe,[a[4]||(a[4]=y(" Read more ")),l(i(be))])])])],8,Ee))),128))]),k.value>1?(o(),r("div",Qe,[e("button",{onClick:ae,disabled:c.value===1,class:"pagination-button"},[l(i(ke))],8,Ke),e("span",Oe,"Page "+h(c.value)+" of "+h(k.value),1),e("button",{onClick:se,disabled:c.value===k.value,class:"pagination-button"},[l(i(ye))],8,je)])):_("",!0)])):_("",!0)]),l(_e)])}}};export{tt as default};
