import{s as P,G as S,H as M,r as T,k as R,p as U,c as x,a as t,d as V,_ as c,z as w,y as i,A as n,D as d,j as E,o as G}from"./BI4e-Nzo.js";import{u as C}from"./kGMg_4sV.js";import{a as b}from"./xsH4HHeE.js";import{D as u}from"./DOXiyJsP.js";const D={class:"app-wrapper"},I={class:"header-content"},L={class:"container"},A={class:"form-group"},Q={class:"form-group"},W={__name:"[id]",setup(B){const p=S(),s=M(),l=T({title:"",category:"",event:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",event_type:"",scheduled_enable_time:null,scheduled_disable_time:null,status:""}),{API_URL:v}=R().public,m=o=>o?(o.includes("T")?u.fromISO(o,{zone:"UTC"}):u.fromSQL(o,{zone:"UTC"})).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm"):null,g=async()=>{try{const o=s.params.slug||s.params.id,{data:e}=await b.get(`${v}/streams/${o}`);console.log("Raw data:",e),e.scheduled_enable_time&&(e.scheduled_enable_time=m(e.scheduled_enable_time),console.log("Converted time:",e.scheduled_enable_time)),e.scheduled_disable_time&&(e.scheduled_disable_time=m(e.scheduled_disable_time)),l.value=e}catch(o){console.error("Error fetching stream data:",o)}},k=()=>{p.push("/rikya/components/Livestream")};C({title:"Edit Streaming",ogTitle:"Edit Streaming"}),U(async()=>{await g()});const y=async()=>{var o;try{const e=s.params.slug||s.params.id;if(!e){alert("Slug tidak ditemukan!");return}let a=null;if(l.value.scheduled_enable_time){const r=u.fromISO(l.value.scheduled_enable_time,{zone:"Asia/Jakarta"});if(!r.isValid){alert("Format waktu tidak valid!");return}a=r.toISO()}let f=null;l.value.scheduled_disable_time&&(f=u.fromISO(l.value.scheduled_disable_time,{zone:"Asia/Jakarta"}).toISO());const F={...l.value,scheduled_enable_time:a,scheduled_disable_time:f};await b.put(`${v}/streams/${e}`,F),alert("Stream berhasil diperbarui!"),p.go(-1)}catch(e){console.error("Error updating stream:",((o=e.response)==null?void 0:o.data)||e.message),alert("Gagal memperbarui stream.")}};return(o,e)=>(G(),x("div",D,[t("header",null,[t("div",I,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...a)=>o.navigateToArtikel&&o.navigateToArtikel(...a)),style:{cursor:"pointer"}},e[15]||(e[15]=[t("img",{src:c,alt:"RacingStation Logo",class:"logo-image"},null,-1),V(" Dashboard ")]))])]),t("div",L,[e[35]||(e[35]=t("h2",{class:"black-text"},"Edit Livestream",-1)),t("form",{onSubmit:w(y,["prevent"])},[t("div",null,[e[16]||(e[16]=t("label",{for:"title"},"Title",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.title=a),id:"title",required:""},null,512),[[n,l.value.title]])]),t("div",A,[e[18]||(e[18]=t("label",{for:"category"},"Category:",-1)),i(t("select",{id:"category","onUpdate:modelValue":e[2]||(e[2]=a=>l.value.category=a),required:""},e[17]||(e[17]=[t("option",{value:"Motorsport"},"Motorsport",-1),t("option",{value:"Football"},"Football",-1)]),512),[[d,l.value.category]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"event"},"Live Event",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>l.value.event=a),id:"event"},null,512),[[n,l.value.event]])]),t("div",null,[e[21]||(e[21]=t("label",{for:"event_type"},"Tipe Race Week",-1)),i(t("select",{id:"event_type","onUpdate:modelValue":e[4]||(e[4]=a=>l.value.event_type=a)},e[20]||(e[20]=[t("option",{value:""},"kosong (Race WEC dan lainnya)",-1),t("option",{value:"(The link will remain the same for all sessions in this race week including FP1, FP2, FP3, Qualifying, and Race)"},"Normal (F1)",-1),t("option",{value:"(The link will remain the same for all sessions in this race week including FP1, Sprint Qualifying, Sprint Race, Qualifying, and Race)"},"Sprint (F1)",-1),t("option",{value:"(The link will remain the same for all sessions in this race week including FP1, Practice, FP2, Qualifying, Sprint, Warm Up and Race)"},"Normal (MotoGP)",-1)]),512),[[d,l.value.event_type]])]),t("div",null,[e[22]||(e[22]=t("label",{for:"excerpt"},"Excerpt",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>l.value.excerpt=a),id:"excerpt",required:""},null,512),[[n,l.value.excerpt]])]),t("div",null,[e[23]||(e[23]=t("label",{for:"link"},"Link 1",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>l.value.link=a),id:"link",required:""},null,512),[[n,l.value.link]])]),t("div",null,[e[24]||(e[24]=t("label",{for:"link2"},"Link 2",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=a=>l.value.link2=a),id:"link2"},null,512),[[n,l.value.link2]])]),t("div",null,[e[25]||(e[25]=t("label",{for:"link3"},"Link 3",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=a=>l.value.link3=a),id:"link3"},null,512),[[n,l.value.link3]])]),t("div",null,[e[26]||(e[26]=t("label",{for:"link4"},"Link 4",-1)),i(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=a=>l.value.link4=a),id:"link4"},null,512),[[n,l.value.link4]])]),t("div",null,[e[27]||(e[27]=t("label",{for:"content"},"Content",-1)),i(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=a=>l.value.content=a),id:"content",required:""},null,512),[[n,l.value.content]])]),t("div",Q,[e[29]||(e[29]=t("label",{for:"category"},"Pilih Sesi",-1)),i(t("select",{id:"session_name","onUpdate:modelValue":e[11]||(e[11]=a=>l.value.session_name=a)},e[28]||(e[28]=[E('<option value="Free Practice 1 F1" data-v-9079a8f4>FP1 (F1)</option><option value="Free Practice 2 F1" data-v-9079a8f4>FP2 (F1)</option><option value="Free Practice 3 F1" data-v-9079a8f4>FP3 (F1)</option><option value="Qualifying F1" data-v-9079a8f4>Qualifying (F1)</option><option value="Spint Race F1" data-v-9079a8f4>Sprint (F1)</option><option value="Race F1" data-v-9079a8f4>Race (F1)</option><option value="Free Practice 1 MotoGP" data-v-9079a8f4>FP1 (MotoGP)</option><option value="Practice MotoGP" data-v-9079a8f4>Practice (MotoGP)</option><option value="Free Practice 2 MotoGP" data-v-9079a8f4>FP2 (MotoGP)</option><option value="Qualifying MotoGP" data-v-9079a8f4>Qualifying (MotoGP)</option><option value="Spint Race MotoGP" data-v-9079a8f4>Sprint (MotoGP)</option><option value="Race MotoGP" data-v-9079a8f4>Race (MotoGP)</option><option value="Race FIA WEC" data-v-9079a8f4>Race (WEC)</option><option value="Match" data-v-9079a8f4>Match (All Football)</option>',14)]),512),[[d,l.value.session_name]])]),t("div",null,[e[30]||(e[30]=t("label",{for:"scheduledEnableTime"},"Jadwal Enable (WIB)",-1)),i(t("input",{type:"datetime-local",id:"scheduledEnableTime","onUpdate:modelValue":e[12]||(e[12]=a=>l.value.scheduled_enable_time=a)},null,512),[[n,l.value.scheduled_enable_time]])]),t("div",null,[e[31]||(e[31]=t("label",{for:"scheduledDisableTime"},"Jadwal Disable (WIB)",-1)),i(t("input",{type:"datetime-local",id:"scheduledDisableTime","onUpdate:modelValue":e[13]||(e[13]=a=>l.value.scheduled_disable_time=a)},null,512),[[n,l.value.scheduled_disable_time]])]),t("div",null,[e[33]||(e[33]=t("label",{for:"status"},"Status",-1)),i(t("select",{"onUpdate:modelValue":e[14]||(e[14]=a=>l.value.status=a),id:"status"},e[32]||(e[32]=[t("option",{value:"enable"},"Enable",-1),t("option",{value:"disable"},"Disable",-1)]),512),[[d,l.value.status]])]),t("div",{class:"buttons-container"},[t("button",{type:"button",onClick:k,class:"action-btn cancel-btn"},"Cancel"),e[34]||(e[34]=t("button",{type:"submit",class:"action-btn update-btn"},"Update Stream",-1))])],32)])]))}},O=P(W,[["__scopeId","data-v-9079a8f4"]]);export{O as default};
