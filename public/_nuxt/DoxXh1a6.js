import{r as n,k as re,l as v,p as U,x as le,y as ie,c as r,a as e,_ as ce,b as k,d as C,u as i,F as A,e as D,f as l,w as T,T as ue,z as F,A as I,B as Q,H as K,g as _,C as de,n as ve,t as m,D as me,o,h as he}from"./D7vLjz9K.js";import{S as ge,M as pe,a as _e,X as O,F as fe}from"./BqqzK9yO.js";import{A as Se}from"./CgI5xPl7.js";import{u as we}from"./D20v4k5w.js";import{s as ye}from"./DNTqYxDL.js";import{S as N,A as be,C as ke,a as Ce}from"./Afo12LJI.js";const Le={class:"app"},Me={class:"header-content"},Re={class:"header-controls"},Ae={class:"desktop-nav"},De={key:0,class:"mobile-nav"},Te={class:"mobile-nav-content"},Ie={key:0,class:"articles-section"},Ne={class:"stream-header"},xe={key:0,class:"search-container"},Pe={type:"submit",class:"search-button"},Ve={type:"submit",class:"search-button"},We={class:"stream-grid"},Ee=["onClick"],$e={class:"stream-image-container"},Be=["src","alt"],ze={key:1},Ue={class:"stream-content"},Fe={class:"stream-category"},Qe={class:"stream-footer"},Ke={class:"read-more"},Oe={key:1,class:"pagination"},je=["disabled"],qe={class:"pagination-info"},Ge=["disabled"],x=6,st={__name:"stream",setup(He){const j=n(""),q=me(),G=n(""),P=()=>{const t=new Date;j.value=t.toLocaleTimeString()},H=n(null),f=n(!1),S=n(!0),V=n("Latest News");n(!1),n(""),n("");const d=n(""),h=n(!1),g=n(!1),W=["Latest News","Watch Sports"],E=t=>{switch(t){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},L=()=>{f.value=!f.value},J=()=>{S.value=!S.value,document.body.classList.toggle("light-mode",!S.value)},M=n([]),{API_URL:X,IMAGE_URL:w}=re().public,Y=v(()=>"RacingStation Stream"),Z=v(()=>"Watch live streaming of your favorite sports events with RacingStation Stream"),ee=v(()=>`${w.startsWith("http")?w:`https://${w}`}/public/img/racingstation-stream.png`);we({title:Y,ogTitle:"RacingStation Stream",description:Z,ogDescription:"Watch live streaming of your favorite events.",ogImage:ee,twitterTitle:"RacingStation Stream",twitterDescription:"Watch live streaming of your favorite sports events with RacingStation Stream",twitterCard:"summary_large_image"});const $=async()=>{try{const t=await fetch(`${X}/streams_card`);if(!t.ok)throw new Error("Network response was not ok");const a=await t.json();M.value=a.map(c=>(M.value.length===0&&(G.value=c.title),{...c,image_path:`${w}${c.image_path}`}))}catch(t){console.error("Error fetching streams:",t)}},y=()=>{localStorage.setItem("streamSearchQuery",d.value),h.value&&(g.value=!1)},B=v(()=>{const t=d.value.trim().toLowerCase();return t?z.value.filter(a=>{var R;const c=a.title.toLowerCase().includes(t),s=((R=a.category)==null?void 0:R.toLowerCase().includes(t))||!1;return c||s}):z.value}),te=()=>{g.value=!g.value},p=()=>{h.value=window.innerWidth<=640,h.value||(g.value=!0)};U(()=>{const t=localStorage.getItem("streamSearchQuery");t&&(d.value=t),p(),window.addEventListener("resize",p),$()}),U(()=>{p(),window.addEventListener("resize",p),$(),P(),ye(P,1e3);const t=localStorage.getItem("selectedArticle");t&&(H.value=JSON.parse(t),V.value="Detailed Article")}),le(()=>{localStorage.removeItem("streamSearchQuery"),window.removeEventListener("resize",p)});const z=v(()=>M.value.slice().sort((t,a)=>{const c=new Date(t.created_at),s=new Date(a.created_at);return c-s})),u=n(1),b=v(()=>Math.ceil(B.value.length/x));ie(d,t=>{t.trim()&&(u.value=1)});const se=v(()=>{const t=(u.value-1)*x,a=t+x;return B.value.slice(t,a)}),ae=()=>{u.value<b.value&&u.value++},oe=()=>{u.value>1&&u.value--},ne=t=>{q.push(`/watch/${t}`)};return(t,a)=>{const c=he;return o(),r("div",Le,[e("header",null,[e("div",Me,[a[2]||(a[2]=e("h1",{class:"logo"},[e("img",{src:ce,alt:"RacingStation Logo",class:"logo-image"}),k(" RacingStation ")],-1)),e("div",Re,[e("button",{onClick:J,class:"icon-button"},[S.value?(o(),C(i(ge),{key:0})):(o(),C(i(pe),{key:1}))]),e("button",{onClick:L,class:"icon-button menu-toggle"},[f.value?(o(),C(i(O),{key:1})):(o(),C(i(_e),{key:0}))]),e("nav",Ae,[e("ul",null,[(o(),r(A,null,D(W,s=>e("li",{key:s},[l(c,{to:E(s),class:"no-active-link"},{default:T(()=>[k(m(s),1)]),_:2},1032,["to"])])),64))])])])])]),l(ue,{name:"slide"},{default:T(()=>[f.value?(o(),r("nav",De,[e("div",Te,[e("button",{onClick:L,class:"icon-button close-menu"},[l(i(O))]),e("ul",null,[(o(),r(A,null,D(W,s=>e("li",{key:s},[l(c,{to:E(s),class:"no-active-link",onClick:L},{default:T(()=>[k(m(s),1)]),_:2},1032,["to"])])),64))])])])):_("",!0)]),_:1}),e("main",null,[l(Se),V.value==="Latest News"?(o(),r("div",Ie,[e("div",Ne,[a[3]||(a[3]=e("h2",{class:"font-sans font-normal"},"Live Sports",-1)),h.value?_("",!0):(o(),r("div",xe,[e("form",{onSubmit:F(y,["prevent"]),class:"search-form"},[I(e("input",{type:"search","onUpdate:modelValue":a[0]||(a[0]=s=>d.value=s),placeholder:"Search live streams...",class:"search-input","aria-label":"Search streams",onKeyup:K(y,["enter"])},null,544),[[Q,d.value]]),e("button",Pe,[l(i(N),{class:"search-icon"})])],32)])),I(e("button",{onClick:te,class:"mobile-search-icon"},[l(i(N),{class:"search-icon"})],512),[[de,h.value]])]),h.value?(o(),r("div",{key:0,class:ve(["search-container mobile-search",{"mobile-search-active":g.value}])},[e("form",{onSubmit:F(y,["prevent"]),class:"search-form"},[I(e("input",{type:"search","onUpdate:modelValue":a[1]||(a[1]=s=>d.value=s),placeholder:"Search live streams...",class:"search-input","aria-label":"Search streams",onKeyup:K(y,["enter"])},null,544),[[Q,d.value]]),e("button",Ve,[l(i(N),{class:"search-icon"})])],32)],2)):_("",!0),e("div",We,[(o(!0),r(A,null,D(se.value,s=>(o(),r("article",{key:s.slug,class:"stream-card",onClick:R=>ne(s.slug)},[e("div",$e,[s.image_path?(o(),r("img",{key:0,src:s.image_path,alt:s.title,class:"stream-image"},null,8,Be)):(o(),r("p",ze,"Image not available"))]),e("div",Ue,[e("span",Fe,m(s.category),1),e("h3",null,m(s.title),1),e("p",null,m(s.excerpt),1),e("div",Qe,[e("span",Ke,[a[4]||(a[4]=k(" Watch stream ")),l(i(be))])])])],8,Ee))),128))]),b.value>1?(o(),r("div",Oe,[e("button",{onClick:oe,disabled:u.value===1,class:"pagination-button"},[l(i(ke))],8,je),e("span",qe,"Page "+m(u.value)+" of "+m(b.value),1),e("button",{onClick:ae,disabled:u.value===b.value,class:"pagination-button"},[l(i(Ce))],8,Ge)])):_("",!0)])):_("",!0)]),l(fe)])}}};export{st as default};
