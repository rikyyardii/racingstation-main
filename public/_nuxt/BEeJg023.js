import{v as c,c as p,a as t,d as f,A as b,z as n,E as v,B as u,k as m,r as d,q as y,o as T}from"./DX2j-DXT.js";import{u as h}from"./BpEgIk2w.js";import{_ as k}from"./DgMYvVGe.js";const A={data(){return{article:{image:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:""}}},setup(){const o=y(),e=d(!1),l=d(!0),a=d("Home");return h({title:"Tambah Data Artikel",ogTitle:"Tambah Data Artikel"}),{isMenuOpen:e,isDarkMode:l,currentView:a,navigateToArtikel:()=>{o.push("/rikya/components/Artikel")},toggleDarkMode:()=>{l.value=!l.value},toggleMenu:()=>{e.value=!e.value},selectView:g=>{a.value=g},router:o}},watch:{"article.content":{handler(o){this.calculateReadingTime(o)},immediate:!0}},methods:{calculateReadingTime(o){const l=o.trim().split(/\s+/).length,a=Math.ceil(l/200);this.article.readingTime=a>0?a:0},async handleImageUpload(o){const{API_URL:e}=m().public,l=o.target.files[0];if(!l)return;if(l.type!=="image/png"){alert("Please upload a PNG file."),o.target.value="";return}if(l.size>3*1024*1024){alert("Ukuran file gambar terlalu besar. compress gambar terlebih dahulu"),o.target.value="";return}const a=new FormData;a.append("image",l);try{const s=await(await fetch(`${e}/upload-image`,{method:"POST",body:a})).json();s.success?this.article.image=s.imagePath:alert(s.message||"Failed to upload image.")}catch(i){console.error("Error uploading image:",i),alert("Error uploading image.")}},async submitArticle(){const{API_URL:o}=m().public;try{const e=await fetch(`${o}/articles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.article.category,title:this.article.title,excerpt:this.article.excerpt,date:this.article.date,author:this.article.author,readingTime:this.article.readingTime,content:this.article.content,imagePath:this.article.image})}),l=await e.json();e.ok?(alert("Article submitted successfully!"),this.router.push("Home"),this.resetForm()):alert("Error submitting article: "+l.error)}catch(e){console.error("Error submitting article:",e),alert("Error submitting article.")}},resetForm(){this.article={image:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:""}}}},x={class:"app-wrapper"},w={class:"header-content"},M={class:"dashboard"},U={class:"form-container"},C={class:"form-group"},P={class:"form-group"},V={class:"form-group"},D={class:"form-group"},E={class:"form-group"},R={class:"form-group"},q={class:"form-group"},S={class:"form-group"},I={class:"buttons-container"};function F(o,e,l,a,i,s){return T(),p("div",x,[t("header",null,[t("header",null,[t("div",w,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...r)=>a.navigateToArtikel&&a.navigateToArtikel(...r)),style:{cursor:"pointer"}},e[11]||(e[11]=[t("img",{src:k,alt:"RacingStation Logo",class:"logo-image"},null,-1),f(" Dashboard ")]))])])]),t("div",M,[e[22]||(e[22]=t("h1",null,"Add Articles",-1)),t("div",U,[t("form",{onSubmit:e[10]||(e[10]=b((...r)=>s.submitArticle&&s.submitArticle(...r),["prevent"]))},[t("div",C,[e[12]||(e[12]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...r)=>s.handleImageUpload&&s.handleImageUpload(...r)),required:""},null,32)]),t("div",P,[e[14]||(e[14]=t("label",{for:"category"},"Category:",-1)),n(t("select",{id:"category","onUpdate:modelValue":e[2]||(e[2]=r=>i.article.category=r),required:""},e[13]||(e[13]=[t("option",{value:"Formula 1"},"Formula 1",-1),t("option",{value:"MotoGP"},"MotoGP",-1),t("option",{value:"WEC"},"WEC",-1),t("option",{value:"WRC"},"WRC",-1)]),512),[[v,i.article.category]])]),t("div",V,[e[15]||(e[15]=t("label",{for:"title"},"Title:",-1)),n(t("input",{type:"text",id:"title","onUpdate:modelValue":e[3]||(e[3]=r=>i.article.title=r),required:""},null,512),[[u,i.article.title]])]),t("div",D,[e[16]||(e[16]=t("label",{for:"title"},"Excerpt",-1)),n(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[4]||(e[4]=r=>i.article.excerpt=r),required:""},null,512),[[u,i.article.excerpt]])]),t("div",E,[e[17]||(e[17]=t("label",{for:"date"},"Date:",-1)),n(t("input",{type:"datetime-local",id:"date","onUpdate:modelValue":e[5]||(e[5]=r=>i.article.date=r),required:""},null,512),[[u,i.article.date]])]),t("div",R,[e[18]||(e[18]=t("label",{for:"author"},"Author:",-1)),n(t("input",{type:"text",id:"author","onUpdate:modelValue":e[6]||(e[6]=r=>i.article.author=r),required:""},null,512),[[u,i.article.author]])]),t("div",q,[e[19]||(e[19]=t("label",{for:"content"},"Content:",-1)),n(t("textarea",{id:"content","onUpdate:modelValue":e[7]||(e[7]=r=>i.article.content=r),required:""},null,512),[[u,i.article.content]])]),t("div",S,[e[20]||(e[20]=t("label",{for:"readingTime"},"Reading Time (min):",-1)),n(t("input",{type:"number",id:"readingTime","onUpdate:modelValue":e[8]||(e[8]=r=>i.article.readingTime=r),required:"",disabled:""},null,512),[[u,i.article.readingTime]])]),t("div",I,[e[21]||(e[21]=t("button",{type:"submit",class:"action-btn update-btn"},"Submit Article",-1)),t("button",{type:"button",onClick:e[9]||(e[9]=(...r)=>a.navigateToArtikel&&a.navigateToArtikel(...r)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const W=c(A,[["render",F],["__scopeId","data-v-23c82212"]]);export{W as default};
