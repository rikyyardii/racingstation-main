import{s as J,r,G as Q,k as X,m as C,l as u,x as P,c as d,a as e,_ as Z,b as T,d as b,u as p,F as A,e as D,f as M,w as q,T as K,z as Y,A as ee,t as l,o as n,y as E,n as I,g as te}from"./B683Eh06.js";import{S as se,M as oe,a as ae,X as N,F as ne}from"./D73_bQhw.js";import{u as le}from"./kDA8QHO3.js";import{D as re}from"./DcQSltNB.js";import{a as V}from"./CCb-kr4I.js";const ie={class:"app admin"},ce={class:"header-content"},ue={class:"header-controls"},de={class:"desktop-nav"},ve=["onClick"],he={key:0,class:"mobile-nav"},_e={class:"mobile-nav-content"},pe=["onClick"],ge={class:"container"},ke={class:"table-controls"},me={class:"right-controls"},fe={class:"search-box"},be={class:"table-container"},ye={class:"data-table"},we={class:"action-buttons"},Ce=["onClick"],Ae=["onClick"],De={class:"table-footer"},Me={class:"entries-info"},xe={class:"pagination"},Se=["disabled"],Le={class:"page-number"},$e=["disabled"],Pe={__name:"Artikel",setup(Te){le({title:"Data Artikel",ogTitle:"Data Artikel"});const g=r(!1),k=r(!0),y=r("Artikel"),x=["Home","Logout"],i=Q(),m=r(""),a=r(1),c=r(7),f=r([]),{API_URL:v}=X().public,F=()=>{k.value=!k.value,document.body.classList.toggle("light-mode",!k.value)},w=()=>{window.innerWidth<=768&&(g.value=!g.value)},S=async t=>{if(window.innerWidth<=768&&w(),t==="Logout")try{(await(await fetch(`${v}/logout`,{method:"POST",credentials:"include"})).json()).success&&i.push("/rikya")}catch(o){console.error("Logout error:",o)}else t==="Home"?i.push("/rikya/components/Home"):y.value=t};C(async()=>{try{(await(await fetch(`${v}/check-session`,{credentials:"include"})).json()).isLoggedIn||i.push("/rikya")}catch(t){console.error("Session check error:",t)}}),C(async()=>{try{(await(await fetch(`${v}/check-session`,{credentials:"include"})).json()).isLoggedIn||i.push("/rikya")}catch(t){console.error("Session check error:",t)}}),C(async()=>{try{const t=await V.get(`${v}/articles_card`);f.value=t.data.sort((o,s)=>new Date(s.date)-new Date(o.date))}catch(t){console.error("Error fetching articles:",t)}});const L=u(()=>f.value.filter(t=>{const o=m.value.toLowerCase();return Object.values(t).some(s=>s.toString().toLowerCase().includes(o))})),h=u(()=>L.value.length),$=u(()=>Math.ceil(h.value/c.value)),H=u(()=>{const t=(a.value-1)*c.value,o=t+c.value;return L.value.slice(t,o)}),j=u(()=>h.value===0?0:(a.value-1)*c.value+1),B=u(()=>{const t=a.value*c.value;return t>h.value?h.value:t}),O=()=>{i.push("add_artikel")},R=t=>{i.push(`/rikya/edit_artikel/${t.slug}`)},z=async t=>{if(confirm("Are you sure you want to delete this article?"))try{const s=await V.delete(`${v}/articles/${t.id}`);alert(s.data.message),f.value=f.value.filter(_=>_.id!==t.id)}catch(s){console.error("Error deleting article:",s),alert("Gagal menghapus artikel.")}},G=t=>re.fromISO(t).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd HH:mm:ss"),U=()=>{a.value>1&&a.value--},W=()=>{a.value<$.value&&a.value++};return P(m,()=>{a.value=1}),P(c,()=>{a.value=1}),(t,o)=>(n(),d("div",ie,[e("header",null,[e("div",ce,[o[1]||(o[1]=e("h1",{class:"logo"},[e("img",{src:Z,alt:"RacingStation Logo",class:"logo-image"}),T(" Dashboard ")],-1)),e("div",ue,[e("button",{onClick:F,class:"icon-button"},[k.value?(n(),b(p(se),{key:0})):(n(),b(p(oe),{key:1}))]),e("button",{onClick:w,class:"icon-button menu-toggle"},[g.value?(n(),b(p(N),{key:1})):(n(),b(p(ae),{key:0}))]),e("nav",de,[e("ul",null,[(n(),d(A,null,D(x,s=>e("li",{key:s},[e("a",{href:"#",onClick:E(_=>S(s),["prevent"]),class:I({active:y.value===s})},l(s),11,ve)])),64))])])])])]),M(K,{name:"slide"},{default:q(()=>[g.value?(n(),d("nav",he,[e("div",_e,[e("button",{onClick:w,class:"icon-button close-menu"},[M(p(N))]),e("ul",null,[(n(),d(A,null,D(x,s=>e("li",{key:s},[e("a",{href:"#",onClick:E(_=>S(s),["prevent"]),class:I({active:y.value===s})},l(s),11,pe)])),64))])])])):te("",!0)]),_:1}),e("div",ge,[o[5]||(o[5]=e("h2",{class:"black-text"},"Article Management",-1)),e("div",ke,[e("div",{class:"left-controls"},[e("button",{onClick:O,class:"new-btn"},o[2]||(o[2]=[e("span",{class:"plus-icon"},"+",-1),T(" New")]))]),e("div",me,[e("div",fe,[o[3]||(o[3]=e("label",null,"Search:",-1)),Y(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>m.value=s),class:"search-input"},null,512),[[ee,m.value]])])])]),e("div",be,[e("table",ye,[o[4]||(o[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Title"),e("th",null,"Date"),e("th",null,"Action")])],-1)),e("tbody",null,[(n(!0),d(A,null,D(H.value,s=>(n(),d("tr",{key:s.id},[e("td",null,l(s.id),1),e("td",null,l(s.title),1),e("td",null,l(G(s.date)),1),e("td",we,[e("button",{onClick:_=>R(s),class:"edit-btn"},"Edit",8,Ce),e("button",{onClick:_=>z(s),class:"delete-btn"},"Delete",8,Ae)])]))),128))])])]),e("div",De,[e("div",Me,"Showing "+l(j.value)+" to "+l(B.value)+" of "+l(h.value)+" entries",1),e("div",xe,[e("button",{onClick:U,disabled:a.value===1,class:"pagination-btn"},"Previous",8,Se),e("span",Le,l(a.value),1),e("button",{onClick:W,disabled:a.value===$.value,class:"pagination-btn"},"Next",8,$e)])])]),M(ne)]))}},He=J(Pe,[["__scopeId","data-v-f2861863"]]);export{He as default};
