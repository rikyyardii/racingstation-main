import{s as f,r as v,u as b,o as y,a as u,b as t,d as x,v as k,x as n,y as s,k as T,p as A,l as m}from"./CJHGBovj.js";import{_ as U}from"./zr15TO3y.js";const V={setup(){const o=v({id:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:"",image:null}),e=T(),p=A(),{API_URL:r,IMAGE_URL:c}=b().public,g=async l=>{try{const a=await(await fetch(`${r}/articles/${l}`)).json();o.value={id:a.id,category:a.category,title:a.title,excerpt:a.excerpt||generateExcerpt(a.content),date:a.date?a.date.substring(0,10):"",author:a.author,readingTime:a.reading_time,content:a.content,image:a.image_path?`${c}${a.image_path}`:null}}catch(d){console.error("Error fetching article:",d)}},i=async()=>{if(!o.value.id){alert("ID artikel tidak valid.");return}try{const l=await fetch(`${r}/articles/${o.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:o.value.category,title:o.value.title,excerpt:o.value.excerpt,date:o.value.date,author:o.value.author,readingTime:o.value.readingTime,content:o.value.content})}),d=await l.json();l.ok?(alert("Artikel berhasil diperbarui!"),p.push("../components/Home")):alert("Gagal memperbarui artikel: "+d.error)}catch(l){console.error("Error updating article:",l),alert("Terjadi kesalahan saat memperbarui artikel.")}};return y(()=>{const l=e.params.id;l?(g(l),o.value.id=l):console.error("ID artikel tidak ditemukan pada route.")}),{article:o,submitArticle:i}}},I={class:"app-wrapper"},q={class:"header-content"},w={class:"dashboard"},C={class:"form-container"},E={class:"form-group"},R={key:0},D=["src"],_={key:1},h={class:"form-group"},j={class:"form-group"},M={class:"form-group"},N={class:"form-group"},B={class:"form-group"},L={class:"form-group"},S={class:"form-group"};function G(o,e,p,r,c,g){return m(),u("div",I,[t("header",null,[t("div",q,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...i)=>o.navigateToArtikel&&o.navigateToArtikel(...i)),style:{cursor:"pointer"}},e[9]||(e[9]=[t("img",{src:U,alt:"RacingStation Logo",class:"logo-image"},null,-1),x(" Dashboard ")]))])]),t("div",w,[e[20]||(e[20]=t("h1",null,"Edit Articles",-1)),t("div",C,[t("form",{onSubmit:e[8]||(e[8]=k((...i)=>r.submitArticle&&r.submitArticle(...i),["prevent"]))},[t("div",E,[e[11]||(e[11]=t("label",null,"Current Image:",-1)),r.article.image?(m(),u("div",R,[t("img",{src:r.article.image,alt:"Current Article Image",class:"current-image"},null,8,D)])):(m(),u("div",_,e[10]||(e[10]=[t("span",null,"No image available",-1)])))]),t("div",h,[e[12]||(e[12]=t("label",{for:"category"},"Category:",-1)),n(t("input",{type:"text",id:"category","onUpdate:modelValue":e[1]||(e[1]=i=>r.article.category=i),required:""},null,512),[[s,r.article.category]])]),t("div",j,[e[13]||(e[13]=t("label",{for:"title"},"Title:",-1)),n(t("input",{type:"text",id:"title","onUpdate:modelValue":e[2]||(e[2]=i=>r.article.title=i),required:""},null,512),[[s,r.article.title]])]),t("div",M,[e[14]||(e[14]=t("label",{for:"excerpt"},"Excerpt:",-1)),n(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[3]||(e[3]=i=>r.article.excerpt=i),required:""},null,512),[[s,r.article.excerpt]])]),t("div",N,[e[15]||(e[15]=t("label",{for:"date"},"Date:",-1)),n(t("input",{type:"date",id:"date","onUpdate:modelValue":e[4]||(e[4]=i=>r.article.date=i),required:""},null,512),[[s,r.article.date]])]),t("div",B,[e[16]||(e[16]=t("label",{for:"author"},"Author:",-1)),n(t("input",{type:"text",id:"author","onUpdate:modelValue":e[5]||(e[5]=i=>r.article.author=i),required:""},null,512),[[s,r.article.author]])]),t("div",L,[e[17]||(e[17]=t("label",{for:"readingTime"},"Reading Time (min):",-1)),n(t("input",{type:"number",id:"readingTime","onUpdate:modelValue":e[6]||(e[6]=i=>r.article.readingTime=i),required:""},null,512),[[s,r.article.readingTime]])]),t("div",S,[e[18]||(e[18]=t("label",{for:"content"},"Content:",-1)),n(t("textarea",{id:"content","onUpdate:modelValue":e[7]||(e[7]=i=>r.article.content=i),required:""},null,512),[[s,r.article.content]])]),e[19]||(e[19]=t("button",{type:"submit"},"Update Article",-1))],32)])])])}const J=f(V,[["render",G],["__scopeId","data-v-6bab4251"]]);export{J as default};
