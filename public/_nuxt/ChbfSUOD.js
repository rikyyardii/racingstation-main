import{_ as q}from"./Bu8F17fR.js";import{r as n,u as G,p as R,n as f,c as l,a as t,d as g,q as p,s as u,F as b,v as w,b as c,w as y,T as J,t as d,x as P,A as X,o as a}from"./CbLDumkK.js";import{_ as z}from"./BI0tDeHe.js";import{S as H,M as K,a as Q,X as T,F as Y}from"./BFv-caX_.js";import{A as Z}from"./CUUP7xKb.js";import{s as tt}from"./Rl4rGLDE.js";import{A as et,C as st,a as at}from"./BeASyhU4.js";const ot={class:"app"},nt={class:"header-content"},lt={class:"header-controls"},ct={class:"desktop-nav"},rt={key:0,class:"mobile-nav"},it={class:"mobile-nav-content"},ut={key:0,class:"articles-section"},dt={class:"stream-grid"},_t=["onClick"],mt={class:"stream-image-container"},vt=["src","alt"],gt={key:1},pt={class:"stream-content"},ht={class:"stream-footer"},kt={class:"read-more"},ft={class:"pagination"},bt=["disabled"],wt={class:"pagination-info"},yt=["disabled"],S=6,Tt={__name:"stream",setup(St){const D=n(""),I=X(),B=n(""),C=()=>{const e=new Date;D.value=e.toLocaleTimeString()},F=n(null),_=n(!1),m=n(!0),L=n("Latest News");n(!1),n(""),n("");const A=["Latest News","Watch Sports"],N=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},h=()=>{_.value=!_.value},V=()=>{m.value=!m.value,document.body.classList.toggle("light-mode",!m.value)},v=n([]),{API_URL:$,IMAGE_URL:E}=G().public,M=async()=>{try{const e=await fetch(`${$}/streams_card`);if(!e.ok)throw new Error("Network response was not ok");const o=await e.json();v.value=o.map(i=>(v.value.length===0&&(B.value=i.title),{...i,image_path:`${E}${i.image_path}`})),console.log("Fetched streams:",v.value)}catch(e){console.error("Error fetching streams:",e)}};R(()=>{M()}),R(()=>{M(),C(),tt(C,1e3);const e=localStorage.getItem("selectedArticle");e&&(F.value=JSON.parse(e),L.value="Detailed Article")});const x=f(()=>v.value.slice().sort((e,o)=>{const i=new Date(e.created_at),s=new Date(o.created_at);return i-s})),r=n(1),k=f(()=>Math.ceil(x.value.length/S)),O=f(()=>{const e=(r.value-1)*S,o=e+S;return x.value.slice(e,o)}),U=()=>{r.value<k.value&&r.value++},W=()=>{r.value>1&&r.value--},j=e=>{I.push(`/watch/${e}`)};return(e,o)=>{const i=q;return a(),l("div",ot,[t("header",null,[t("div",nt,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:z,alt:"RacingStation Logo",class:"logo-image"}),g(" RacingStation ")],-1)),t("div",lt,[t("button",{onClick:V,class:"icon-button"},[m.value?(a(),p(u(H),{key:0})):(a(),p(u(K),{key:1}))]),t("button",{onClick:h,class:"icon-button menu-toggle"},[_.value?(a(),p(u(T),{key:1})):(a(),p(u(Q),{key:0}))]),t("nav",ct,[t("ul",null,[(a(),l(b,null,w(A,s=>t("li",{key:s},[c(i,{to:N(s),class:"no-active-link"},{default:y(()=>[g(d(s),1)]),_:2},1032,["to"])])),64))])])])])]),c(J,{name:"slide"},{default:y(()=>[_.value?(a(),l("nav",rt,[t("div",it,[t("button",{onClick:h,class:"icon-button close-menu"},[c(u(T))]),t("ul",null,[(a(),l(b,null,w(A,s=>t("li",{key:s},[c(i,{to:N(s),class:"no-active-link",onClick:h},{default:y(()=>[g(d(s),1)]),_:2},1032,["to"])])),64))])])])):P("",!0)]),_:1}),t("main",null,[c(Z),L.value==="Latest News"?(a(),l("div",ut,[o[2]||(o[2]=t("h2",null,"Live Sports",-1)),t("div",dt,[(a(!0),l(b,null,w(O.value,s=>(a(),l("article",{key:s.slug,class:"stream-card",onClick:Ct=>j(s.slug)},[t("div",mt,[s.image_path?(a(),l("img",{key:0,src:s.image_path,alt:s.title,class:"stream-image"},null,8,vt)):(a(),l("p",gt,"Image not available"))]),t("div",pt,[t("h3",null,d(s.title),1),t("p",null,d(s.excerpt),1),t("div",ht,[t("span",kt,[o[1]||(o[1]=g(" Read more ")),c(u(et))])])])],8,_t))),128))]),t("div",ft,[t("button",{onClick:W,disabled:r.value===1,class:"pagination-button"},[c(u(st))],8,bt),t("span",wt,"Page "+d(r.value)+" of "+d(k.value),1),t("button",{onClick:U,disabled:r.value===k.value,class:"pagination-button"},[c(u(at))],8,yt)])])):P("",!0)]),c(Y)])}}};export{Tt as default};
