import{_ as d,u,c as p,a as t,d as g,B as f,C as a,D as m,m as c,o as v}from"./tnlaVvIM.js";import{_ as b}from"./dAi-ItuL.js";const x={data(){return{stream:{image:null,title:"",event:"",excerpt:"",link:"",content:""}}},setup(){const i=c();return{navigateToArtikel:()=>{i.push("/Artikel")},router:i}},methods:{async handleImageUpload(i){const{API_URL:e}=u().public,l=i.target.files[0];if(l&&l.type==="image/png"){const o=new FormData;o.append("image",l);try{const n=await(await fetch(`${e}/upload-image`,{method:"POST",body:o})).json();n.success?this.stream.image=n.imagePath:alert("Failed to upload image.")}catch(s){console.error("Error uploading image:",s),alert("Error uploading image.")}}else alert("Please upload a PNG file."),i.target.value=""},async submitStream(){const{API_URL:i}=u().public;try{const e={title:this.stream.title,event:this.stream.event,excerpt:this.stream.excerpt,link:this.stream.link,content:this.stream.content,imagePath:this.stream.image},l=await fetch(`${i}/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await l.json();console.log("Response status:",l.status),console.log("Result:",o),l.ok?(alert("Stream submitted successfully!"),this.router.push("Home"),this.resetForm()):(console.error("Error submitting stream:",o.error||o.message),alert("Error submitting stream: "+(o.error||o.message)))}catch(e){console.error("Error submitting stream:",e),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",excerpt:"",link:"",content:""}}}},k={class:"app-wrapper"},y={class:"header-content"},h={class:"dashboard"},S={class:"form-container"},U={class:"form-group"},T={class:"form-group"},E={class:"form-group"},P={class:"form-group"},w={class:"form-group"},A={class:"form-group"};function I(i,e,l,o,s,n){return v(),p("div",k,[t("header",null,[t("header",null,[t("div",y,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...r)=>o.navigateToArtikel&&o.navigateToArtikel(...r)),style:{cursor:"pointer"}},e[8]||(e[8]=[t("img",{src:b,alt:"RacingStation Logo",class:"logo-image"},null,-1),g(" Dashboard ")]))])])]),t("div",h,[e[16]||(e[16]=t("h1",{class:"black-text"},"Manage Livestream",-1)),t("div",S,[t("form",{onSubmit:e[7]||(e[7]=f((...r)=>n.submitStream&&n.submitStream(...r),["prevent"]))},[t("div",U,[e[9]||(e[9]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...r)=>n.handleImageUpload&&n.handleImageUpload(...r)),required:""},null,32)]),t("div",T,[e[10]||(e[10]=t("label",{for:"title"},"Title",-1)),a(t("input",{type:"text",id:"title","onUpdate:modelValue":e[2]||(e[2]=r=>s.stream.title=r),required:""},null,512),[[m,s.stream.title]])]),t("div",E,[e[11]||(e[11]=t("label",{for:"title"},"Live Event",-1)),a(t("input",{type:"text",id:"event","onUpdate:modelValue":e[3]||(e[3]=r=>s.stream.event=r),required:""},null,512),[[m,s.stream.event]])]),t("div",P,[e[12]||(e[12]=t("label",{for:"excerpt"},"Excerpt",-1)),a(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[4]||(e[4]=r=>s.stream.excerpt=r),required:""},null,512),[[m,s.stream.excerpt]])]),t("div",w,[e[13]||(e[13]=t("label",{for:"link"},"Link",-1)),a(t("input",{type:"text",id:"link","onUpdate:modelValue":e[5]||(e[5]=r=>s.stream.link=r),required:""},null,512),[[m,s.stream.link]])]),t("div",A,[e[14]||(e[14]=t("label",{for:"content"},"Content",-1)),a(t("textarea",{id:"content","onUpdate:modelValue":e[6]||(e[6]=r=>s.stream.content=r),required:""},null,512),[[m,s.stream.content]])]),e[15]||(e[15]=t("button",{type:"submit"},"Submit Stream",-1))],32)])])])}const q=d(x,[["render",I],["__scopeId","data-v-76d541ea"]]);export{q as default};
