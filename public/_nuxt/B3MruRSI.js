import{v as te,r as i,G as oe,k as se,p as ne,x as ae,l as h,y as R,c as v,a as e,b as d,d as f,_ as le,e as w,u as l,F as M,f as D,w as re,T as ie,h as B,n as P,z as ce,B as de,t as u,o as a,A as F}from"./Birlwjyq.js";import{S as ue,M as ve,a as pe,X as I,F as ge}from"./Cc2j5KgR.js";import{u as he}from"./CQu4EZGb.js";import{a as O}from"./xsH4HHeE.js";import{C as fe}from"./s5jgGApx.js";import{P as me,S as $}from"./BZj5mIM8.js";const _e={class:"app admin"},ke={class:"header-content"},Ce={class:"header-controls"},be={class:"desktop-nav"},we=["onClick"],ye={key:0,class:"mobile-nav"},Le={class:"mobile-nav-content"},Se=["onClick"],xe={class:"container"},Me={class:"table-controls"},De={class:"left-controls"},Pe={key:0,class:"dropdown-menu"},$e={class:"search-box"},Ee={class:"table-container"},Ne={class:"data-table"},Te={class:"action-buttons"},Ve=["onClick"],Ae=["onClick"],Re={class:"table-footer"},Be={class:"entries-info"},Fe={class:"pagination"},Ie=["disabled"],Oe={class:"page-number"},Ue=["disabled"],He={__name:"Categories",setup(je){he({title:"Data Categories",ogTitle:"Data Categories"});const _=i(!1),k=i(!0),y=i("Artikel"),E=["Home","Logout"],c=oe(),C=i(""),n=i(1),p=i(7),g=i([]),r=i(!1),L=i(null),{API_URL:b}=se().public,U=()=>{k.value=!k.value,document.body.classList.toggle("light-mode",!k.value)},S=()=>{window.innerWidth<=768&&(_.value=!_.value)},H=()=>{r.value=!r.value},N=t=>{L.value&&!L.value.contains(t.target)&&(r.value=!1)},T=async t=>{if(window.innerWidth<=768&&S(),t==="Logout")try{(await(await fetch(`${b}/logout`,{method:"POST",credentials:"include"})).json()).success&&c.push("/rikya")}catch(o){console.error("Logout error:",o)}else t==="Home"?c.push("/rikya/components/Home"):y.value=t},j=async()=>{try{const t=await O.get(`${b}/event-categories`);g.value=t.data,console.log("Categories loaded:",t.data)}catch(t){console.error("Error fetching categories:",t)}};ne(async()=>{try{if(!(await(await fetch(`${b}/check-session`,{credentials:"include"})).json()).isLoggedIn){c.push("/rikya");return}}catch(t){console.error("Session check error:",t)}await j(),document.addEventListener("click",N)}),ae(()=>{document.removeEventListener("click",N)});const V=h(()=>!g.value||g.value.length===0?[]:g.value.filter(t=>{const o=C.value.toLowerCase();return t.name&&t.name.toLowerCase().includes(o)||t.description&&t.description.toLowerCase().includes(o)})),m=h(()=>V.value.length),A=h(()=>Math.ceil(m.value/p.value)),z=h(()=>{const t=(n.value-1)*p.value,o=t+p.value;return V.value.slice(t,o)}),W=h(()=>m.value===0?0:(n.value-1)*p.value+1),G=h(()=>{const t=n.value*p.value;return t>m.value?m.value:t}),Q=()=>{r.value=!1,c.push("add_categories")},X=()=>{r.value=!1,c.push("LiveStream")},q=()=>{r.value=!1,c.push("Categories")},J=()=>{r.value=!1,c.push("Session")},K=t=>{c.push(`/rikya/edit_categories/${t.id}`)},Y=async t=>{if(confirm("Are you sure you want to delete this category?"))try{await O.delete(`${b}/event-categories/${t.id}`),g.value=g.value.filter(s=>s.id!==t.id),alert("Category deleted successfully")}catch(s){console.error("Error deleting category:",s),alert("Failed to delete category")}},Z=()=>{n.value>1&&n.value--},ee=()=>{n.value<A.value&&n.value++};return R(C,()=>{n.value=1}),R(p,()=>{n.value=1}),(t,o)=>(a(),v("div",_e,[e("header",null,[e("div",ke,[o[1]||(o[1]=e("h1",{class:"logo"},[e("img",{src:le,alt:"RacingStation Logo",class:"logo-image"}),f(" Dashboard ")],-1)),e("div",Ce,[e("button",{onClick:U,class:"icon-button"},[k.value?(a(),w(l(ue),{key:0})):(a(),w(l(ve),{key:1}))]),e("button",{onClick:S,class:"icon-button menu-toggle"},[_.value?(a(),w(l(I),{key:1})):(a(),w(l(pe),{key:0}))]),e("nav",be,[e("ul",null,[(a(),v(M,null,D(E,s=>e("li",{key:s},[e("a",{href:"#",onClick:F(x=>T(s),["prevent"]),class:P({active:y.value===s})},u(s),11,we)])),64))])])])])]),d(ie,{name:"slide"},{default:re(()=>[_.value?(a(),v("nav",ye,[e("div",Le,[e("button",{onClick:S,class:"icon-button close-menu"},[d(l(I))]),e("ul",null,[(a(),v(M,null,D(E,s=>e("li",{key:s},[e("a",{href:"#",onClick:F(x=>T(s),["prevent"]),class:P({active:y.value===s})},u(s),11,Se)])),64))])])])):B("",!0)]),_:1}),e("div",xe,[o[9]||(o[9]=e("h2",{class:"black-text"},"Categories Management",-1)),e("div",Me,[e("div",De,[e("div",{class:"dropdown",ref_key:"dropdownRef",ref:L},[e("button",{onClick:H,class:"new-btn dropdown-toggle"},[o[2]||(o[2]=f(" Setup ")),d(l(fe),{class:P(["dropdown-icon",{"rotate-180":r.value}])},null,8,["class"])]),r.value?(a(),v("div",Pe,[e("button",{onClick:Q,class:"dropdown-item"},[d(l(me),{class:"dropdown-item-icon"}),o[3]||(o[3]=f(" New Categories "))]),e("button",{onClick:X,class:"dropdown-item"},[d(l($),{class:"dropdown-item-icon"}),o[4]||(o[4]=f(" Livestream "))]),e("button",{onClick:q,class:"dropdown-item"},[d(l($),{class:"dropdown-item-icon"}),o[5]||(o[5]=f(" Categories "))]),e("button",{onClick:J,class:"dropdown-item"},[d(l($),{class:"dropdown-item-icon"}),o[6]||(o[6]=f(" Session "))])])):B("",!0)],512)]),e("div",$e,[o[7]||(o[7]=e("label",null,"Search:",-1)),ce(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>C.value=s),class:"search-input"},null,512),[[de,C.value]])])]),e("div",Ee,[e("table",Ne,[o[8]||(o[8]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Description"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),v(M,null,D(z.value,s=>(a(),v("tr",{key:s.id},[e("td",null,u(s.description),1),e("td",null,u(s.event_type_description||"N/A"),1),e("td",Te,[e("button",{onClick:x=>K(s),class:"edit-btn"},"Edit",8,Ve),e("button",{onClick:x=>Y(s),class:"delete-btn"},"Delete",8,Ae)])]))),128))])])]),e("div",Re,[e("div",Be,"Showing "+u(W.value)+" to "+u(G.value)+" of "+u(m.value)+" entries",1),e("div",Fe,[e("button",{onClick:Z,disabled:n.value===1,class:"pagination-btn"},"Previous",8,Ie),e("span",Oe,u(n.value),1),e("button",{onClick:ee,disabled:n.value===A.value,class:"pagination-btn"},"Next",8,Ue)])])]),d(ge)]))}},Je=te(He,[["__scopeId","data-v-64d298f5"]]);export{Je as default};
