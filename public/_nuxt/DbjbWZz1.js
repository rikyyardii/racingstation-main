import{s as d,u,a as p,b as t,d as g,v as k,x as n,y as a,p as f,l as v}from"./_QJn3mRB.js";import{_ as b}from"./XsEz7RAv.js";const x={data(){return{stream:{image:null,title:"",event:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:""}}},setup(){const o=f();return{navigateToArtikel:()=>{o.push("/Artikel")},router:o}},methods:{async handleImageUpload(o){const{API_URL:e}=u().public,l=o.target.files[0];if(l&&l.type==="image/png"){const i=new FormData;i.append("image",l);try{const m=await(await fetch(`${e}/upload-image`,{method:"POST",body:i})).json();m.success?this.stream.image=m.imagePath:alert("Failed to upload image.")}catch(r){console.error("Error uploading image:",r),alert("Error uploading image.")}}else alert("Please upload a PNG file."),o.target.value=""},async submitStream(){const{API_URL:o}=u().public;try{const e={title:this.stream.title,event:this.stream.event,excerpt:this.stream.excerpt,link:this.stream.link,link2:this.stream.link2,link3:this.stream.link3,link4:this.stream.link4,content:this.stream.content,imagePath:this.stream.image},l=await fetch(`${o}/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await l.json();console.log("Response status:",l.status),console.log("Result:",i),l.ok?(alert("Stream submitted successfully!"),this.router.push("Home"),this.resetForm()):(console.error("Error submitting stream:",i.error||i.message),alert("Error submitting stream: "+(i.error||i.message)))}catch(e){console.error("Error submitting stream:",e),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:""}}}},y={class:"app-wrapper"},U={class:"header-content"},c={class:"dashboard"},S={class:"form-container"},T={class:"form-group"},V={class:"form-group"},E={class:"form-group"},L={class:"form-group"},P={class:"form-group"},w={class:"form-group"},A={class:"form-group"},I={class:"form-group"},R={class:"form-group"};function h(o,e,l,i,r,m){return v(),p("div",y,[t("header",null,[t("header",null,[t("div",U,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...s)=>i.navigateToArtikel&&i.navigateToArtikel(...s)),style:{cursor:"pointer"}},e[11]||(e[11]=[t("img",{src:b,alt:"RacingStation Logo",class:"logo-image"},null,-1),g(" Dashboard ")]))])])]),t("div",c,[e[22]||(e[22]=t("h1",{class:"black-text"},"Manage Livestream",-1)),t("div",S,[t("form",{onSubmit:e[10]||(e[10]=k((...s)=>m.submitStream&&m.submitStream(...s),["prevent"]))},[t("div",T,[e[12]||(e[12]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...s)=>m.handleImageUpload&&m.handleImageUpload(...s)),required:""},null,32)]),t("div",V,[e[13]||(e[13]=t("label",{for:"title"},"Title",-1)),n(t("input",{type:"text",id:"title","onUpdate:modelValue":e[2]||(e[2]=s=>r.stream.title=s),required:""},null,512),[[a,r.stream.title]])]),t("div",E,[e[14]||(e[14]=t("label",{for:"title"},"Live Event",-1)),n(t("input",{type:"text",id:"event","onUpdate:modelValue":e[3]||(e[3]=s=>r.stream.event=s),required:""},null,512),[[a,r.stream.event]])]),t("div",L,[e[15]||(e[15]=t("label",{for:"excerpt"},"Excerpt",-1)),n(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[4]||(e[4]=s=>r.stream.excerpt=s),required:""},null,512),[[a,r.stream.excerpt]])]),t("div",P,[e[16]||(e[16]=t("label",{for:"link"},"Link 1",-1)),n(t("input",{type:"text",id:"link","onUpdate:modelValue":e[5]||(e[5]=s=>r.stream.link=s),required:""},null,512),[[a,r.stream.link]])]),t("div",w,[e[17]||(e[17]=t("label",{for:"link"},"Link 2",-1)),n(t("input",{type:"text",id:"link","onUpdate:modelValue":e[6]||(e[6]=s=>r.stream.link2=s)},null,512),[[a,r.stream.link2]])]),t("div",A,[e[18]||(e[18]=t("label",{for:"link"},"Link 3",-1)),n(t("input",{type:"text",id:"link","onUpdate:modelValue":e[7]||(e[7]=s=>r.stream.link3=s)},null,512),[[a,r.stream.link3]])]),t("div",I,[e[19]||(e[19]=t("label",{for:"link"},"Link 4",-1)),n(t("input",{type:"text",id:"link","onUpdate:modelValue":e[8]||(e[8]=s=>r.stream.link4=s)},null,512),[[a,r.stream.link4]])]),t("div",R,[e[20]||(e[20]=t("label",{for:"content"},"Content",-1)),n(t("textarea",{id:"content","onUpdate:modelValue":e[9]||(e[9]=s=>r.stream.content=s),required:""},null,512),[[a,r.stream.content]])]),e[21]||(e[21]=t("button",{type:"submit"},"Submit Stream",-1))],32)])])])}const N=d(x,[["render",h],["__scopeId","data-v-3ed6dcfb"]]);export{N as default};
