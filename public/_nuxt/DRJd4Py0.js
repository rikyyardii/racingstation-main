import{x as A,c as g,a as e,d as x,A as C,z as s,E as M,B as d,r as I,k as D,s as E,p as U,m as w,q as R,o as v}from"./qef8jy5G.js";import{D as u}from"./DOXiyJsP.js";import{u as S}from"./ClTsQMSU.js";import{_ as q}from"./BDSkMRdS.js";const V={setup(){const i=I({id:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:"",image:null}),t=w(),m=R(),r=a=>u.fromISO(a).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd"),f=a=>a?u.fromISO(a).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm"):"",{API_URL:c,IMAGE_URL:o}=D().public,y=async a=>{try{const l=await(await fetch(`${c}/articles/${a}`)).json(),p=u.fromISO(l.date,{zone:"UTC"}).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm");i.value={...i.value,id:l.id,category:l.category,title:l.title,excerpt:l.excerpt||generateExcerpt(l.content),date:p,author:l.author,readingTime:l.reading_time,content:l.content,image:l.image_path?`${o}${l.image_path}`:null}}catch(n){console.error("Error fetching article:",n)}},b=a=>{const l=a.trim();if(!l){i.value.readingTime=0;return}const p=l.split(/\s+/).length;i.value.readingTime=Math.ceil(p/200)},k=()=>{m.push("/rikya/components/Artikel")};E(()=>i.value.content,a=>{b(a)},{immediate:!0});const T=async()=>{if(!i.value.id){alert("ID artikel tidak valid.");return}try{const a=u.fromISO(i.value.date,{zone:"Asia/Jakarta"}).toUTC().toISO(),n=await fetch(`${c}/articles/${i.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:i.value.category,title:i.value.title,excerpt:i.value.excerpt,date:a,author:i.value.author,readingTime:i.value.readingTime,content:i.value.content})}),l=await n.json();n.ok?(alert("Artikel berhasil diperbarui!"),m.push("../components/Artikel")):alert("Gagal memperbarui artikel: "+l.error)}catch(a){console.error("Error updating article:",a),alert("Terjadi kesalahan saat memperbarui artikel.")}};return S({title:"Edit Artikel",ogTitle:"Edit Artikel"}),U(()=>{const a=t.params.id;a?(y(a),i.value.id=a):console.error("ID artikel tidak ditemukan pada route.")}),{article:i,submitArticle:T,formatDate:r,formatDateForInput:f,navigateToArtikel:k}}},_={class:"app-wrapper"},h={class:"header-content"},F={class:"dashboard"},O={class:"form-container"},P={class:"form-group"},J={key:0},j=["src"],B={key:1},G={class:"form-group"},H={class:"form-group"},N={class:"form-group"},W={class:"form-group"},z=["value"],L={class:"form-group"},Z={class:"form-group"},K={class:"form-group"},Q={class:"buttons-container"};function X(i,t,m,r,f,c){return v(),g("div",_,[e("header",null,[e("div",h,[e("h1",{class:"logo",onClick:t[0]||(t[0]=(...o)=>r.navigateToArtikel&&r.navigateToArtikel(...o)),style:{cursor:"pointer"}},t[10]||(t[10]=[e("img",{src:q,alt:"RacingStation Logo",class:"logo-image"},null,-1),x(" Dashboard ")]))])]),e("div",F,[t[22]||(t[22]=e("h1",null,"Edit Articles",-1)),e("div",O,[e("form",{onSubmit:t[9]||(t[9]=C((...o)=>r.submitArticle&&r.submitArticle(...o),["prevent"]))},[e("div",P,[t[12]||(t[12]=e("label",null,"Current Image:",-1)),r.article.image?(v(),g("div",J,[e("img",{src:r.article.image,alt:"Current Article Image",class:"current-image"},null,8,j)])):(v(),g("div",B,t[11]||(t[11]=[e("span",null,"No image available",-1)])))]),e("div",G,[t[14]||(t[14]=e("label",{for:"category"},"Category:",-1)),s(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=o=>r.article.category=o),required:""},t[13]||(t[13]=[e("option",{value:"Formula 1"},"Formula 1",-1),e("option",{value:"MotoGP"},"MotoGP",-1),e("option",{value:"WEC"},"WEC",-1),e("option",{value:"WRC"},"WRC",-1)]),512),[[M,r.article.category]])]),e("div",H,[t[15]||(t[15]=e("label",{for:"title"},"Title:",-1)),s(e("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=o=>r.article.title=o),required:""},null,512),[[d,r.article.title]])]),e("div",N,[t[16]||(t[16]=e("label",{for:"excerpt"},"Excerpt:",-1)),s(e("input",{type:"text",id:"excerpt","onUpdate:modelValue":t[3]||(t[3]=o=>r.article.excerpt=o),required:""},null,512),[[d,r.article.excerpt]])]),e("div",W,[t[17]||(t[17]=e("label",{for:"date"},"Date:",-1)),e("input",{type:"datetime-local",id:"date",value:r.formatDateForInput(r.article.date),onInput:t[4]||(t[4]=o=>r.article.date=o.target.value),required:""},null,40,z)]),e("div",L,[t[18]||(t[18]=e("label",{for:"author"},"Author:",-1)),s(e("input",{type:"text",id:"author","onUpdate:modelValue":t[5]||(t[5]=o=>r.article.author=o),required:""},null,512),[[d,r.article.author]])]),e("div",Z,[t[19]||(t[19]=e("label",{for:"content"},"Content:",-1)),s(e("textarea",{id:"content","onUpdate:modelValue":t[6]||(t[6]=o=>r.article.content=o),required:""},null,512),[[d,r.article.content]])]),e("div",K,[t[20]||(t[20]=e("label",{for:"readingTime"},"Reading Time (min):",-1)),s(e("input",{type:"number",id:"readingTime","onUpdate:modelValue":t[7]||(t[7]=o=>r.article.readingTime=o),required:"",disabled:""},null,512),[[d,r.article.readingTime]])]),e("div",Q,[t[21]||(t[21]=e("button",{type:"submit",class:"action-btn update-btn"},"Update Article",-1)),e("button",{type:"button",onClick:t[8]||(t[8]=(...o)=>r.navigateToArtikel&&r.navigateToArtikel(...o)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const rt=A(V,[["render",X],["__scopeId","data-v-a4da8310"]]);export{rt as default};
