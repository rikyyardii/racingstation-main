import{s as x,D as S,E as U,r as T,k as V,m as E,c as D,a as l,_ as w,b as I,y as C,z as o,A as n,C as p,o as L}from"./Dfs4USFl.js";import{u as M}from"./DE3Kh6dv.js";import{a as v}from"./CCb-kr4I.js";import{D as d}from"./DcQSltNB.js";const A={class:"app-wrapper"},B={class:"header-content"},R={class:"container"},q={class:"form-group"},z={__name:"[id]",setup(J){const b=S(),s=U(),t=T({title:"",category:"",event:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",scheduled_enable_time:null,status:""}),{API_URL:r}=V().public,m=i=>i?(i.includes("T")?d.fromISO(i,{zone:"UTC"}):d.fromSQL(i,{zone:"UTC"})).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm"):null,k=async()=>{try{const i=s.params.slug||s.params.id,{data:e}=await v.get(`${r}/streams/${i}`);console.log("Raw data:",e),e.scheduled_enable_time&&(e.scheduled_enable_time=m(e.scheduled_enable_time),console.log("Converted time:",e.scheduled_enable_time)),e.scheduled_disable_time&&(e.scheduled_disable_time=m(e.scheduled_disable_time)),t.value=e}catch(i){console.error("Error fetching stream data:",i)}};M({title:"Edit Streaming",ogTitle:"Edit Streaming"}),E(async()=>{await k()});const f=async()=>{var i;try{const e=s.params.slug||s.params.id;if(!e){alert("Slug tidak ditemukan!");return}let a=null;if(t.value.scheduled_enable_time){const u=d.fromISO(t.value.scheduled_enable_time,{zone:"Asia/Jakarta"});if(!u.isValid){alert("Format waktu tidak valid!");return}a=u.toISO()}let g=null;t.value.scheduled_disable_time&&(g=d.fromISO(t.value.scheduled_disable_time,{zone:"Asia/Jakarta"}).toISO());const y={...t.value,scheduled_enable_time:a};await v.put(`${r}/streams/${e}`,y),alert("Stream berhasil diperbarui!"),b.go(-1)}catch(e){console.error("Error updating stream:",((i=e.response)==null?void 0:i.data)||e.message),alert("Gagal memperbarui stream.")}};return(i,e)=>(L(),D("div",A,[l("header",null,[l("div",B,[l("h1",{class:"logo",onClick:e[0]||(e[0]=(...a)=>i.navigateToArtikel&&i.navigateToArtikel(...a)),style:{cursor:"pointer"}},e[13]||(e[13]=[l("img",{src:w,alt:"RacingStation Logo",class:"logo-image"},null,-1),I(" Dashboard ")]))])]),l("div",R,[e[29]||(e[29]=l("h2",{class:"black-text"},"Edit Livestream",-1)),l("form",{onSubmit:C(f,["prevent"])},[l("div",null,[e[14]||(e[14]=l("label",{for:"title"},"Title",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>t.value.title=a),id:"title",required:""},null,512),[[n,t.value.title]])]),l("div",q,[e[16]||(e[16]=l("label",{for:"category"},"Category:",-1)),o(l("select",{id:"category","onUpdate:modelValue":e[2]||(e[2]=a=>t.value.category=a),required:""},e[15]||(e[15]=[l("option",{value:"Motorsport"},"Motorsport",-1),l("option",{value:"Football"},"Football",-1)]),512),[[p,t.value.category]])]),l("div",null,[e[17]||(e[17]=l("label",{for:"event"},"Live Event",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>t.value.event=a),id:"event"},null,512),[[n,t.value.event]])]),l("div",null,[e[18]||(e[18]=l("label",{for:"excerpt"},"Excerpt",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>t.value.excerpt=a),id:"excerpt",required:""},null,512),[[n,t.value.excerpt]])]),l("div",null,[e[19]||(e[19]=l("label",{for:"link"},"Link 1",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>t.value.link=a),id:"link",required:""},null,512),[[n,t.value.link]])]),l("div",null,[e[20]||(e[20]=l("label",{for:"link2"},"Link 2",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>t.value.link2=a),id:"link2"},null,512),[[n,t.value.link2]])]),l("div",null,[e[21]||(e[21]=l("label",{for:"link3"},"Link 3",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=a=>t.value.link3=a),id:"link3"},null,512),[[n,t.value.link3]])]),l("div",null,[e[22]||(e[22]=l("label",{for:"link4"},"Link 4",-1)),o(l("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=a=>t.value.link4=a),id:"link4"},null,512),[[n,t.value.link4]])]),l("div",null,[e[23]||(e[23]=l("label",{for:"content"},"Content",-1)),o(l("textarea",{"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.content=a),id:"content",required:""},null,512),[[n,t.value.content]])]),l("div",null,[e[24]||(e[24]=l("label",{for:"scheduledEnableTime"},"Jadwal Enable (WIB)",-1)),o(l("input",{type:"datetime-local",id:"scheduledEnableTime","onUpdate:modelValue":e[10]||(e[10]=a=>t.value.scheduled_enable_time=a)},null,512),[[n,t.value.scheduled_enable_time]])]),l("div",null,[e[25]||(e[25]=l("label",{for:"scheduledDisableTime"},"Jadwal Disable (WIB)",-1)),o(l("input",{type:"datetime-local",id:"scheduledDisableTime","onUpdate:modelValue":e[11]||(e[11]=a=>t.value.scheduled_disable_time=a)},null,512),[[n,t.value.scheduled_disable_time]])]),l("div",null,[e[27]||(e[27]=l("label",{for:"status"},"Status",-1)),o(l("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>t.value.status=a),id:"status"},e[26]||(e[26]=[l("option",{value:"enable"},"Enable",-1),l("option",{value:"disable"},"Disable",-1)]),512),[[p,t.value.status]])]),e[28]||(e[28]=l("button",{type:"submit"},"Update Stream",-1))],32)])]))}},H=x(z,[["__scopeId","data-v-bc260a57"]]);export{H as default};
