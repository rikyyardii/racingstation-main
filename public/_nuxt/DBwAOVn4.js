import{v as p,k as u,c as d,a as e,b as g,z as k,A as l,B as a,E as f,D as v,o as b}from"./ai8Zwbm5.js";import{_ as y}from"./Bj0AYFwx.js";const x={data(){return{stream:{image:null,title:"",category:"",event:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:""}}},setup(){const i=v();return{navigateToArtikel:()=>{i.push("/Artikel")},router:i}},methods:{async handleImageUpload(i){const{API_URL:t}=u().public,n=i.target.files[0];if(n&&n.type==="image/png"){const s=new FormData;s.append("image",n);try{const m=await(await fetch(`${t}/upload-image`,{method:"POST",body:s})).json();m.success?this.stream.image=m.imagePath:alert("Failed to upload image.")}catch(o){console.error("Error uploading image:",o),alert("Error uploading image.")}}else alert("Please upload a PNG file."),i.target.value=""},async submitStream(){const{API_URL:i}=u().public;try{const t={title:this.stream.title,category:this.stream.category,event:this.stream.event,excerpt:this.stream.excerpt,link:this.stream.link,link2:this.stream.link2,link3:this.stream.link3,link4:this.stream.link4,content:this.stream.content,imagePath:this.stream.image},n=await fetch(`${i}/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await n.json();console.log("Response status:",n.status),console.log("Result:",s),n.ok?(alert("Stream submitted successfully!"),this.router.push("Home"),this.resetForm()):(console.error("Error submitting stream:",s.error||s.message),alert("Error submitting stream: "+(s.error||s.message)))}catch(t){console.error("Error submitting stream:",t),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",category:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:""}}}},U={class:"app-wrapper"},S={class:"header-content"},c={class:"dashboard"},V={class:"form-container"},E={class:"form-group"},T={class:"form-group"},L={class:"form-group"},P={class:"form-group"},w={class:"form-group"},A={class:"form-group"},q={class:"form-group"},I={class:"form-group"},R={class:"form-group"},C={class:"form-group"};function F(i,t,n,s,o,m){return b(),d("div",U,[e("header",null,[e("header",null,[e("div",S,[e("h1",{class:"logo",onClick:t[0]||(t[0]=(...r)=>s.navigateToArtikel&&s.navigateToArtikel(...r)),style:{cursor:"pointer"}},t[12]||(t[12]=[e("img",{src:y,alt:"RacingStation Logo",class:"logo-image"},null,-1),g(" Dashboard ")]))])])]),e("div",c,[t[25]||(t[25]=e("h1",{class:"black-text"},"Manage Livestream",-1)),e("div",V,[e("form",{onSubmit:t[11]||(t[11]=k((...r)=>m.submitStream&&m.submitStream(...r),["prevent"]))},[e("div",E,[t[13]||(t[13]=e("label",{for:"image"},"Upload PNG Image:",-1)),e("input",{type:"file",id:"image",accept:".png",onChange:t[1]||(t[1]=(...r)=>m.handleImageUpload&&m.handleImageUpload(...r)),required:""},null,32)]),e("div",T,[t[14]||(t[14]=e("label",{for:"title"},"Title",-1)),l(e("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=r=>o.stream.title=r),required:""},null,512),[[a,o.stream.title]])]),e("div",L,[t[16]||(t[16]=e("label",{for:"category"},"Category:",-1)),l(e("select",{id:"category","onUpdate:modelValue":t[3]||(t[3]=r=>o.stream.category=r),required:""},t[15]||(t[15]=[e("option",{value:"Motorsport"},"Motorsport",-1),e("option",{value:"Football"},"Football",-1)]),512),[[f,o.stream.category]])]),e("div",P,[t[17]||(t[17]=e("label",{for:"title"},"Live Event",-1)),l(e("input",{type:"text",id:"event","onUpdate:modelValue":t[4]||(t[4]=r=>o.stream.event=r),required:""},null,512),[[a,o.stream.event]])]),e("div",w,[t[18]||(t[18]=e("label",{for:"excerpt"},"Excerpt",-1)),l(e("input",{type:"text",id:"excerpt","onUpdate:modelValue":t[5]||(t[5]=r=>o.stream.excerpt=r),required:""},null,512),[[a,o.stream.excerpt]])]),e("div",A,[t[19]||(t[19]=e("label",{for:"link"},"Link 1",-1)),l(e("input",{type:"text",id:"link","onUpdate:modelValue":t[6]||(t[6]=r=>o.stream.link=r),required:""},null,512),[[a,o.stream.link]])]),e("div",q,[t[20]||(t[20]=e("label",{for:"link"},"Link 2",-1)),l(e("input",{type:"text",id:"link","onUpdate:modelValue":t[7]||(t[7]=r=>o.stream.link2=r)},null,512),[[a,o.stream.link2]])]),e("div",I,[t[21]||(t[21]=e("label",{for:"link"},"Link 3",-1)),l(e("input",{type:"text",id:"link","onUpdate:modelValue":t[8]||(t[8]=r=>o.stream.link3=r)},null,512),[[a,o.stream.link3]])]),e("div",R,[t[22]||(t[22]=e("label",{for:"link"},"Link 4",-1)),l(e("input",{type:"text",id:"link","onUpdate:modelValue":t[9]||(t[9]=r=>o.stream.link4=r)},null,512),[[a,o.stream.link4]])]),e("div",C,[t[23]||(t[23]=e("label",{for:"content"},"Content",-1)),l(e("textarea",{id:"content","onUpdate:modelValue":t[10]||(t[10]=r=>o.stream.content=r),required:""},null,512),[[a,o.stream.content]])]),t[24]||(t[24]=e("button",{type:"submit"},"Submit Stream",-1))],32)])])])}const N=p(x,[["render",F],["__scopeId","data-v-98605e8e"]]);export{N as default};
