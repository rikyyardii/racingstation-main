import{_ as P,E as D,r as d,p as $,n as l,f as N,c as v,a as t,d as B,B as M,C as T,F,s as V,t as o,o as _}from"./NOtjPhkj.js";import{a as f}from"./CCb-kr4I.js";const A={class:"container"},H={class:"table-controls"},I={class:"right-controls"},R={class:"search-box"},U={class:"table-container"},j={class:"data-table"},O={class:"action-buttons"},Q=["onClick"],q=["onClick"],z={class:"table-footer"},G={class:"entries-info"},J={class:"pagination"},K=["disabled"],W={class:"page-number"},X=["disabled"],Y={__name:"LiveStream",setup(Z){const h=D(),c=d(""),n=d(1),r=d(5),u=d([]),p=(()=>{const e=new URL(window.location.href);return e.port="5000",e.origin})();$(async()=>{try{const e=await f.get(`${p}/api/streams_card`);u.value=e.data}catch(e){console.error("Error fetching streams:",e)}});const m=l(()=>u.value.filter(e=>{const s=c.value.toLowerCase();return Object.values(e).some(a=>a.toString().toLowerCase().includes(s))})),i=l(()=>m.value.length),b=l(()=>Math.ceil(i.value/r.value)),g=l(()=>{const e=(n.value-1)*r.value,s=e+r.value;return m.value.slice(e,s)}),y=l(()=>i.value===0?0:(n.value-1)*r.value+1),w=l(()=>{const e=n.value*r.value;return e>i.value?i.value:e}),x=()=>{h.push("add_livestream")},k=e=>{h.push(`/rikya/edit_stream/${e}`)},S=async e=>{if(confirm("Are you sure you want to delete this stream?"))try{await f.delete(`${p}/api/streams/${e.id}`),u.value=u.value.filter(a=>a.id!==e.id),n.value=1,alert("Stream deleted successfully")}catch(a){console.error("Error deleting stream:",a),alert("Failed to delete stream")}},C=()=>{n.value>1&&n.value--},E=()=>{n.value<b.value&&n.value++};return N(c,()=>{n.value=1}),(e,s)=>(_(),v("div",A,[s[4]||(s[4]=t("h2",{class:"black-text"},"Livestream Management",-1)),t("div",H,[t("div",{class:"left-controls"},[t("button",{onClick:x,class:"new-btn"},s[1]||(s[1]=[t("span",{class:"plus-icon"},"+",-1),B(" New")]))]),t("div",I,[t("div",R,[s[2]||(s[2]=t("label",null,"Search:",-1)),M(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),class:"search-input"},null,512),[[T,c.value]])])])]),t("div",U,[t("table",j,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Excerpt"),t("th",null,"Status"),t("th",null,"Action")])],-1)),t("tbody",null,[(_(!0),v(F,null,V(g.value,a=>(_(),v("tr",{key:a.id},[t("td",null,o(a.id),1),t("td",null,o(a.title),1),t("td",null,o(a.excerpt),1),t("td",null,o(a.status),1),t("td",O,[t("button",{onClick:L=>k(a.slug),class:"edit-btn"},"Edit",8,Q),t("button",{onClick:L=>S(a),class:"delete-btn"},"Delete",8,q)])]))),128))])])]),t("div",z,[t("div",G,"Showing "+o(y.value)+" to "+o(w.value)+" of "+o(i.value)+" entries",1),t("div",J,[t("button",{onClick:C,disabled:n.value===1,class:"pagination-btn"},"Previous",8,K),t("span",W,o(n.value),1),t("button",{onClick:E,disabled:n.value===b.value,class:"pagination-btn"},"Next",8,X)])])]))}},at=P(Y,[["__scopeId","data-v-650e15bc"]]);export{at as default};
