import{s as P,D as T,r as d,k as M,m as $,l as o,x as A,c as v,a as t,b as N,z as F,A as I,F as V,e as B,t as l,o as m}from"./-H9k7hHH.js";import{u as R}from"./CisZnfUO.js";import{a as g}from"./CCb-kr4I.js";import{D as U}from"./DcQSltNB.js";const H={class:"container"},O={class:"table-controls"},Z={class:"right-controls"},j={class:"search-box"},z={class:"table-container"},J={class:"data-table"},Q={class:"action-buttons"},q=["onClick"],G=["onClick"],K={class:"table-footer"},W={class:"entries-info"},X={class:"pagination"},Y=["disabled"],tt={class:"page-number"},et=["disabled"],st={__name:"LiveStream",setup(at){const _=T(),u=d(""),n=d(1),r=d(5),c=d([]),{API_URL:h}=M().public;$(async()=>{try{const e=await g.get(`${h}/streams_card`);c.value=e.data}catch(e){console.error("Error fetching streams:",e)}});const b=o(()=>c.value.filter(e=>{const s=u.value.toLowerCase();return Object.values(e).some(a=>a.toString().toLowerCase().includes(s))})),i=o(()=>b.value.length),p=o(()=>Math.ceil(i.value/r.value)),y=o(()=>{const e=(n.value-1)*r.value,s=e+r.value;return b.value.slice(e,s)}),S=o(()=>i.value===0?0:(n.value-1)*r.value+1),k=o(()=>{const e=n.value*r.value;return e>i.value?i.value:e}),x=()=>{_.push("add_livestream")},w=e=>{_.push(`/rikya/edit_stream/${e}`)},C=async e=>{if(confirm("Are you sure you want to delete this stream?"))try{await g.delete(`${h}/streams/${e.id}`),c.value=c.value.filter(a=>a.id!==e.id),n.value=1,alert("Stream deleted successfully")}catch(a){console.error("Error deleting stream:",a),alert("Failed to delete stream")}},D=()=>{n.value>1&&n.value--},E=()=>{n.value<p.value&&n.value++};A(u,()=>{n.value=1});const f=e=>{if(!e)return"-";const s=U.fromISO(e).setZone("UTC").setZone("Asia/Jakarta");return s.isValid?s.toFormat("dd-MM-yyyy HH:mm"):"Invalid Date"};return R({title:"Data Streaming",ogTitle:"Data Streaming"}),(e,s)=>(m(),v("div",H,[s[4]||(s[4]=t("h2",{class:"black-text"},"Livestream Management",-1)),t("div",O,[t("div",{class:"left-controls"},[t("button",{onClick:x,class:"new-btn"},s[1]||(s[1]=[t("span",{class:"plus-icon"},"+",-1),N(" New")]))]),t("div",Z,[t("div",j,[s[2]||(s[2]=t("label",null,"Search:",-1)),F(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a),class:"search-input"},null,512),[[I,u.value]])])])]),t("div",z,[t("table",J,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Event"),t("th",null,"Start Live"),t("th",null,"End Live"),t("th",null,"Status"),t("th",null,"Action")])],-1)),t("tbody",null,[(m(!0),v(V,null,B(y.value,a=>(m(),v("tr",{key:a.id},[t("td",null,l(a.title),1),t("td",null,l(a.event),1),t("td",null,l(f(a.scheduled_enable_time)),1),t("td",null,l(f(a.scheduled_disable_time)),1),t("td",null,l(a.status),1),t("td",Q,[t("button",{onClick:L=>w(a.slug),class:"edit-btn"},"Edit",8,q),t("button",{onClick:L=>C(a),class:"delete-btn"},"Delete",8,G)])]))),128))])])]),t("div",K,[t("div",W,"Showing "+l(S.value)+" to "+l(k.value)+" of "+l(i.value)+" entries",1),t("div",X,[t("button",{onClick:D,disabled:n.value===1,class:"pagination-btn"},"Previous",8,Y),t("span",tt,l(n.value),1),t("button",{onClick:E,disabled:n.value===p.value,class:"pagination-btn"},"Next",8,et)])])]))}},it=P(st,[["__scopeId","data-v-a6844067"]]);export{it as default};
