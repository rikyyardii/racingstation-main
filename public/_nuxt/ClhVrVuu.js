import{s as N,r as i,k as F,p as P,c as m,a as s,b as v,h as g,e as c,d as p,_ as z,u as n,F as $,f as E,w as O,T as W,t as r,q,o as a,n as I,z as V,E as y}from"./CFG83du_.js";import G from"./DDAuI8D6.js";import X from"./DvXab0Lx.js";import J from"./Cd0TF_Lp.js";import{S as K,M as Q,a as Y,X as B,F as Z}from"./COFDkXn5.js";import{u as ee}from"./C24GBl0v.js";import{s as se}from"./lSkL0DMx.js";import{A as w}from"./KkDK1K6Z.js";import"./DOXiyJsP.js";import"./xsH4HHeE.js";const te={class:"app admin"},oe={class:"header-content"},ae={class:"header-controls"},ne={class:"desktop-nav"},re=["onClick"],le={key:0,class:"mobile-nav"},ie={class:"mobile-nav-content"},ce=["onClick"],ue={key:0,class:"home-view section"},de={class:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl mx-auto px-6"},ve={class:"stats-container"},me={class:"stat-value"},ge={class:"stat-value"},pe={class:"stat-value"},he={class:"stat-card"},ke={class:"stat-value"},fe={class:"stat-description"},ye={__name:"Home",setup(we){const b=i(0),C=i(0),_=i(0),h=i(!1),k=i(!0),l=i("Home"),S=["Home","Logout"],T=q(),f=()=>{window.innerWidth<=768&&(h.value=!h.value)},R=()=>{k.value=!k.value,document.body.classList.toggle("light-mode",!k.value)},{API_URL:u}=F().public,A=async t=>{if(window.innerWidth<=768&&f(),t==="Logout")try{const o=await(await fetch(`${u}/logout`,{method:"POST",credentials:"include"})).json();o.success?T.push("/rikya"):console.error("Logout failed:",o.message)}catch(e){console.error("An error occurred while logging out:",e)}else l.value=t,localStorage.setItem("currentView",t)},L=i(!1),x=async()=>{try{const e=await(await fetch(`${u}/check-session`,{method:"GET",credentials:"include"})).json();L.value=e.isLoggedIn,e.isLoggedIn||(alert("Sudah logout, silahkan Login dulu!!"),T.push("/rikya"))}catch(t){console.error("Error checking session:",t),L.value=!1}},D=async()=>{try{const e=await(await fetch(`${u}/articles_count`)).json();b.value=e.totalArticles}catch(t){console.error("Error fetching article count:",t)}},H=async()=>{try{const e=await(await fetch(`${u}/streams_count`)).json();C.value=e.totalStream}catch(t){console.error("Error fetching stream count:",t)}},U=async()=>{try{const e=await(await fetch(`${u}/adslink_count`)).json();_.value=e.totalAdslink}catch(t){console.error("Error fetching adslink count:",t)}},d=i({rss:"0 MB",heapTotal:"0 MB",heapUsed:"0 MB",external:"0 MB"}),M=async()=>{try{const e=await(await fetch(`${u}/memory-usage`)).json();d.value=e}catch(t){console.error("Error fetching memory usage:",t)}};return ee({title:"RacingStation Dashboard",ogTitle:"RacingStation Dashboard"}),P(()=>{x(),D(),H(),U(),M(),se(M,5e3);const t=localStorage.getItem("currentView");t&&(l.value=t)}),(t,e)=>(a(),m("div",te,[s("header",null,[s("div",oe,[e[3]||(e[3]=s("h1",{class:"logo"},[s("img",{src:z,alt:"RacingStation Logo",class:"logo-image"}),p(" Dashboard ")],-1)),s("div",ae,[s("button",{onClick:R,class:"icon-button"},[k.value?(a(),c(n(K),{key:0})):(a(),c(n(Q),{key:1}))]),s("button",{onClick:f,class:"icon-button menu-toggle"},[h.value?(a(),c(n(B),{key:1})):(a(),c(n(Y),{key:0}))]),s("nav",ne,[s("ul",null,[(a(),m($,null,E(S,o=>s("li",{key:o},[s("a",{href:"#",onClick:V(j=>A(o),["prevent"]),class:I({active:l.value===o})},r(o),11,re)])),64))])])])])]),v(W,{name:"slide"},{default:O(()=>[h.value?(a(),m("nav",le,[s("div",ie,[s("button",{onClick:f,class:"icon-button close-menu"},[v(n(B))]),s("ul",null,[(a(),m($,null,E(S,o=>s("li",{key:o},[s("a",{href:"#",onClick:V(j=>A(o),["prevent"]),class:I({active:l.value===o})},r(o),11,ce)])),64))])])])):g("",!0)]),_:1}),l.value==="Home"?(a(),m("div",ue,[s("div",de,[s("div",ve,[s("div",{class:"stat-card clickable",onClick:e[0]||(e[0]=o=>("navigateTo"in t?t.navigateTo:n(y))("Artikel"))},[e[4]||(e[4]=s("h3",null,"Total Articles",-1)),s("div",me,r(b.value),1),e[5]||(e[5]=s("p",{class:"stat-description"},"Published articles on your platform",-1)),v(n(w),{class:"card-arrow"})]),s("div",{class:"stat-card clickable",onClick:e[1]||(e[1]=o=>("navigateTo"in t?t.navigateTo:n(y))("Livestream"))},[e[6]||(e[6]=s("h3",null,"Total Streams",-1)),s("div",ge,r(C.value),1),e[7]||(e[7]=s("p",{class:"stat-description"},"Currently live streams",-1)),v(n(w),{class:"card-arrow"})]),s("div",{class:"stat-card clickable",onClick:e[2]||(e[2]=o=>("navigateTo"in t?t.navigateTo:n(y))("Ads"))},[e[8]||(e[8]=s("h3",null,"Ads Direct Link",-1)),s("div",pe,r(_.value),1),e[9]||(e[9]=s("p",{class:"stat-description"},"Currently place on website",-1)),v(n(w),{class:"card-arrow"})]),s("div",he,[e[13]||(e[13]=s("h3",null,"Nuxt Memory Usage",-1)),s("div",ke,r(d.value.rss),1),s("p",fe,[p(" RSS: "+r(d.value.rss)+" ",1),e[10]||(e[10]=s("br",null,null,-1)),p(" Heap Total: "+r(d.value.heapTotal)+" ",1),e[11]||(e[11]=s("br",null,null,-1)),p(" Heap Used: "+r(d.value.heapUsed)+" ",1),e[12]||(e[12]=s("br",null,null,-1)),p(" External: "+r(d.value.external),1)])])])])])):g("",!0),l.value==="Artikel"?(a(),c(G,{key:1})):g("",!0),l.value==="Livestream"?(a(),c(X,{key:2})):g("",!0),l.value==="Ads"?(a(),c(J,{key:3})):g("",!0),v(Z)]))}},Ie=N(ye,[["__scopeId","data-v-6319ebea"]]);export{Ie as default};
