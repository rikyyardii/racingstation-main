import{s as Q,r as i,E as U,p as $,k as X,l as r,x as E,c as u,a as e,b as w,d as N,_ as q,e as g,u as k,F as C,f as A,w as G,T as J,t as l,o,n as D,z as T,h as Y}from"./BNQpVJa0.js";import{S as Z,M as ee,a as te,X as V,F as se}from"./CPRzWOjL.js";import{u as ae}from"./rKAU6hgB.js";import{a as F}from"./xsH4HHeE.js";const ne={class:"app admin"},oe={class:"header-content"},le={class:"header-controls"},ie={class:"desktop-nav"},ce=["onClick"],re={key:0,class:"mobile-nav"},ue={class:"mobile-nav-content"},de=["onClick"],ve={class:"container"},ke={class:"table-container"},he={class:"data-table"},_e={class:"action-buttons"},pe=["onClick"],fe=["onClick"],ge={class:"table-footer"},be={class:"entries-info"},me={class:"pagination"},ye=["disabled"],we={class:"page-number"},Ce=["disabled"],Ae={__name:"Ads",setup(Le){ae({title:"Data Artikel",ogTitle:"Data Artikel"});const h=i(!1),_=i(!0),b=i("Artikel"),L=["Home","Logout"],d=U(),M=i(""),n=i(1),c=i(7),p=i([]),R=()=>{_.value=!_.value,document.body.classList.toggle("light-mode",!_.value)},m=()=>{window.innerWidth<=768&&(h.value=!h.value)},x=async t=>{if(window.innerWidth<=768&&m(),t==="Logout")try{(await(await fetch(`${f}/logout`,{method:"POST",credentials:"include"})).json()).success&&d.push("/rikya")}catch(a){console.error("Logout error:",a)}else t==="Home"?d.push("/rikya/components/Home"):b.value=t};$(async()=>{try{(await(await fetch(`${f}/check-session`,{credentials:"include"})).json()).isLoggedIn||d.push("/rikya")}catch(t){console.error("Session check error:",t)}});const{API_URL:f}=X().public;$(async()=>{try{const t=await F.get(`${f}/adslink_card`);p.value=t.data}catch(t){console.error("Error fetching adslink:",t)}});const S=r(()=>p.value.filter(t=>{const a=M.value.toLowerCase();return t.name.toLowerCase().includes(a)||t.adslink.toLowerCase().includes(a)})),v=r(()=>S.value.length),P=r(()=>Math.ceil(v.value/c.value)),B=r(()=>{const t=(n.value-1)*c.value,a=t+c.value;return S.value.slice(t,a)}),I=r(()=>v.value===0?0:(n.value-1)*c.value+1),z=r(()=>{const t=n.value*c.value;return t>v.value?v.value:t}),H=()=>{d.push("add_adslink")},W=t=>{d.push(`/rikya/edit_adslink/${t.id}`)},j=async t=>{if(confirm("Are you sure you want to delete this adslink?"))try{await F.delete(`${f}/adslink/${t.id}`),p.value=p.value.filter(s=>s.id!==t.id),alert("Adslink deleted successfully")}catch(s){console.error("Error deleting adslink:",s),alert("Failed to delete adslink")}},O=()=>{n.value>1&&n.value--},K=()=>{n.value<P.value&&n.value++};return E(M,()=>{n.value=1}),E(c,()=>{n.value=1}),(t,a)=>(o(),u("div",ne,[e("header",null,[e("div",oe,[a[0]||(a[0]=e("h1",{class:"logo"},[e("img",{src:q,alt:"RacingStation Logo",class:"logo-image"}),N(" Dashboard ")],-1)),e("div",le,[e("button",{onClick:R,class:"icon-button"},[_.value?(o(),g(k(Z),{key:0})):(o(),g(k(ee),{key:1}))]),e("button",{onClick:m,class:"icon-button menu-toggle"},[h.value?(o(),g(k(V),{key:1})):(o(),g(k(te),{key:0}))]),e("nav",ie,[e("ul",null,[(o(),u(C,null,A(L,s=>e("li",{key:s},[e("a",{href:"#",onClick:T(y=>x(s),["prevent"]),class:D({active:b.value===s})},l(s),11,ce)])),64))])])])])]),w(J,{name:"slide"},{default:G(()=>[h.value?(o(),u("nav",re,[e("div",ue,[e("button",{onClick:m,class:"icon-button close-menu"},[w(k(V))]),e("ul",null,[(o(),u(C,null,A(L,s=>e("li",{key:s},[e("a",{href:"#",onClick:T(y=>x(s),["prevent"]),class:D({active:b.value===s})},l(s),11,de)])),64))])])])):Y("",!0)]),_:1}),e("div",ve,[a[3]||(a[3]=e("h2",{class:"black-text"},"Ads Management",-1)),a[4]||(a[4]=e("p",{style:{color:"red","font-size":"0.9em","margin-top":"-10px"}},"**Pastikan Status Selalu Enable Ketika Race Week/Match",-1)),e("div",{class:"table-controls"},[e("div",{class:"left-controls"},[e("button",{onClick:H,class:"new-btn-ads"},a[1]||(a[1]=[e("span",{class:"plus-icon"},"+",-1),N("New")]))])]),e("div",ke,[e("table",he,[a[2]||(a[2]=e("thead",null,[e("tr",null,[e("th",null,"Nama"),e("th",null,"Status"),e("th",null,"Link"),e("th",null,"Action")])],-1)),e("tbody",null,[(o(!0),u(C,null,A(B.value,s=>(o(),u("tr",{key:s.id},[e("td",null,l(s.name),1),e("td",null,l(s.status),1),e("td",null,l(s.adslink),1),e("td",_e,[e("button",{onClick:y=>W(s),class:"edit-btn"},"Edit",8,pe),e("button",{onClick:y=>j(s),class:"delete-btn"},"Delete",8,fe)])]))),128))])])]),e("div",ge,[e("div",be,"Showing "+l(I.value)+" to "+l(z.value)+" of "+l(v.value)+" entries",1),e("div",me,[e("button",{onClick:O,disabled:n.value===1,class:"pagination-btn"},"Previous",8,ye),e("span",we,l(n.value),1),e("button",{onClick:K,disabled:n.value===P.value,class:"pagination-btn"},"Next",8,Ce)])])]),w(se)]))}},$e=Q(Ae,[["__scopeId","data-v-5e2de6c2"]]);export{$e as default};
