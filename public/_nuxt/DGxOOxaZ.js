import{v as oe,r as c,G as se,k as ne,p as ae,x as le,l as f,y as R,c as v,a as e,b as d,d as p,_ as ie,e as w,u as a,F as D,f as P,w as re,T as ce,h as B,n as $,z as de,B as ue,t as u,o as l,A as F}from"./DX2j-DXT.js";import{S as ve,M as pe,a as ge,X as I,F as he}from"./OwIyKwQK.js";import{u as fe}from"./BpEgIk2w.js";import{a as O}from"./xsH4HHeE.js";import{C as me}from"./CKiWpDDZ.js";import{P as _e,S as y}from"./PwXNhdp3.js";const ke={class:"app admin"},Ce={class:"header-content"},be={class:"header-controls"},we={class:"desktop-nav"},ye=["onClick"],Se={key:0,class:"mobile-nav"},Le={class:"mobile-nav-content"},xe=["onClick"],Me={class:"container"},De={class:"table-controls"},Pe={class:"left-controls"},$e={key:0,class:"dropdown-menu"},Ee={class:"search-box"},Ne={class:"table-container"},Te={class:"data-table"},Ve={class:"action-buttons"},Ae=["onClick"],Re=["onClick"],Be={class:"table-footer"},Fe={class:"entries-info"},Ie={class:"pagination"},Oe=["disabled"],Ue={class:"page-number"},He=["disabled"],je={__name:"Categories",setup(ze){fe({title:"Data Categories",ogTitle:"Data Categories"});const _=c(!1),k=c(!0),S=c("Artikel"),E=["Home","Logout"],r=se(),C=c(""),n=c(1),g=c(7),h=c([]),i=c(!1),L=c(null),{API_URL:b}=ne().public,U=()=>{k.value=!k.value,document.body.classList.toggle("light-mode",!k.value)},x=()=>{window.innerWidth<=768&&(_.value=!_.value)},H=()=>{i.value=!i.value},N=o=>{L.value&&!L.value.contains(o.target)&&(i.value=!1)},T=async o=>{if(window.innerWidth<=768&&x(),o==="Logout")try{(await(await fetch(`${b}/logout`,{method:"POST",credentials:"include"})).json()).success&&r.push("/rikya")}catch(t){console.error("Logout error:",t)}else o==="Home"?r.push("/rikya/components/Home"):S.value=o},j=async()=>{try{const o=await O.get(`${b}/event-categories`);h.value=o.data,console.log("Categories loaded:",o.data)}catch(o){console.error("Error fetching categories:",o)}};ae(async()=>{try{if(!(await(await fetch(`${b}/check-session`,{credentials:"include"})).json()).isLoggedIn){r.push("/rikya");return}}catch(o){console.error("Session check error:",o)}await j(),document.addEventListener("click",N)}),le(()=>{document.removeEventListener("click",N)});const V=f(()=>!h.value||h.value.length===0?[]:h.value.filter(o=>{const t=C.value.toLowerCase();return o.name&&o.name.toLowerCase().includes(t)||o.description&&o.description.toLowerCase().includes(t)})),m=f(()=>V.value.length),A=f(()=>Math.ceil(m.value/g.value)),z=f(()=>{const o=(n.value-1)*g.value,t=o+g.value;return V.value.slice(o,t)}),W=f(()=>m.value===0?0:(n.value-1)*g.value+1),G=f(()=>{const o=n.value*g.value;return o>m.value?m.value:o}),Q=()=>{i.value=!1,r.push("add_categories")},X=()=>{i.value=!1,r.push("LiveStream")},q=()=>{i.value=!1,r.push("Categories")},J=()=>{i.value=!1,r.push("Session")},K=()=>{i.value=!1,r.push("Sosmed")},Y=o=>{r.push(`/rikya/edit_categories/${o.id}`)},Z=async o=>{if(confirm("Are you sure you want to delete this category?"))try{await O.delete(`${b}/event-categories/${o.id}`),h.value=h.value.filter(s=>s.id!==o.id),alert("Category deleted successfully")}catch(s){console.error("Error deleting category:",s),alert("Failed to delete category")}},ee=()=>{n.value>1&&n.value--},te=()=>{n.value<A.value&&n.value++};return R(C,()=>{n.value=1}),R(g,()=>{n.value=1}),(o,t)=>(l(),v("div",ke,[e("header",null,[e("div",Ce,[t[1]||(t[1]=e("h1",{class:"logo"},[e("img",{src:ie,alt:"RacingStation Logo",class:"logo-image"}),p(" Dashboard ")],-1)),e("div",be,[e("button",{onClick:U,class:"icon-button"},[k.value?(l(),w(a(ve),{key:0})):(l(),w(a(pe),{key:1}))]),e("button",{onClick:x,class:"icon-button menu-toggle"},[_.value?(l(),w(a(I),{key:1})):(l(),w(a(ge),{key:0}))]),e("nav",we,[e("ul",null,[(l(),v(D,null,P(E,s=>e("li",{key:s},[e("a",{href:"#",onClick:F(M=>T(s),["prevent"]),class:$({active:S.value===s})},u(s),11,ye)])),64))])])])])]),d(ce,{name:"slide"},{default:re(()=>[_.value?(l(),v("nav",Se,[e("div",Le,[e("button",{onClick:x,class:"icon-button close-menu"},[d(a(I))]),e("ul",null,[(l(),v(D,null,P(E,s=>e("li",{key:s},[e("a",{href:"#",onClick:F(M=>T(s),["prevent"]),class:$({active:S.value===s})},u(s),11,xe)])),64))])])])):B("",!0)]),_:1}),e("div",Me,[t[10]||(t[10]=e("h2",{class:"black-text"},"Categories Management",-1)),e("div",De,[e("div",Pe,[e("div",{class:"dropdown",ref_key:"dropdownRef",ref:L},[e("button",{onClick:H,class:"new-btn dropdown-toggle"},[t[2]||(t[2]=p(" Setup ")),d(a(me),{class:$(["dropdown-icon",{"rotate-180":i.value}])},null,8,["class"])]),i.value?(l(),v("div",$e,[e("button",{onClick:Q,class:"dropdown-item"},[d(a(_e),{class:"dropdown-item-icon"}),t[3]||(t[3]=p(" New Categories "))]),e("button",{onClick:X,class:"dropdown-item"},[d(a(y),{class:"dropdown-item-icon"}),t[4]||(t[4]=p(" Livestream "))]),e("button",{onClick:q,class:"dropdown-item"},[d(a(y),{class:"dropdown-item-icon"}),t[5]||(t[5]=p(" Categories "))]),e("button",{onClick:J,class:"dropdown-item"},[d(a(y),{class:"dropdown-item-icon"}),t[6]||(t[6]=p(" Session "))]),e("button",{onClick:K,class:"dropdown-item"},[d(a(y),{class:"dropdown-item-icon"}),t[7]||(t[7]=p(" Sosmed "))])])):B("",!0)],512)]),e("div",Ee,[t[8]||(t[8]=e("label",null,"Search:",-1)),de(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>C.value=s),class:"search-input"},null,512),[[ue,C.value]])])]),e("div",Ne,[e("table",Te,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Description"),e("th",null,"Action")])],-1)),e("tbody",null,[(l(!0),v(D,null,P(z.value,s=>(l(),v("tr",{key:s.id},[e("td",null,u(s.description),1),e("td",null,u(s.event_type_description||"N/A"),1),e("td",Ve,[e("button",{onClick:M=>Y(s),class:"edit-btn"},"Edit",8,Ae),e("button",{onClick:M=>Z(s),class:"delete-btn"},"Delete",8,Re)])]))),128))])])]),e("div",Be,[e("div",Fe,"Showing "+u(W.value)+" to "+u(G.value)+" of "+u(m.value)+" entries",1),e("div",Ie,[e("button",{onClick:ee,disabled:n.value===1,class:"pagination-btn"},"Previous",8,Oe),e("span",Ue,u(n.value),1),e("button",{onClick:te,disabled:n.value===A.value,class:"pagination-btn"},"Next",8,He)])])]),d(he)]))}},Ke=oe(je,[["__scopeId","data-v-275111ab"]]);export{Ke as default};
