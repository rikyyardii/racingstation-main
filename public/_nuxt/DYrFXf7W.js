import{r as l,u as A,c as W,o as P,C as z,a as r,b as t,_ as O,d as K,e as p,f as i,F as w,g as b,h as m,i as X,T as q,t as c,j as S,k as G,m as H,l as a,n as x,v as J}from"./_QJn3mRB.js";import{S as Q,M as Y,a as Z,X as B,F as ee}from"./CrZs5LA2.js";import{A as te}from"./DlOoI8zE.js";import{s as se}from"./BpUsuM9F.js";import{C as oe}from"./tVJ5ZvnS.js";const ne={class:"app"},ae={class:"header-content"},le={class:"header-controls"},re={class:"desktop-nav"},ce=["href"],ie={key:0,class:"mobile-nav"},ue={class:"mobile-nav-content"},de=["href"],me={class:"live-streaming"},ve={key:0},he={class:"video-container"},fe=["src"],pe={key:0,class:"button-container"},_e=["onClick"],ye={class:"live-commentary"},ge={class:"update-info"},ke={class:"time"},we={class:"text-justify"},Ie={__name:"[id]",setup(be){const C=l(""),v=l(!1),h=l(!0),L=["Latest News","Watch Sports"],_=G().params.id||null,y=l(""),u=l(""),d=l(""),$=l(""),D=l(null),g=l([]),F=l("");let k=null;const U=e=>{d.value!==e&&(d.value=e,window.history.replaceState({},document.title,window.location.href))},I=()=>{v.value=!v.value},N=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},T=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},E=()=>{const e=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(e),s=e.getDate(),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),f=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(e),j=e.toLocaleTimeString("en-US",{hour12:!0});C.value=`${o}, ${s} ${n} ${f}. ${j}`},{API_URL:M}=A().public,R=async e=>{const o=H();try{const s=await fetch(`${M}/streams/${e}`);if(s.ok){const n=await s.json();y.value=n.title,u.value=n.event,$.value=n.content,F.value=n.status,n.status==="enable"?d.value=n.link:d.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},V=async e=>{try{const o=await fetch(`${M}/streams/${e}`);if(o.ok){const s=await o.json();g.value=[],["link","link2","link3","link4"].forEach((n,f)=>{s[n]&&g.value.push({label:`Server ${f+1}`,url:s[n],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};return W(()=>u.value?`(${u.value})`:""),P(()=>{_?(R(_),V(_)):console.error("Slug is undefined"),E(),k=se(E,1e3),document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("keydown",e=>{(e.ctrlKey&&e.shiftKey&&e.code==="KeyI"||e.ctrlKey&&e.shiftKey&&e.code==="KeyC"||e.ctrlKey&&e.code==="KeyU"||e.code==="F12")&&(e.preventDefault(),e.stopPropagation())})}),z(()=>{k!==null&&clearInterval(k),document.removeEventListener("contextmenu",e=>e.preventDefault()),document.removeEventListener("keydown",e=>{})}),(e,o)=>(a(),r("div",ne,[t("header",null,[t("div",ae,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:O,alt:"RacingStation Logo",class:"logo-image"}),K(" RacingStation ")],-1)),t("div",le,[t("button",{onClick:N,class:"icon-button"},[h.value?(a(),p(i(Q),{key:0})):(a(),p(i(Y),{key:1}))]),t("button",{onClick:I,class:"icon-button menu-toggle"},[v.value?(a(),p(i(B),{key:1})):(a(),p(i(Z),{key:0}))]),t("nav",re,[t("ul",null,[(a(),r(w,null,b(L,s=>t("li",{key:s},[t("a",{href:T(s),class:x({active:D.value===s})},c(s),11,ce)])),64))])])])])]),m(q,{name:"slide"},{default:X(()=>[v.value?(a(),r("nav",ie,[t("div",ue,[t("button",{onClick:I,class:"icon-button close-menu"},[m(i(B))]),t("ul",null,[(a(),r(w,null,b(L,s=>t("li",{key:s},[t("a",{href:T(s),class:x({active:D.value===s})},c(s),11,de)])),64))])])])):S("",!0)]),_:1}),t("main",null,[m(te),t("div",me,[t("h1",null,[K(c(y.value)+" ",1),u.value?(a(),r("span",ve,"("+c(u.value)+")",1)):S("",!0)]),t("div",he,[t("iframe",{src:d.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,fe),o[1]||(o[1]=t("div",{class:"iframe-overlay"},null,-1))]),F.value==="enable"?(a(),r("div",pe,[(a(!0),r(w,null,b(g.value,(s,n)=>(a(),r("button",{key:n,class:"action-button",onClick:J(f=>U(s.url),["prevent"])},c(s.label),9,_e))),128))])):S("",!0),t("div",ye,[t("div",ge,[m(i(oe)),t("span",ke,c(C.value),1)]),t("h1",null,"What is "+c(y.value)+"?",1),t("p",we,c($.value),1)])])]),m(ee)]))}};export{Ie as default};
