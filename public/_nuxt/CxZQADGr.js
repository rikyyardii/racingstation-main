import{_ as d,c as p,a as e,d as u,A as g,B as l,C as m,z as c,o as f}from"./NOtjPhkj.js";import{_ as b}from"./DDHPc_ep.js";const k={data(){return{stream:{image:null,title:"",excerpt:"",link:"",content:""}}},setup(){const a=c();return{navigateToArtikel:()=>{a.push("/Artikel")},router:a}},methods:{async handleImageUpload(a){const t=a.target.files[0];if(t&&t.type==="image/png"){const s=new FormData;s.append("image",t);const i=`${window.location.origin.replace(window.location.port,"5000")}`;try{const n=await(await fetch(`${i}/api/upload-image`,{method:"POST",body:s})).json();n.success?this.stream.image=n.imagePath:alert("Failed to upload image.")}catch(r){console.error("Error uploading image:",r),alert("Error uploading image.")}}else alert("Please upload a PNG file."),a.target.value=""},async submitStream(){const t=(()=>{const s=new URL(window.location.href);return s.port="5000",s.origin})();try{const s={title:this.stream.title,excerpt:this.stream.excerpt,link:this.stream.link,content:this.stream.content,imagePath:this.stream.image},i=await fetch(`${t}/api/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await i.json();console.log("Response status:",i.status),console.log("Result:",r),i.ok?(alert("Stream submitted successfully!"),this.resetForm(),this.$router.push("Home")):(console.error("Error submitting stream:",r.error||r.message),alert("Error submitting stream: "+(r.error||r.message)))}catch(s){console.error("Error submitting stream:",s),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",excerpt:"",link:"",content:""}}}},v={class:"app-wrapper"},x={class:"header-content"},y={class:"dashboard"},h={class:"form-container"},w={class:"form-group"},S={class:"form-group"},T={class:"form-group"},U={class:"form-group"},E={class:"form-group"};function P(a,t,s,i,r,n){return f(),p("div",v,[e("header",null,[e("header",null,[e("div",x,[e("h1",{class:"logo",onClick:t[0]||(t[0]=(...o)=>i.navigateToArtikel&&i.navigateToArtikel(...o)),style:{cursor:"pointer"}},t[7]||(t[7]=[e("img",{src:b,alt:"RacingStation Logo",class:"logo-image"},null,-1),u(" Dashboard ")]))])])]),e("div",y,[t[14]||(t[14]=e("h1",{class:"black-text"},"Manage Livestream",-1)),e("div",h,[e("form",{onSubmit:t[6]||(t[6]=g((...o)=>n.submitStream&&n.submitStream(...o),["prevent"]))},[e("div",w,[t[8]||(t[8]=e("label",{for:"image"},"Upload PNG Image:",-1)),e("input",{type:"file",id:"image",accept:".png",onChange:t[1]||(t[1]=(...o)=>n.handleImageUpload&&n.handleImageUpload(...o)),required:""},null,32)]),e("div",S,[t[9]||(t[9]=e("label",{for:"title"},"Title:",-1)),l(e("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=o=>r.stream.title=o),required:""},null,512),[[m,r.stream.title]])]),e("div",T,[t[10]||(t[10]=e("label",{for:"excerpt"},"Excerpt:",-1)),l(e("input",{type:"text",id:"excerpt","onUpdate:modelValue":t[3]||(t[3]=o=>r.stream.excerpt=o),required:""},null,512),[[m,r.stream.excerpt]])]),e("div",U,[t[11]||(t[11]=e("label",{for:"link"},"Link:",-1)),l(e("input",{type:"text",id:"link","onUpdate:modelValue":t[4]||(t[4]=o=>r.stream.link=o),required:""},null,512),[[m,r.stream.link]])]),e("div",E,[t[12]||(t[12]=e("label",{for:"content"},"Content:",-1)),l(e("textarea",{id:"content","onUpdate:modelValue":t[5]||(t[5]=o=>r.stream.content=o),required:""},null,512),[[m,r.stream.content]])]),t[13]||(t[13]=e("button",{type:"submit"},"Submit Stream",-1))],32)])])])}const V=d(k,[["render",P],["__scopeId","data-v-45ed1731"]]);export{V as default};
