import{v as k,r as x,k as A,y as C,p as I,c as p,a as e,b as M,z as D,A as s,E as U,B as d,q as w,D as h,o as g}from"./ai8Zwbm5.js";import{D as m}from"./DcQSltNB.js";import{_ as E}from"./Bj0AYFwx.js";const R={setup(){const o=x({id:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:"",image:null}),t=w(),f=h(),r=i=>m.fromISO(i).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd"),v=i=>i?m.fromISO(i).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm"):"",{API_URL:u,IMAGE_URL:a}=A().public,y=async i=>{try{const l=await(await fetch(`${u}/articles/${i}`)).json(),c=m.fromISO(l.date,{zone:"UTC"}).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd'T'HH:mm");o.value={...o.value,id:l.id,category:l.category,title:l.title,excerpt:l.excerpt||generateExcerpt(l.content),date:c,author:l.author,readingTime:l.reading_time,content:l.content,image:l.image_path?`${a}${l.image_path}`:null}}catch(n){console.error("Error fetching article:",n)}},b=i=>{const l=i.trim();if(!l){o.value.readingTime=0;return}const c=l.split(/\s+/).length;o.value.readingTime=Math.ceil(c/200)};C(()=>o.value.content,i=>{b(i)},{immediate:!0});const T=async()=>{if(!o.value.id){alert("ID artikel tidak valid.");return}try{const i=m.fromISO(o.value.date,{zone:"Asia/Jakarta"}).toUTC().toISO();await fetch(`${u}/articles/${o.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:i})});const n=await fetch(`${u}/articles/${o.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:o.value.category,title:o.value.title,excerpt:o.value.excerpt,date:i,author:o.value.author,readingTime:o.value.readingTime,content:o.value.content})}),l=await n.json();n.ok?(alert("Artikel berhasil diperbarui!"),f.push("../components/Home")):alert("Gagal memperbarui artikel: "+l.error)}catch(i){console.error("Error updating article:",i),alert("Terjadi kesalahan saat memperbarui artikel.")}};return I(()=>{const i=t.params.id;i?(y(i),o.value.id=i):console.error("ID artikel tidak ditemukan pada route.")}),{article:o,submitArticle:T,formatDate:r,formatDateForInput:v}}},S={class:"app-wrapper"},q={class:"header-content"},V={class:"dashboard"},F={class:"form-container"},O={class:"form-group"},P={key:0},J=["src"],_={key:1},j={class:"form-group"},H={class:"form-group"},N={class:"form-group"},B={class:"form-group"},G=["value"],W={class:"form-group"},z={class:"form-group"},L={class:"form-group"};function Z(o,t,f,r,v,u){return g(),p("div",S,[e("header",null,[e("div",q,[e("h1",{class:"logo",onClick:t[0]||(t[0]=(...a)=>o.navigateToArtikel&&o.navigateToArtikel(...a)),style:{cursor:"pointer"}},t[9]||(t[9]=[e("img",{src:E,alt:"RacingStation Logo",class:"logo-image"},null,-1),M(" Dashboard ")]))])]),e("div",V,[t[21]||(t[21]=e("h1",null,"Edit Articles",-1)),e("div",F,[e("form",{onSubmit:t[8]||(t[8]=D((...a)=>r.submitArticle&&r.submitArticle(...a),["prevent"]))},[e("div",O,[t[11]||(t[11]=e("label",null,"Current Image:",-1)),r.article.image?(g(),p("div",P,[e("img",{src:r.article.image,alt:"Current Article Image",class:"current-image"},null,8,J)])):(g(),p("div",_,t[10]||(t[10]=[e("span",null,"No image available",-1)])))]),e("div",j,[t[13]||(t[13]=e("label",{for:"category"},"Category:",-1)),s(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=a=>r.article.category=a),required:""},t[12]||(t[12]=[e("option",{value:"Formula 1"},"Formula 1",-1),e("option",{value:"MotoGP"},"MotoGP",-1),e("option",{value:"WEC"},"WEC",-1),e("option",{value:"WRC"},"WRC",-1)]),512),[[U,r.article.category]])]),e("div",H,[t[14]||(t[14]=e("label",{for:"title"},"Title:",-1)),s(e("input",{type:"text",id:"title","onUpdate:modelValue":t[2]||(t[2]=a=>r.article.title=a),required:""},null,512),[[d,r.article.title]])]),e("div",N,[t[15]||(t[15]=e("label",{for:"excerpt"},"Excerpt:",-1)),s(e("input",{type:"text",id:"excerpt","onUpdate:modelValue":t[3]||(t[3]=a=>r.article.excerpt=a),required:""},null,512),[[d,r.article.excerpt]])]),e("div",B,[t[16]||(t[16]=e("label",{for:"date"},"Date:",-1)),e("input",{type:"datetime-local",id:"date",value:r.formatDateForInput(r.article.date),onInput:t[4]||(t[4]=a=>r.article.date=a.target.value),required:""},null,40,G)]),e("div",W,[t[17]||(t[17]=e("label",{for:"author"},"Author:",-1)),s(e("input",{type:"text",id:"author","onUpdate:modelValue":t[5]||(t[5]=a=>r.article.author=a),required:""},null,512),[[d,r.article.author]])]),e("div",z,[t[18]||(t[18]=e("label",{for:"content"},"Content:",-1)),s(e("textarea",{id:"content","onUpdate:modelValue":t[6]||(t[6]=a=>r.article.content=a),required:""},null,512),[[d,r.article.content]])]),e("div",L,[t[19]||(t[19]=e("label",{for:"readingTime"},"Reading Time (min):",-1)),s(e("input",{type:"number",id:"readingTime","onUpdate:modelValue":t[7]||(t[7]=a=>r.article.readingTime=a),required:"",disabled:""},null,512),[[d,r.article.readingTime]])]),t[20]||(t[20]=e("button",{type:"submit"},"Update Article",-1))],32)])])])}const Y=k(R,[["render",Z],["__scopeId","data-v-4da6c31d"]]);export{Y as default};
