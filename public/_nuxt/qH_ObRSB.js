import{r,u as q,c as _,o as H,C as J,a as l,b as e,_ as Q,d as U,e as y,f as u,F as $,g as C,h as v,i as Y,T as Z,t as i,j as I,k as tt,m as et,l as a,n as K,v as st}from"./DrOlQkHP.js";import{S as ot,M as nt,a as at,X as x,F as rt}from"./C660dJ-v.js";import{A as lt}from"./BAv74qyD.js";import{u as it}from"./EkSrvI8e.js";import{s as ct}from"./DJhEKsIZ.js";import{C as ut}from"./DxrpsIrJ.js";const dt={class:"app"},mt={class:"header-content"},vt={class:"header-controls"},ht={class:"desktop-nav"},ft=["href"],pt={key:0,class:"mobile-nav"},gt={class:"mobile-nav-content"},_t=["href"],yt={class:"live-streaming"},wt={key:0},kt={class:"video-container"},St=["src"],bt={key:0,class:"button-container"},$t=["onClick"],Ct={class:"live-commentary"},It={class:"update-info"},Dt={class:"time"},Lt={class:"text-justify"},xt={__name:"[id]",setup(Tt){const D=r(""),h=r(!1),f=r(!0),L=["Latest News","Watch Sports"],w=tt().params.id||null,p=r(""),d=r(""),m=r(""),k=r(""),B=r(""),T=r(null),S=r([]),M=r("");let b=null;const N=t=>{if(m.value!==t){m.value=t;const o=window.history.state;window.history.replaceState(o,"",window.location.href)}},W=()=>{h.value=!h.value},V=()=>{f.value=!f.value,document.body.classList.toggle("light-mode",!f.value)},E=t=>{switch(t){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},F=()=>{const t=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t),s=t.getDate(),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(t),g=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(t),X=t.toLocaleTimeString("en-US",{hour12:!0});D.value=`${o}, ${s} ${n} ${g}. ${X}`},{API_URL:R,IMAGE_URL:c}=q().public,j=t=>{const o=c.startsWith("http")?c:`https://${c}`;return!t||typeof t!="string"?`${o}/public/img/racingstation-stream.png`:t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/public/img/")?`${o}${t}`:`${o}/public/img/${t}`},A=_(()=>p.value||"RacingStation Stream"),P=_(()=>k.value||"Watch live streaming of your favorite events."),z=_(()=>`${c.startsWith("http")?c:`https://${c}`}/public/img/racingstation-stream.png`);it({title:A,ogTitle:"RacingStation Stream",description:P,ogDescription:"Watch live streaming of your favorite events.",ogImage:z,twitterTitle:"RacingStation Stream",twitterDescription:"Watch live streaming of your favorite events.",twitterCard:"summary_large_image"});const G=async t=>{const o=et();try{const s=await fetch(`${R}/streams/${t}`);if(s.ok){const n=await s.json();p.value=n.title,d.value=n.event,k.value=n.content,M.value=n.status,B.value=j(n.image_path),n.status==="enable"?m.value=n.link:m.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},O=async t=>{try{const o=await fetch(`${R}/streams/${t}`);if(o.ok){const s=await o.json();S.value=[],["link","link2","link3","link4"].forEach((n,g)=>{s[n]&&S.value.push({label:`Server ${g+1}`,url:s[n],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};return _(()=>d.value?`(${d.value})`:""),H(()=>{w?(G(w),O(w)):console.error("Slug is undefined"),F(),b=ct(F,1e3),document.addEventListener("contextmenu",t=>t.preventDefault()),document.addEventListener("keydown",t=>{(t.ctrlKey&&t.shiftKey&&t.code==="KeyI"||t.ctrlKey&&t.shiftKey&&t.code==="KeyC"||t.ctrlKey&&t.code==="KeyU"||t.code==="F12")&&(t.preventDefault(),t.stopPropagation())})}),J(()=>{b!==null&&clearInterval(b),document.removeEventListener("contextmenu",t=>t.preventDefault()),document.removeEventListener("keydown",t=>{})}),(t,o)=>(a(),l("div",dt,[e("header",null,[e("div",mt,[o[0]||(o[0]=e("h1",{class:"logo"},[e("img",{src:Q,alt:"RacingStation Logo",class:"logo-image"}),U(" RacingStation ")],-1)),e("div",vt,[e("button",{onClick:V,class:"icon-button"},[f.value?(a(),y(u(ot),{key:0})):(a(),y(u(nt),{key:1}))]),e("button",{onClick:W,class:"icon-button menu-toggle"},[h.value?(a(),y(u(x),{key:1})):(a(),y(u(at),{key:0}))]),e("nav",ht,[e("ul",null,[(a(),l($,null,C(L,s=>e("li",{key:s},[e("a",{href:E(s),class:K({active:T.value===s})},i(s),11,ft)])),64))])])])])]),v(Z,{name:"slide"},{default:Y(()=>[h.value?(a(),l("nav",pt,[e("div",gt,[e("button",{onClick:W,class:"icon-button close-menu"},[v(u(x))]),e("ul",null,[(a(),l($,null,C(L,s=>e("li",{key:s},[e("a",{href:E(s),class:K({active:T.value===s})},i(s),11,_t)])),64))])])])):I("",!0)]),_:1}),e("main",null,[v(lt),e("div",yt,[e("h1",null,[U(i(p.value)+" ",1),d.value?(a(),l("span",wt,"("+i(d.value)+")",1)):I("",!0)]),e("div",kt,[e("iframe",{src:m.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,St),o[1]||(o[1]=e("div",{class:"iframe-overlay"},null,-1))]),M.value==="enable"?(a(),l("div",bt,[(a(!0),l($,null,C(S.value,(s,n)=>(a(),l("button",{key:n,class:"action-button",onClick:st(g=>N(s.url),["prevent"])},i(s.label),9,$t))),128))])):I("",!0),e("div",Ct,[e("div",It,[v(u(ut)),e("span",Dt,i(D.value),1)]),e("h1",null,"What is "+i(p.value)+"?",1),e("p",Lt,i(k.value),1)])])]),v(rt)]))}};export{xt as default};
