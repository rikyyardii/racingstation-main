import{v as oe,r as d,G as te,k as ne,p as ae,x as le,l as f,y as R,c as v,a as e,b as c,d as m,_ as ie,e as y,u as a,F as D,f as P,w as re,T as de,h as B,n as $,z as ce,B as ue,t as u,o as l,A as F}from"./DX2j-DXT.js";import{S as ve,M as me,a as pe,X as I,F as he}from"./OwIyKwQK.js";import{u as fe}from"./BpEgIk2w.js";import{a as O}from"./xsH4HHeE.js";import{C as ge}from"./CKiWpDDZ.js";import{P as ke,S as C}from"./PwXNhdp3.js";const _e={class:"app admin"},we={class:"header-content"},be={class:"header-controls"},ye={class:"desktop-nav"},Ce=["onClick"],Se={key:0,class:"mobile-nav"},Le={class:"mobile-nav-content"},xe=["onClick"],Me={class:"container"},De={class:"table-controls"},Pe={class:"left-controls"},$e={key:0,class:"dropdown-menu"},Ee={class:"search-box"},Ne={class:"table-container"},Te={class:"data-table"},Ve={class:"action-buttons"},Ae=["onClick"],Re=["onClick"],Be={class:"table-footer"},Fe={class:"entries-info"},Ie={class:"pagination"},Oe=["disabled"],Ue={class:"page-number"},He=["disabled"],je={__name:"Sosmed",setup(ze){fe({title:"Data Sosmed",ogTitle:"Data Sosmed"});const k=d(!1),_=d(!0),S=d("Artikel"),E=["Home","Logout"],r=te(),w=d(""),n=d(1),p=d(7),h=d([]),i=d(!1),L=d(null),{API_URL:b}=ne().public,U=()=>{_.value=!_.value,document.body.classList.toggle("light-mode",!_.value)},x=()=>{window.innerWidth<=768&&(k.value=!k.value)},H=()=>{i.value=!i.value},N=o=>{L.value&&!L.value.contains(o.target)&&(i.value=!1)},T=async o=>{if(window.innerWidth<=768&&x(),o==="Logout")try{(await(await fetch(`${b}/logout`,{method:"POST",credentials:"include"})).json()).success&&r.push("/rikya")}catch(s){console.error("Logout error:",s)}else o==="Home"?r.push("/rikya/components/Home"):S.value=o},j=async()=>{try{const o=await O.get(`${b}/sosmed-links`);h.value=o.data,console.log("Categories loaded:",o.data)}catch(o){console.error("Error fetching sosmed:",o)}};ae(async()=>{try{if(!(await(await fetch(`${b}/check-session`,{credentials:"include"})).json()).isLoggedIn){r.push("/rikya");return}}catch(o){console.error("Session check error:",o)}await j(),document.addEventListener("click",N)}),le(()=>{document.removeEventListener("click",N)});const V=f(()=>!h.value||h.value.length===0?[]:h.value.filter(o=>{const s=w.value.toLowerCase();return o.name&&o.name.toLowerCase().includes(s)||o.description&&o.description.toLowerCase().includes(s)})),g=f(()=>V.value.length),A=f(()=>Math.ceil(g.value/p.value)),z=f(()=>{const o=(n.value-1)*p.value,s=o+p.value;return V.value.slice(o,s)}),W=f(()=>g.value===0?0:(n.value-1)*p.value+1),G=f(()=>{const o=n.value*p.value;return o>g.value?g.value:o}),Q=()=>{i.value=!1,r.push("add_sosmed")},X=()=>{i.value=!1,r.push("LiveStream")},q=()=>{i.value=!1,r.push("Categories")},J=()=>{i.value=!1,r.push("Session")},K=()=>{i.value=!1,r.push("Sosmed")},Y=o=>{r.push(`/rikya/edit_sosmed/${o.id}`)},Z=async o=>{if(confirm("Are you sure you want to delete this category?"))try{await O.delete(`${b}/sosmed-links/${o.id}`),h.value=h.value.filter(t=>t.id!==o.id),alert("Sosmed link deleted successfully")}catch(t){console.error("Error deleting category:",t),alert("Failed to delete category")}},ee=()=>{n.value>1&&n.value--},se=()=>{n.value<A.value&&n.value++};return R(w,()=>{n.value=1}),R(p,()=>{n.value=1}),(o,s)=>(l(),v("div",_e,[e("header",null,[e("div",we,[s[1]||(s[1]=e("h1",{class:"logo"},[e("img",{src:ie,alt:"RacingStation Logo",class:"logo-image"}),m(" Dashboard ")],-1)),e("div",be,[e("button",{onClick:U,class:"icon-button"},[_.value?(l(),y(a(ve),{key:0})):(l(),y(a(me),{key:1}))]),e("button",{onClick:x,class:"icon-button menu-toggle"},[k.value?(l(),y(a(I),{key:1})):(l(),y(a(pe),{key:0}))]),e("nav",ye,[e("ul",null,[(l(),v(D,null,P(E,t=>e("li",{key:t},[e("a",{href:"#",onClick:F(M=>T(t),["prevent"]),class:$({active:S.value===t})},u(t),11,Ce)])),64))])])])])]),c(de,{name:"slide"},{default:re(()=>[k.value?(l(),v("nav",Se,[e("div",Le,[e("button",{onClick:x,class:"icon-button close-menu"},[c(a(I))]),e("ul",null,[(l(),v(D,null,P(E,t=>e("li",{key:t},[e("a",{href:"#",onClick:F(M=>T(t),["prevent"]),class:$({active:S.value===t})},u(t),11,xe)])),64))])])])):B("",!0)]),_:1}),e("div",Me,[s[10]||(s[10]=e("h2",{class:"black-text"},"Sosmed Management",-1)),e("div",De,[e("div",Pe,[e("div",{class:"dropdown",ref_key:"dropdownRef",ref:L},[e("button",{onClick:H,class:"new-btn dropdown-toggle"},[s[2]||(s[2]=m(" Setup ")),c(a(ge),{class:$(["dropdown-icon",{"rotate-180":i.value}])},null,8,["class"])]),i.value?(l(),v("div",$e,[e("button",{onClick:Q,class:"dropdown-item"},[c(a(ke),{class:"dropdown-item-icon"}),s[3]||(s[3]=m(" New Sosmed "))]),e("button",{onClick:X,class:"dropdown-item"},[c(a(C),{class:"dropdown-item-icon"}),s[4]||(s[4]=m(" Livestream "))]),e("button",{onClick:q,class:"dropdown-item"},[c(a(C),{class:"dropdown-item-icon"}),s[5]||(s[5]=m(" Categories "))]),e("button",{onClick:J,class:"dropdown-item"},[c(a(C),{class:"dropdown-item-icon"}),s[6]||(s[6]=m(" Session "))]),e("button",{onClick:K,class:"dropdown-item"},[c(a(C),{class:"dropdown-item-icon"}),s[7]||(s[7]=m(" Sosmed "))])])):B("",!0)],512)]),e("div",Ee,[s[8]||(s[8]=e("label",null,"Search:",-1)),ce(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>w.value=t),class:"search-input"},null,512),[[ue,w.value]])])]),e("div",Ne,[e("table",Te,[s[9]||(s[9]=e("thead",null,[e("tr",null,[e("th",null,"Sosmed"),e("th",null,"Link"),e("th",null,"Action")])],-1)),e("tbody",null,[(l(!0),v(D,null,P(z.value,t=>(l(),v("tr",{key:t.id},[e("td",null,u(t.name),1),e("td",null,u(t.link||"N/A"),1),e("td",Ve,[e("button",{onClick:M=>Y(t),class:"edit-btn"},"Edit",8,Ae),e("button",{onClick:M=>Z(t),class:"delete-btn"},"Delete",8,Re)])]))),128))])])]),e("div",Be,[e("div",Fe,"Showing "+u(W.value)+" to "+u(G.value)+" of "+u(g.value)+" entries",1),e("div",Ie,[e("button",{onClick:ee,disabled:n.value===1,class:"pagination-btn"},"Previous",8,Oe),e("span",Ue,u(n.value),1),e("button",{onClick:se,disabled:n.value===A.value,class:"pagination-btn"},"Next",8,He)])])]),c(he)]))}},Ke=oe(je,[["__scopeId","data-v-dc1cd9da"]]);export{Ke as default};
