import{s as S,D as T,r as d,k as $,m as N,l as r,x as g,c as _,a as t,b as I,z as L,A as B,F,e as R,t as l,o as p}from"./-H9k7hHH.js";import{u as V}from"./CisZnfUO.js";import{D as H}from"./DcQSltNB.js";import{a as k}from"./CCb-kr4I.js";const O={class:"container"},U={class:"table-controls"},j={class:"right-controls"},z={class:"search-box"},G={class:"table-container"},J={class:"data-table"},Q={class:"action-buttons"},Z=["onClick"],q=["onClick"],K={class:"table-footer"},W={class:"entries-info"},X={class:"pagination"},Y=["disabled"],tt={class:"page-number"},et=["disabled"],st={__name:"Artikel",setup(at){V({title:"Data Artikel",ogTitle:"Data Artikel"});const h=T(),c=d(""),o=d(1),n=d(7),u=d([]),{API_URL:m}=$().public;N(async()=>{try{const e=await k.get(`${m}/articles_card`);u.value=e.data.sort((s,a)=>new Date(a.date)-new Date(s.date))}catch(e){console.error("Error fetching articles:",e)}});const b=r(()=>u.value.filter(e=>{const s=c.value.toLowerCase();return Object.values(e).some(a=>a.toString().toLowerCase().includes(s))})),i=r(()=>b.value.length),f=r(()=>Math.ceil(i.value/n.value)),y=r(()=>{const e=(o.value-1)*n.value,s=e+n.value;return b.value.slice(e,s)}),A=r(()=>i.value===0?0:(o.value-1)*n.value+1),w=r(()=>{const e=o.value*n.value;return e>i.value?i.value:e}),D=()=>{h.push("add_artikel")},x=e=>{h.push(`/rikya/edit_artikel/${e.slug}`)},C=async e=>{if(confirm("Are you sure you want to delete this article?"))try{const a=await k.delete(`${m}/articles/${e.id}`);alert(a.data.message),u.value=u.value.filter(v=>v.id!==e.id)}catch(a){console.error("Error deleting article:",a),alert("Gagal menghapus artikel.")}},P=e=>H.fromISO(e).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd HH:mm:ss"),E=()=>{o.value>1&&o.value--},M=()=>{o.value<f.value&&o.value++};return g(c,()=>{o.value=1}),g(n,()=>{o.value=1}),(e,s)=>(p(),_("div",O,[s[4]||(s[4]=t("h2",{class:"black-text"},"Article Management",-1)),t("div",U,[t("div",{class:"left-controls"},[t("button",{onClick:D,class:"new-btn"},s[1]||(s[1]=[t("span",{class:"plus-icon"},"+",-1),I(" New")]))]),t("div",j,[t("div",z,[s[2]||(s[2]=t("label",null,"Search:",-1)),L(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a),class:"search-input"},null,512),[[B,c.value]])])])]),t("div",G,[t("table",J,[s[3]||(s[3]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Date"),t("th",null,"Action")])],-1)),t("tbody",null,[(p(!0),_(F,null,R(y.value,a=>(p(),_("tr",{key:a.id},[t("td",null,l(a.id),1),t("td",null,l(a.title),1),t("td",null,l(P(a.date)),1),t("td",Q,[t("button",{onClick:v=>x(a),class:"edit-btn"},"Edit",8,Z),t("button",{onClick:v=>C(a),class:"delete-btn"},"Delete",8,q)])]))),128))])])]),t("div",K,[t("div",W,"Showing "+l(A.value)+" to "+l(w.value)+" of "+l(i.value)+" entries",1),t("div",X,[t("button",{onClick:E,disabled:o.value===1,class:"pagination-btn"},"Previous",8,Y),t("span",tt,l(o.value),1),t("button",{onClick:M,disabled:o.value===f.value,class:"pagination-btn"},"Next",8,et)])])]))}},it=S(st,[["__scopeId","data-v-5cf2b195"]]);export{it as default};
