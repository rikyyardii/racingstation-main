import{r,u as W,c as g,o as H,C as J,a as l,b as t,_ as Q,d as j,e as y,f as i,F as $,g as C,h as m,i as Y,T as Z,t as c,j as I,k as ee,m as te,l as a,n as N,v as se}from"./CJHGBovj.js";import{S as oe,M as ne,a as ae,X as V,F as re}from"./DQYv82nI.js";import{A as le}from"./D-yPhOJM.js";import{u as ce}from"./BStpmTuu.js";import{s as ie}from"./FvG9C0Z8.js";import{C as ue}from"./D5WVeIr6.js";const de={class:"app"},me={class:"header-content"},ve={class:"header-controls"},he={class:"desktop-nav"},fe=["href"],pe={key:0,class:"mobile-nav"},_e={class:"mobile-nav-content"},ge=["href"],ye={class:"live-streaming"},ke={key:0},we={class:"video-container"},be=["src"],Se={key:0,class:"button-container"},$e=["onClick"],Ce={class:"live-commentary"},Ie={class:"update-info"},De={class:"time"},Le={class:"text-justify"},Re={__name:"[id]",setup(Te){const D=r(""),v=r(!1),h=r(!0),L=["Latest News","Watch Sports"],k=ee().params.id||null,f=r(""),u=r(""),d=r(""),w=r(""),T=r(""),M=r(null),b=r([]),E=r("");let S=null;const{IMAGE_URL:p}=W().public,A=e=>!e||typeof e!="string"?`${p}/public/img/default.jpg`:e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/public/img/")?`${p}${e}`:`${p}/public/img/${e}`,P=e=>{if(d.value!==e){d.value=e;const o=window.history.state;window.history.replaceState(o,"",window.location.href)}},F=()=>{v.value=!v.value},z=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},K=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},U=()=>{const e=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(e),s=e.getDate(),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),_=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(e),q=e.toLocaleTimeString("en-US",{hour12:!0});D.value=`${o}, ${s} ${n} ${_}. ${q}`},{API_URL:x}=W().public,G=async e=>{const o=te();try{const s=await fetch(`${x}/streams/${e}`);if(s.ok){const n=await s.json();f.value=n.title,u.value=n.event,w.value=n.content,E.value=n.status,T.value=A(n.image_path),n.status==="enable"?d.value=n.link:d.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},O=async e=>{try{const o=await fetch(`${x}/streams/${e}`);if(o.ok){const s=await o.json();b.value=[],["link","link2","link3","link4"].forEach((n,_)=>{s[n]&&b.value.push({label:`Server ${_+1}`,url:s[n],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};g(()=>u.value?`(${u.value})`:"");const B=g(()=>f.value||"Default Stream Title"),R=g(()=>w.value||"Watch the latest stream with us."),X=g(()=>T.value||`${p}/public/img/default.jpg`);return ce({title:B,ogTitle:B,description:R,ogDescription:R,ogImage:X,twitterCard:"summary_large_image"}),H(()=>{k?(G(k),O(k)):console.error("Slug is undefined"),U(),S=ie(U,1e3),document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("keydown",e=>{(e.ctrlKey&&e.shiftKey&&e.code==="KeyI"||e.ctrlKey&&e.shiftKey&&e.code==="KeyC"||e.ctrlKey&&e.code==="KeyU"||e.code==="F12")&&(e.preventDefault(),e.stopPropagation())})}),J(()=>{S!==null&&clearInterval(S),document.removeEventListener("contextmenu",e=>e.preventDefault()),document.removeEventListener("keydown",e=>{})}),(e,o)=>(a(),l("div",de,[t("header",null,[t("div",me,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:Q,alt:"RacingStation Logo",class:"logo-image"}),j(" RacingStation ")],-1)),t("div",ve,[t("button",{onClick:z,class:"icon-button"},[h.value?(a(),y(i(oe),{key:0})):(a(),y(i(ne),{key:1}))]),t("button",{onClick:F,class:"icon-button menu-toggle"},[v.value?(a(),y(i(V),{key:1})):(a(),y(i(ae),{key:0}))]),t("nav",he,[t("ul",null,[(a(),l($,null,C(L,s=>t("li",{key:s},[t("a",{href:K(s),class:N({active:M.value===s})},c(s),11,fe)])),64))])])])])]),m(Z,{name:"slide"},{default:Y(()=>[v.value?(a(),l("nav",pe,[t("div",_e,[t("button",{onClick:F,class:"icon-button close-menu"},[m(i(V))]),t("ul",null,[(a(),l($,null,C(L,s=>t("li",{key:s},[t("a",{href:K(s),class:N({active:M.value===s})},c(s),11,ge)])),64))])])])):I("",!0)]),_:1}),t("main",null,[m(le),t("div",ye,[t("h1",null,[j(c(f.value)+" ",1),u.value?(a(),l("span",ke,"("+c(u.value)+")",1)):I("",!0)]),t("div",we,[t("iframe",{src:d.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,be),o[1]||(o[1]=t("div",{class:"iframe-overlay"},null,-1))]),E.value==="enable"?(a(),l("div",Se,[(a(!0),l($,null,C(b.value,(s,n)=>(a(),l("button",{key:n,class:"action-button",onClick:se(_=>P(s.url),["prevent"])},c(s.label),9,$e))),128))])):I("",!0),t("div",Ce,[t("div",Ie,[m(i(ue)),t("span",De,c(D.value),1)]),t("h1",null,"What is "+c(f.value)+"?",1),t("p",Le,c(w.value),1)])])]),m(re)]))}};export{Re as default};
