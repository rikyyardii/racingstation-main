import{r as n,u as q,o as x,c as f,a as l,b as t,_ as G,d as m,e as g,f as u,F as b,g as w,h as c,i as y,T as J,t as d,j as P,p as X,l as a,q as z}from"./Cm5iSicD.js";import{S as H,M as K,a as Q,X as T,F as Y}from"./Df0Nu2BT.js";import{A as Z}from"./BX_IqxAI.js";import{s as tt}from"./CiBZDZSq.js";import{A as et,C as st,a as at}from"./BrCOEJDc.js";const ot={class:"app"},nt={class:"header-content"},lt={class:"header-controls"},ct={class:"desktop-nav"},rt={key:0,class:"mobile-nav"},it={class:"mobile-nav-content"},ut={key:0,class:"articles-section"},dt={class:"stream-grid"},_t=["onClick"],vt={class:"stream-image-container"},mt=["src","alt"],gt={key:1},pt={class:"stream-content"},ht={class:"stream-footer"},kt={class:"read-more"},ft={class:"pagination"},bt=["disabled"],wt={class:"pagination-info"},yt=["disabled"],S=6,xt={__name:"stream",setup(St){const D=n(""),I=X(),B=n(""),C=()=>{const e=new Date;D.value=e.toLocaleTimeString()},V=n(null),_=n(!1),v=n(!0),L=n("Latest News");n(!1),n(""),n("");const A=["Latest News","Watch Sports"],N=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},p=()=>{_.value=!_.value},$=()=>{v.value=!v.value,document.body.classList.toggle("light-mode",!v.value)},h=n([]),{API_URL:E,IMAGE_URL:F}=q().public,M=async()=>{try{const e=await fetch(`${E}/streams_card`);if(!e.ok)throw new Error("Network response was not ok");const o=await e.json();h.value=o.map(i=>(h.value.length===0&&(B.value=i.title),{...i,image_path:`${F}${i.image_path}`}))}catch(e){console.error("Error fetching streams:",e)}};x(()=>{M()}),x(()=>{M(),C(),tt(C,1e3);const e=localStorage.getItem("selectedArticle");e&&(V.value=JSON.parse(e),L.value="Detailed Article")});const R=f(()=>h.value.slice().sort((e,o)=>{const i=new Date(e.created_at),s=new Date(o.created_at);return i-s})),r=n(1),k=f(()=>Math.ceil(R.value.length/S)),j=f(()=>{const e=(r.value-1)*S,o=e+S;return R.value.slice(e,o)}),O=()=>{r.value<k.value&&r.value++},U=()=>{r.value>1&&r.value--},W=e=>{I.push(`/watch/${e}`)};return(e,o)=>{const i=z;return a(),l("div",ot,[t("header",null,[t("div",nt,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:G,alt:"RacingStation Logo",class:"logo-image"}),m(" RacingStation ")],-1)),t("div",lt,[t("button",{onClick:$,class:"icon-button"},[v.value?(a(),g(u(H),{key:0})):(a(),g(u(K),{key:1}))]),t("button",{onClick:p,class:"icon-button menu-toggle"},[_.value?(a(),g(u(T),{key:1})):(a(),g(u(Q),{key:0}))]),t("nav",ct,[t("ul",null,[(a(),l(b,null,w(A,s=>t("li",{key:s},[c(i,{to:N(s),class:"no-active-link"},{default:y(()=>[m(d(s),1)]),_:2},1032,["to"])])),64))])])])])]),c(J,{name:"slide"},{default:y(()=>[_.value?(a(),l("nav",rt,[t("div",it,[t("button",{onClick:p,class:"icon-button close-menu"},[c(u(T))]),t("ul",null,[(a(),l(b,null,w(A,s=>t("li",{key:s},[c(i,{to:N(s),class:"no-active-link",onClick:p},{default:y(()=>[m(d(s),1)]),_:2},1032,["to"])])),64))])])])):P("",!0)]),_:1}),t("main",null,[c(Z),L.value==="Latest News"?(a(),l("div",ut,[o[2]||(o[2]=t("h2",null,"Live Sports",-1)),t("div",dt,[(a(!0),l(b,null,w(j.value,s=>(a(),l("article",{key:s.slug,class:"stream-card",onClick:Ct=>W(s.slug)},[t("div",vt,[s.image_path?(a(),l("img",{key:0,src:s.image_path,alt:s.title,class:"stream-image"},null,8,mt)):(a(),l("p",gt,"Image not available"))]),t("div",pt,[t("h3",null,d(s.title),1),t("p",null,d(s.excerpt),1),t("div",ht,[t("span",kt,[o[1]||(o[1]=m(" Read more ")),c(u(et))])])])],8,_t))),128))]),t("div",ft,[t("button",{onClick:U,disabled:r.value===1,class:"pagination-button"},[c(u(st))],8,bt),t("span",wt,"Page "+d(r.value)+" of "+d(k.value),1),t("button",{onClick:O,disabled:r.value===k.value,class:"pagination-button"},[c(u(at))],8,yt)])])):P("",!0)]),c(Y)])}}};export{xt as default};
