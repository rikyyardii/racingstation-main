import{s as U,r as c,u as $,o as j,a as d,b as e,_ as N,d as m,e as i,f as v,F as S,g as x,h as _,i as R,T as D,t as n,j as g,p as F,l as a,v as L,n as T}from"./CChyQoMN.js";import P from"./Bk_cunw8.js";import O from"./Bnvj93eL.js";import{S as W,M as z,a as G,X as V,F as X}from"./COMTuGu1.js";import{s as q}from"./c8qv4vjN.js";import"./CCb-kr4I.js";const J={class:"app admin"},K={class:"header-content"},Q={class:"header-controls"},Y={class:"desktop-nav"},Z=["onClick"],ee={key:0,class:"mobile-nav"},se={class:"mobile-nav-content"},te=["onClick"],oe={key:0,class:"home-view section"},ae={class:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl mx-auto px-6"},ne={class:"stats-container"},re={class:"stat-card"},le={class:"stat-value"},ce={class:"stat-card"},ie={class:"stat-value"},ue={class:"stat-card"},de={class:"stat-value"},me={class:"stat-description"},ve={__name:"Home",setup(pe){const k=c(0),y=c(0),p=c(!1),h=c(!0),r=c("Home"),w=["Home","Artikel","Livestream","Logout"],b=F(),f=()=>{window.innerWidth<=768&&(p.value=!p.value)},A=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},{API_URL:u}=$().public,C=async t=>{if(t==="Logout")try{const o=await(await fetch(`${u}/logout`,{method:"POST",credentials:"include"})).json();o.success?b.push("/rikya"):console.error("Logout failed:",o.message)}catch(s){console.error("An error occurred while logging out:",s)}else r.value=t,localStorage.setItem("currentView",t);window.innerWidth<=768&&f()},B=async()=>{try{(await(await fetch(`${u}/check-session`,{method:"GET",credentials:"include"})).json()).isLoggedIn||(alert("Sudah logout, silahkan Login dulu!!"),b.push("/rikya"))}catch(t){console.error("Error checking session:",t)}},E=async()=>{try{const s=await(await fetch(`${u}/articles_count`)).json();k.value=s.totalArticles}catch(t){console.error("Error fetching article count:",t)}},H=async()=>{try{const s=await(await fetch(`${u}/streams_count`)).json();y.value=s.totalStream}catch(t){console.error("Error fetching stream count:",t)}},l=c({rss:"0 MB",heapTotal:"0 MB",heapUsed:"0 MB",external:"0 MB"}),M=async()=>{try{const s=await(await fetch(`${u}/memory-usage`)).json();l.value=s}catch(t){console.error("Error fetching memory usage:",t)}};return j(()=>{B(),E(),H(),M(),q(M,5e3);const t=localStorage.getItem("currentView");t&&(r.value=t)}),(t,s)=>(a(),d("div",J,[e("header",null,[e("div",K,[s[0]||(s[0]=e("h1",{class:"logo"},[e("img",{src:N,alt:"RacingStation Logo",class:"logo-image"}),m(" Dashboard ")],-1)),e("div",Q,[e("button",{onClick:A,class:"icon-button"},[h.value?(a(),i(v(W),{key:0})):(a(),i(v(z),{key:1}))]),e("button",{onClick:f,class:"icon-button menu-toggle"},[p.value?(a(),i(v(V),{key:1})):(a(),i(v(G),{key:0}))]),e("nav",Y,[e("ul",null,[(a(),d(S,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(I=>C(o),["prevent"]),class:T({active:r.value===o})},n(o),11,Z)])),64))])])])])]),_(D,{name:"slide"},{default:R(()=>[p.value?(a(),d("nav",ee,[e("div",se,[e("button",{onClick:f,class:"icon-button close-menu"},[_(v(V))]),e("ul",null,[(a(),d(S,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(I=>C(o),["prevent"]),class:T({active:r.value===o})},n(o),11,te)])),64))])])])):g("",!0)]),_:1}),r.value==="Home"?(a(),d("div",oe,[e("div",ae,[e("div",ne,[e("div",re,[s[1]||(s[1]=e("h3",null,"Total Articles",-1)),e("div",le,n(k.value),1),s[2]||(s[2]=e("p",{class:"stat-description"},"Published articles on your platform",-1))]),e("div",ce,[s[3]||(s[3]=e("h3",null,"Total Streams",-1)),e("div",ie,n(y.value),1),s[4]||(s[4]=e("p",{class:"stat-description"},"Currently live streams",-1))]),e("div",ue,[s[8]||(s[8]=e("h3",null,"Nuxt Memory Usage",-1)),e("div",de,n(l.value.rss),1),e("p",me,[m(" RSS: "+n(l.value.rss)+" ",1),s[5]||(s[5]=e("br",null,null,-1)),m(" Heap Total: "+n(l.value.heapTotal)+" ",1),s[6]||(s[6]=e("br",null,null,-1)),m(" Heap Used: "+n(l.value.heapUsed)+" ",1),s[7]||(s[7]=e("br",null,null,-1)),m(" External: "+n(l.value.external),1)])])])])])):g("",!0),r.value==="Artikel"?(a(),i(P,{key:1})):g("",!0),r.value==="Livestream"?(a(),i(O,{key:2})):g("",!0),_(X)]))}},we=U(ve,[["__scopeId","data-v-cbe4beaa"]]);export{we as default};
