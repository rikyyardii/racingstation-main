import{_ as J,r,C as Q,u as X,o as C,c as u,w as P,b as d,d as e,e as D,g as T,h as Z,i as b,j as _,F as M,k as A,l as q,T as K,m as Y,v as ee,t as l,x as n,n as E,p as I,f as te}from"./YPyMNa1S.js";import{S as se,M as oe,a as ae,X as N,F as ne}from"./cFPZJSer.js";import{u as le}from"./Do9fDBrI.js";import{D as re}from"./DOXiyJsP.js";import{a as V}from"./xsH4HHeE.js";const ie={class:"app admin"},ce={class:"header-content"},ue={class:"header-controls"},de={class:"desktop-nav"},ve=["onClick"],he={key:0,class:"mobile-nav"},pe={class:"mobile-nav-content"},_e=["onClick"],ge={class:"container"},ke={class:"table-controls"},me={class:"search-box"},fe={class:"table-container"},be={class:"data-table"},ye={class:"action-buttons"},we=["onClick"],Ce=["onClick"],De={class:"table-footer"},Me={class:"entries-info"},Ae={class:"pagination"},xe=["disabled"],Se={class:"page-number"},Le=["disabled"],$e={__name:"Artikel",setup(Pe){le({title:"Data Artikel",ogTitle:"Data Artikel"});const g=r(!1),k=r(!0),y=r("Artikel"),x=["Home","Logout"],i=Q(),m=r(""),a=r(1),c=r(7),f=r([]),{API_URL:v}=X().public,j=()=>{k.value=!k.value,document.body.classList.toggle("light-mode",!k.value)},w=()=>{window.innerWidth<=768&&(g.value=!g.value)},S=async t=>{if(window.innerWidth<=768&&w(),t==="Logout")try{(await(await fetch(`${v}/logout`,{method:"POST",credentials:"include"})).json()).success&&i.push("/rikya")}catch(o){console.error("Logout error:",o)}else t==="Home"?i.push("/rikya/components/Home"):y.value=t};C(async()=>{try{(await(await fetch(`${v}/check-session`,{credentials:"include"})).json()).isLoggedIn||i.push("/rikya")}catch(t){console.error("Session check error:",t)}}),C(async()=>{try{(await(await fetch(`${v}/check-session`,{credentials:"include"})).json()).isLoggedIn||i.push("/rikya")}catch(t){console.error("Session check error:",t)}}),C(async()=>{try{const t=await V.get(`${v}/articles_card`);f.value=t.data.sort((o,s)=>new Date(s.date)-new Date(o.date))}catch(t){console.error("Error fetching articles:",t)}});const L=u(()=>f.value.filter(t=>{const o=m.value.toLowerCase();return Object.values(t).some(s=>s.toString().toLowerCase().includes(o))})),h=u(()=>L.value.length),$=u(()=>Math.ceil(h.value/c.value)),F=u(()=>{const t=(a.value-1)*c.value,o=t+c.value;return L.value.slice(t,o)}),H=u(()=>h.value===0?0:(a.value-1)*c.value+1),B=u(()=>{const t=a.value*c.value;return t>h.value?h.value:t}),O=()=>{i.push("add_artikel")},R=t=>{i.push(`/rikya/edit_artikel/${t.slug}`)},U=async t=>{if(confirm("Are you sure you want to delete this article?"))try{const s=await V.delete(`${v}/articles/${t.id}`);alert(s.data.message),f.value=f.value.filter(p=>p.id!==t.id)}catch(s){console.error("Error deleting article:",s),alert("Gagal menghapus artikel.")}},W=t=>re.fromISO(t).setZone("Asia/Jakarta").toFormat("yyyy-MM-dd HH:mm:ss"),z=()=>{a.value>1&&a.value--},G=()=>{a.value<$.value&&a.value++};return P(m,()=>{a.value=1}),P(c,()=>{a.value=1}),(t,o)=>(n(),d("div",ie,[e("header",null,[e("div",ce,[o[1]||(o[1]=e("h1",{class:"logo"},[e("img",{src:Z,alt:"RacingStation Logo",class:"logo-image"}),T(" Dashboard ")],-1)),e("div",ue,[e("button",{onClick:j,class:"icon-button"},[k.value?(n(),b(_(se),{key:0})):(n(),b(_(oe),{key:1}))]),e("button",{onClick:w,class:"icon-button menu-toggle"},[g.value?(n(),b(_(N),{key:1})):(n(),b(_(ae),{key:0}))]),e("nav",de,[e("ul",null,[(n(),d(M,null,A(x,s=>e("li",{key:s},[e("a",{href:"#",onClick:I(p=>S(s),["prevent"]),class:E({active:y.value===s})},l(s),11,ve)])),64))])])])])]),D(K,{name:"slide"},{default:q(()=>[g.value?(n(),d("nav",he,[e("div",pe,[e("button",{onClick:w,class:"icon-button close-menu"},[D(_(N))]),e("ul",null,[(n(),d(M,null,A(x,s=>e("li",{key:s},[e("a",{href:"#",onClick:I(p=>S(s),["prevent"]),class:E({active:y.value===s})},l(s),11,_e)])),64))])])])):te("",!0)]),_:1}),e("div",ge,[o[5]||(o[5]=e("h2",{class:"black-text"},"Article Management",-1)),e("div",ke,[e("div",{class:"left-controls"},[e("button",{onClick:O,class:"new-btn"},o[2]||(o[2]=[e("span",{class:"plus-icon"},"+",-1),T(" New")]))]),e("div",me,[o[3]||(o[3]=e("label",null,"Search:",-1)),Y(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>m.value=s),class:"search-input"},null,512),[[ee,m.value]])])]),e("div",fe,[e("table",be,[o[4]||(o[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Title"),e("th",null,"Date"),e("th",null,"Action")])],-1)),e("tbody",null,[(n(!0),d(M,null,A(F.value,s=>(n(),d("tr",{key:s.id},[e("td",null,l(s.id),1),e("td",null,l(s.title),1),e("td",null,l(W(s.date)),1),e("td",ye,[e("button",{onClick:p=>R(s),class:"edit-btn"},"Edit",8,we),e("button",{onClick:p=>U(s),class:"delete-btn"},"Delete",8,Ce)])]))),128))])])]),e("div",De,[e("div",Me,"Showing "+l(H.value)+" to "+l(B.value)+" of "+l(h.value)+" entries",1),e("div",Ae,[e("button",{onClick:z,disabled:a.value===1,class:"pagination-btn"},"Previous",8,xe),e("span",Se,l(a.value),1),e("button",{onClick:G,disabled:a.value===$.value,class:"pagination-btn"},"Next",8,Le)])])]),D(ne)]))}},je=J($e,[["__scopeId","data-v-1b67234a"]]);export{je as default};
