import{_ as $,r as i,p as D,c as d,a as e,d as m,q as c,u as v,F as M,s as x,b as _,w as I,T as j,t as n,v as g,z as N,o as a,A as L,y as T}from"./NOtjPhkj.js";import{_ as F}from"./Cdtb-WDZ.js";import R from"./5OWme23_.js";import z from"./CzUnNDbN.js";import{S as O,M as P,a as W,X as H,F as q}from"./CpoidPF2.js";import{s as G}from"./BSB9h2yL.js";import"./CCb-kr4I.js";const X={class:"app admin"},J={class:"header-content"},K={class:"header-controls"},Q={class:"desktop-nav"},Y=["onClick"],Z={key:0,class:"mobile-nav"},ee={class:"mobile-nav-content"},te=["onClick"],se={key:0,class:"home-view section"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl mx-auto px-6"},ae={class:"stats-container"},ne={class:"stat-card"},re={class:"stat-value"},le={class:"stat-card"},ie={class:"stat-value"},ce={class:"stat-card"},ue={class:"stat-value"},de={class:"stat-description"},me={__name:"Home",setup(ve){const y=i(0),k=i(0),p=i(!1),h=i(!0),r=i("Home"),w=["Home","Artikel","Live Stream","Logout"],S=N(),u=(()=>{const s=new URL(window.location.href);return s.port="5000",s.origin})(),f=()=>{window.innerWidth<=768&&(p.value=!p.value)},V=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},b=async s=>{if(s==="Logout")try{const o=await(await fetch(`${u}/api/logout`,{method:"POST",credentials:"include"})).json();o.success?S.push("/rikya"):console.error("Logout failed:",o.message)}catch(t){console.error("An error occurred while logging out:",t)}else r.value=s,localStorage.setItem("currentView",s);window.innerWidth<=768&&f()},A=async()=>{try{(await(await fetch(`${u}/api/check-session`,{method:"GET",credentials:"include"})).json()).isLoggedIn||(alert("Sudah logout, silahkan Login dulu!!"),S.push("/rikya"))}catch(s){console.error("Error checking session:",s)}},B=async()=>{try{const t=await(await fetch(`${u}/api/articles_count`)).json();y.value=t.totalArticles}catch(s){console.error("Error fetching article count:",s)}},E=async()=>{try{const t=await(await fetch(`${u}/api/streams_count`)).json();k.value=t.totalStream}catch(s){console.error("Error fetching stream count:",s)}},l=i({rss:"0 MB",heapTotal:"0 MB",heapUsed:"0 MB",external:"0 MB"}),C=async()=>{try{const t=await(await fetch(`${u}/api/memory-usage`)).json();l.value=t}catch(s){console.error("Error fetching memory usage:",s)}};return D(()=>{A(),B(),E(),C(),G(C,5e3);const s=localStorage.getItem("currentView");s&&(r.value=s)}),(s,t)=>(a(),d("div",X,[e("header",null,[e("div",J,[t[0]||(t[0]=e("h1",{class:"logo"},[e("img",{src:F,alt:"RacingStation Logo",class:"logo-image"}),m(" Dashboard ")],-1)),e("div",K,[e("button",{onClick:V,class:"icon-button"},[h.value?(a(),c(v(O),{key:0})):(a(),c(v(P),{key:1}))]),e("button",{onClick:f,class:"icon-button menu-toggle"},[p.value?(a(),c(v(H),{key:1})):(a(),c(v(W),{key:0}))]),e("nav",Q,[e("ul",null,[(a(),d(M,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(U=>b(o),["prevent"]),class:T({active:r.value===o})},n(o),11,Y)])),64))])])])])]),_(j,{name:"slide"},{default:I(()=>[p.value?(a(),d("nav",Z,[e("div",ee,[e("button",{onClick:f,class:"icon-button close-menu"},[_(v(H))]),e("ul",null,[(a(),d(M,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(U=>b(o),["prevent"]),class:T({active:r.value===o})},n(o),11,te)])),64))])])])):g("",!0)]),_:1}),r.value==="Home"?(a(),d("div",se,[e("div",oe,[e("div",ae,[e("div",ne,[t[1]||(t[1]=e("h3",null,"Total Articles",-1)),e("div",re,n(y.value),1),t[2]||(t[2]=e("p",{class:"stat-description"},"Published articles on your platform",-1))]),e("div",le,[t[3]||(t[3]=e("h3",null,"Total Streams",-1)),e("div",ie,n(k.value),1),t[4]||(t[4]=e("p",{class:"stat-description"},"Currently live streams",-1))]),e("div",ce,[t[8]||(t[8]=e("h3",null,"Nuxt Memory Usage",-1)),e("div",ue,n(l.value.rss),1),e("p",de,[m(" RSS: "+n(l.value.rss)+" ",1),t[5]||(t[5]=e("br",null,null,-1)),m(" Heap Total: "+n(l.value.heapTotal)+" ",1),t[6]||(t[6]=e("br",null,null,-1)),m(" Heap Used: "+n(l.value.heapUsed)+" ",1),t[7]||(t[7]=e("br",null,null,-1)),m(" External: "+n(l.value.external),1)])])])])])):g("",!0),r.value==="Artikel"?(a(),c(R,{key:1})):g("",!0),r.value==="Live Stream"?(a(),c(z,{key:2})):g("",!0),_(q)]))}},Se=$(me,[["__scopeId","data-v-f911439f"]]);export{Se as default};
