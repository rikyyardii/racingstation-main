import{v as L,s as $,r as d,k as N,p as A,l as o,y as B,c as v,a as t,b as D,A as M,B as T,F,e as I,t as n,o as _}from"./ai8Zwbm5.js";import{a as f}from"./CCb-kr4I.js";const R={class:"container"},V={class:"table-controls"},U={class:"right-controls"},j={class:"search-box"},O={class:"table-container"},Q={class:"data-table"},q={class:"action-buttons"},z=["onClick"],G=["onClick"],H={class:"table-footer"},J={class:"entries-info"},K={class:"pagination"},W=["disabled"],X={class:"page-number"},Y=["disabled"],Z={__name:"LiveStream",setup(tt){const h=$(),u=d(""),l=d(1),r=d(5),c=d([]),{API_URL:p}=N().public;A(async()=>{try{const e=await f.get(`${p}/streams_card`);c.value=e.data}catch(e){console.error("Error fetching streams:",e)}});const b=o(()=>c.value.filter(e=>{const a=u.value.toLowerCase();return Object.values(e).some(s=>s.toString().toLowerCase().includes(a))})),i=o(()=>b.value.length),m=o(()=>Math.ceil(i.value/r.value)),g=o(()=>{const e=(l.value-1)*r.value,a=e+r.value;return b.value.slice(e,a)}),y=o(()=>i.value===0?0:(l.value-1)*r.value+1),k=o(()=>{const e=l.value*r.value;return e>i.value?i.value:e}),S=()=>{h.push("add_livestream")},w=e=>{h.push(`/rikya/edit_stream/${e}`)},x=async e=>{if(confirm("Are you sure you want to delete this stream?"))try{await f.delete(`${p}/streams/${e.id}`),c.value=c.value.filter(s=>s.id!==e.id),l.value=1,alert("Stream deleted successfully")}catch(s){console.error("Error deleting stream:",s),alert("Failed to delete stream")}},C=()=>{l.value>1&&l.value--},E=()=>{l.value<m.value&&l.value++};return B(u,()=>{l.value=1}),(e,a)=>(_(),v("div",R,[a[4]||(a[4]=t("h2",{class:"black-text"},"Livestream Management",-1)),t("div",V,[t("div",{class:"left-controls"},[t("button",{onClick:S,class:"new-btn"},a[1]||(a[1]=[t("span",{class:"plus-icon"},"+",-1),D(" New")]))]),t("div",U,[t("div",j,[a[2]||(a[2]=t("label",null,"Search:",-1)),M(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>u.value=s),class:"search-input"},null,512),[[T,u.value]])])])]),t("div",O,[t("table",Q,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Title"),t("th",null,"Category"),t("th",null,"Event"),t("th",null,"Status"),t("th",null,"Action")])],-1)),t("tbody",null,[(_(!0),v(F,null,I(g.value,s=>(_(),v("tr",{key:s.id},[t("td",null,n(s.id),1),t("td",null,n(s.title),1),t("td",null,n(s.category),1),t("td",null,n(s.event),1),t("td",null,n(s.status),1),t("td",q,[t("button",{onClick:P=>w(s.slug),class:"edit-btn"},"Edit",8,z),t("button",{onClick:P=>x(s),class:"delete-btn"},"Delete",8,G)])]))),128))])])]),t("div",H,[t("div",J,"Showing "+n(y.value)+" to "+n(k.value)+" of "+n(i.value)+" entries",1),t("div",K,[t("button",{onClick:C,disabled:l.value===1,class:"pagination-btn"},"Previous",8,W),t("span",X,n(l.value),1),t("button",{onClick:E,disabled:l.value===m.value,class:"pagination-btn"},"Next",8,Y)])])]))}},at=L(Z,[["__scopeId","data-v-9ff021e4"]]);export{at as default};
