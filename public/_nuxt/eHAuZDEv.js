import{x as y,c as f,a as t,d as b,A as _,z as g,B as u,r as C,k as w,p as T,m as h,q as x,o as k}from"./qef8jy5G.js";import{u as E}from"./ClTsQMSU.js";import{_ as U}from"./BDSkMRdS.js";const S={setup(){const d=C({id:null,name:"",description:"",event_type_description:""}),e=h(),p=x(),{API_URL:s}=w().public,m=async n=>{try{console.log("Fetching categories with ID:",n),console.log("API URL:",s),console.log("Full URL:",`${s}/event-categories/${n}`);const o=await fetch(`${s}/event-categories/${n}`);if(console.log("Response status:",o.status),console.log("Response headers:",o.headers),!o.ok){let i=`HTTP error! status: ${o.status}`;try{const l=await o.text();console.log("Error response body:",l),l&&(i+=` - ${l}`)}catch{console.log("Could not read error response body")}throw new Error(i)}const c=o.headers.get("content-type");if(!c||!c.includes("application/json")){const i=await o.text();throw console.log("Non-JSON response:",i),new Error("Server returned non-JSON response")}const a=await o.json();console.log("Fetched data:",a),d.value={id:a.id,name:a.name||"",description:a.description||"",event_type_description:a.event_type_description||""}}catch(o){console.error("Error fetching categories:",o),alert("Gagal memuat data categories: "+o.message)}},v=async()=>{try{const n={name:d.value.name,description:d.value.description,event_type_description:d.value.event_type_description};console.log("Submitting payload:",n),console.log("Update URL:",`${s}/event-categories/${d.value.id}`);const o=await fetch(`${s}/event-categories/${d.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(console.log("Update response status:",o.status),!o.ok){let i=`HTTP error! status: ${o.status}`;try{const l=await o.text();console.log("Update error response:",l),l&&(i+=` - ${l}`)}catch{console.log("Could not read update error response")}throw new Error(i)}const c=o.headers.get("content-type");if(!c||!c.includes("application/json")){const i=await o.text();throw console.log("Non-JSON update response:",i),new Error("Server returned non-JSON response")}const a=await o.json();if(console.log("Update result:",a),a.message)alert("Categories berhasil diperbarui!"),p.push("/rikya/components/Categories");else throw new Error(a.error||"Gagal memperbarui categories")}catch(n){console.error("Error:",n),alert(n.message||"Terjadi kesalahan saat memperbarui")}},r=()=>{p.push("/rikya/components/Categories")};return T(()=>{const n=e.params.id;n?m(n):(alert("ID Categories tidak valid"),p.push("/rikya/components/Categories"))}),E({title:"Edit Categories",ogTitle:"Edit Categories"}),{categories:d,submitCategories:v,navigateToCategories:r}}},N={class:"app-wrapper"},R={class:"header-content"},j={class:"dashboard"},D={class:"form-container"},I={class:"form-group"},M={class:"form-group"},J={class:"form-group"},L={class:"buttons-container"};function O(d,e,p,s,m,v){return k(),f("div",N,[t("header",null,[t("div",R,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...r)=>s.navigateToCategories&&s.navigateToCategories(...r)),style:{cursor:"pointer"}},e[6]||(e[6]=[t("img",{src:U,alt:"RacingStation Logo",class:"logo-image"},null,-1),b(" Dashboard ")]))])]),t("div",j,[t("div",D,[e[11]||(e[11]=t("h1",{class:"black-text"},"Edit Categories",-1)),t("form",{onSubmit:e[5]||(e[5]=_((...r)=>s.submitCategories&&s.submitCategories(...r),["prevent"]))},[t("div",I,[e[7]||(e[7]=t("label",{for:"name"},"Nama",-1)),g(t("input",{type:"text",id:"name","onUpdate:modelValue":e[1]||(e[1]=r=>s.categories.name=r),required:""},null,512),[[u,s.categories.name]])]),t("div",M,[e[8]||(e[8]=t("label",{for:"description"},"Deskripsi",-1)),g(t("input",{type:"text",id:"description","onUpdate:modelValue":e[2]||(e[2]=r=>s.categories.description=r),required:""},null,512),[[u,s.categories.description]])]),t("div",J,[e[9]||(e[9]=t("label",{for:"event_type_description"},"Event Type",-1)),g(t("input",{type:"text",id:"event_type_description","onUpdate:modelValue":e[3]||(e[3]=r=>s.categories.event_type_description=r)},null,512),[[u,s.categories.event_type_description]])]),t("div",L,[e[10]||(e[10]=t("button",{type:"submit",class:"action-btn update-btn"},"Update Categories",-1)),t("button",{type:"button",onClick:e[4]||(e[4]=(...r)=>s.navigateToCategories&&s.navigateToCategories(...r)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const $=y(S,[["render",O],["__scopeId","data-v-12c846ee"]]);export{$ as default};
