import{r,u as q,c as _,o as H,C as J,a as l,b as t,_ as Q,d as N,e as y,f as i,F as $,g as C,h as m,i as Y,T as Z,t as c,j as I,k as ee,m as te,l as a,n as j,v as se}from"./5cUGUHvZ.js";import{S as oe,M as ne,a as ae,X as V,F as re}from"./CvGVX5Cm.js";import{A as le}from"./B5-4At3T.js";import{u as ce}from"./DcRMbRaw.js";import{s as ie}from"./64w_GfT3.js";import{C as ue}from"./Bs3CefdG.js";const de={class:"app"},me={class:"header-content"},ve={class:"header-controls"},he={class:"desktop-nav"},fe=["href"],pe={key:0,class:"mobile-nav"},_e={class:"mobile-nav-content"},ye=["href"],ge={class:"live-streaming"},ke={key:0},we={class:"video-container"},be=["src"],Se={key:0,class:"button-container"},$e=["onClick"],Ce={class:"live-commentary"},Ie={class:"update-info"},Le={class:"time"},De={class:"text-justify"},Be={__name:"[id]",setup(Te){const L=r(""),v=r(!1),h=r(!0),D=["Latest News","Watch Sports"],g=ee().params.id||null,f=r(""),u=r(""),d=r(""),k=r(""),T=r(""),M=r(null),w=r([]),E=r("");let b=null;const A=e=>{if(d.value!==e){d.value=e;const o=window.history.state;window.history.replaceState(o,"",window.location.href)}},F=()=>{v.value=!v.value},P=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},U=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},W=()=>{const e=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(e),s=e.getDate(),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),p=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(e),X=e.toLocaleTimeString("en-US",{hour12:!0});L.value=`${o}, ${s} ${n} ${p}. ${X}`},{API_URL:K,IMAGE_URL:S}=q().public,x=e=>{const o=S.startsWith("http")?S:`https://${S}`;return!e||typeof e!="string"?`${o}/public/img/default.jpg`:e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/public/img/")?`${o}${e}`:`${o}/public/img/${e}`},B=_(()=>f.value||"Watch Stream"),R=_(()=>k.value||"Watch live streaming of your favorite events."),z=_(()=>x(T.value));ce({title:B,ogTitle:B,description:R,ogDescription:R,ogImage:z,twitterCard:"summary_large_image"});const G=async e=>{const o=te();try{const s=await fetch(`${K}/streams/${e}`);if(s.ok){const n=await s.json();f.value=n.title,u.value=n.event,k.value=n.content,E.value=n.status,T.value=x(n.image_path),n.status==="enable"?d.value=n.link:d.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},O=async e=>{try{const o=await fetch(`${K}/streams/${e}`);if(o.ok){const s=await o.json();w.value=[],["link","link2","link3","link4"].forEach((n,p)=>{s[n]&&w.value.push({label:`Server ${p+1}`,url:s[n],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};return _(()=>u.value?`(${u.value})`:""),H(()=>{g?(G(g),O(g)):console.error("Slug is undefined"),W(),b=ie(W,1e3),document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("keydown",e=>{(e.ctrlKey&&e.shiftKey&&e.code==="KeyI"||e.ctrlKey&&e.shiftKey&&e.code==="KeyC"||e.ctrlKey&&e.code==="KeyU"||e.code==="F12")&&(e.preventDefault(),e.stopPropagation())})}),J(()=>{b!==null&&clearInterval(b),document.removeEventListener("contextmenu",e=>e.preventDefault()),document.removeEventListener("keydown",e=>{})}),(e,o)=>(a(),l("div",de,[t("header",null,[t("div",me,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:Q,alt:"RacingStation Logo",class:"logo-image"}),N(" RacingStation ")],-1)),t("div",ve,[t("button",{onClick:P,class:"icon-button"},[h.value?(a(),y(i(oe),{key:0})):(a(),y(i(ne),{key:1}))]),t("button",{onClick:F,class:"icon-button menu-toggle"},[v.value?(a(),y(i(V),{key:1})):(a(),y(i(ae),{key:0}))]),t("nav",he,[t("ul",null,[(a(),l($,null,C(D,s=>t("li",{key:s},[t("a",{href:U(s),class:j({active:M.value===s})},c(s),11,fe)])),64))])])])])]),m(Z,{name:"slide"},{default:Y(()=>[v.value?(a(),l("nav",pe,[t("div",_e,[t("button",{onClick:F,class:"icon-button close-menu"},[m(i(V))]),t("ul",null,[(a(),l($,null,C(D,s=>t("li",{key:s},[t("a",{href:U(s),class:j({active:M.value===s})},c(s),11,ye)])),64))])])])):I("",!0)]),_:1}),t("main",null,[m(le),t("div",ge,[t("h1",null,[N(c(f.value)+" ",1),u.value?(a(),l("span",ke,"("+c(u.value)+")",1)):I("",!0)]),t("div",we,[t("iframe",{src:d.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,be),o[1]||(o[1]=t("div",{class:"iframe-overlay"},null,-1))]),E.value==="enable"?(a(),l("div",Se,[(a(!0),l($,null,C(w.value,(s,n)=>(a(),l("button",{key:n,class:"action-button",onClick:se(p=>A(s.url),["prevent"])},c(s.label),9,$e))),128))])):I("",!0),t("div",Ce,[t("div",Ie,[m(i(ue)),t("span",Le,c(L.value),1)]),t("h1",null,"What is "+c(f.value)+"?",1),t("p",De,c(k.value),1)])])]),m(re)]))}};export{Be as default};
