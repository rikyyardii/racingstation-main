import{_ as U,r as c,u as $,p as j,c as d,a as e,d as m,q as i,s as v,F as M,v as x,b as f,w as N,T as R,t as n,x as g,A as D,o as a,B as L,z as T}from"./CbLDumkK.js";import{_ as F}from"./BI0tDeHe.js";import P from"./DKJRVDFE.js";import z from"./DOjocHkS.js";import{S as O,M as W,a as q,X as A,F as G}from"./BFv-caX_.js";import{s as X}from"./Rl4rGLDE.js";import"./CCb-kr4I.js";const J={class:"app admin"},K={class:"header-content"},Q={class:"header-controls"},Y={class:"desktop-nav"},Z=["onClick"],ee={key:0,class:"mobile-nav"},se={class:"mobile-nav-content"},te=["onClick"],oe={key:0,class:"home-view section"},ae={class:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl mx-auto px-6"},ne={class:"stats-container"},re={class:"stat-card"},le={class:"stat-value"},ce={class:"stat-card"},ie={class:"stat-value"},ue={class:"stat-card"},de={class:"stat-value"},me={class:"stat-description"},ve={__name:"Home",setup(pe){const k=c(0),y=c(0),p=c(!1),h=c(!0),r=c("Home"),w=["Home","Artikel","Live Stream","Logout"],S=D(),_=()=>{window.innerWidth<=768&&(p.value=!p.value)},B=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},{API_URL:u}=$().public,b=async t=>{if(t==="Logout")try{const o=await(await fetch(`${u}/logout`,{method:"POST",credentials:"include"})).json();o.success?S.push("/rikya"):console.error("Logout failed:",o.message)}catch(s){console.error("An error occurred while logging out:",s)}else r.value=t,localStorage.setItem("currentView",t);window.innerWidth<=768&&_()},V=async()=>{try{(await(await fetch(`${u}/check-session`,{method:"GET",credentials:"include"})).json()).isLoggedIn||(alert("Sudah logout, silahkan Login dulu!!"),S.push("/rikya"))}catch(t){console.error("Error checking session:",t)}},E=async()=>{try{const s=await(await fetch(`${u}/articles_count`)).json();k.value=s.totalArticles}catch(t){console.error("Error fetching article count:",t)}},H=async()=>{try{const s=await(await fetch(`${u}/streams_count`)).json();y.value=s.totalStream}catch(t){console.error("Error fetching stream count:",t)}},l=c({rss:"0 MB",heapTotal:"0 MB",heapUsed:"0 MB",external:"0 MB"}),C=async()=>{try{const s=await(await fetch(`${u}/memory-usage`)).json();l.value=s}catch(t){console.error("Error fetching memory usage:",t)}};return j(()=>{V(),E(),H(),C(),X(C,5e3);const t=localStorage.getItem("currentView");t&&(r.value=t)}),(t,s)=>(a(),d("div",J,[e("header",null,[e("div",K,[s[0]||(s[0]=e("h1",{class:"logo"},[e("img",{src:F,alt:"RacingStation Logo",class:"logo-image"}),m(" Dashboard ")],-1)),e("div",Q,[e("button",{onClick:B,class:"icon-button"},[h.value?(a(),i(v(O),{key:0})):(a(),i(v(W),{key:1}))]),e("button",{onClick:_,class:"icon-button menu-toggle"},[p.value?(a(),i(v(A),{key:1})):(a(),i(v(q),{key:0}))]),e("nav",Y,[e("ul",null,[(a(),d(M,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(I=>b(o),["prevent"]),class:T({active:r.value===o})},n(o),11,Z)])),64))])])])])]),f(R,{name:"slide"},{default:N(()=>[p.value?(a(),d("nav",ee,[e("div",se,[e("button",{onClick:_,class:"icon-button close-menu"},[f(v(A))]),e("ul",null,[(a(),d(M,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(I=>b(o),["prevent"]),class:T({active:r.value===o})},n(o),11,te)])),64))])])])):g("",!0)]),_:1}),r.value==="Home"?(a(),d("div",oe,[e("div",ae,[e("div",ne,[e("div",re,[s[1]||(s[1]=e("h3",null,"Total Articles",-1)),e("div",le,n(k.value),1),s[2]||(s[2]=e("p",{class:"stat-description"},"Published articles on your platform",-1))]),e("div",ce,[s[3]||(s[3]=e("h3",null,"Total Streams",-1)),e("div",ie,n(y.value),1),s[4]||(s[4]=e("p",{class:"stat-description"},"Currently live streams",-1))]),e("div",ue,[s[8]||(s[8]=e("h3",null,"Nuxt Memory Usage",-1)),e("div",de,n(l.value.rss),1),e("p",me,[m(" RSS: "+n(l.value.rss)+" ",1),s[5]||(s[5]=e("br",null,null,-1)),m(" Heap Total: "+n(l.value.heapTotal)+" ",1),s[6]||(s[6]=e("br",null,null,-1)),m(" Heap Used: "+n(l.value.heapUsed)+" ",1),s[7]||(s[7]=e("br",null,null,-1)),m(" External: "+n(l.value.external),1)])])])])])):g("",!0),r.value==="Artikel"?(a(),i(P,{key:1})):g("",!0),r.value==="Live Stream"?(a(),i(z,{key:2})):g("",!0),f(G)]))}},Se=U(ve,[["__scopeId","data-v-18a995d4"]]);export{Se as default};
