import{r,u as B,c as g,o as H,C as J,a as l,b as t,_ as Q,d as j,e as y,f as i,F as $,g as C,h as m,i as Y,T as Z,t as c,j as I,k as ee,m as te,l as n,n as N,v as se}from"./Cm5iSicD.js";import{S as oe,M as ae,a as ne,X as V,F as re}from"./Df0Nu2BT.js";import{A as le}from"./BX_IqxAI.js";import{u as ce}from"./BEOrdtuY.js";import{s as ie}from"./CiBZDZSq.js";import{C as ue}from"./De2g25Oh.js";const de={class:"app"},me={class:"header-content"},ve={class:"header-controls"},he={class:"desktop-nav"},fe=["href"],pe={key:0,class:"mobile-nav"},_e={class:"mobile-nav-content"},ge=["href"],ye={class:"live-streaming"},we={key:0},ke={class:"video-container"},be=["src"],Se={key:0,class:"button-container"},$e=["onClick"],Ce={class:"live-commentary"},Ie={class:"update-info"},Le={class:"time"},De={class:"text-justify"},xe={__name:"[id]",setup(Te){const L=r(""),v=r(!1),h=r(!0),D=["Latest News","Watch Sports"],w=ee().params.id||null,f=r(""),u=r(""),d=r(""),k=r(""),T=r(""),M=r(null),b=r([]),E=r("");let S=null;const{IMAGE_URL:p}=B().public,A=e=>{const o=p.startsWith("http")?p:`https://${p}`;return!e||typeof e!="string"?`${o}/public/img/default.jpg`:e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/public/img/")?`${o}${e}`:`${o}/public/img/${e}`},P=e=>{if(d.value!==e){d.value=e;const o=window.history.state;window.history.replaceState(o,"",window.location.href)}},F=()=>{v.value=!v.value},z=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},R=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},U=()=>{const e=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(e),s=e.getDate(),a=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),_=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(e),q=e.toLocaleTimeString("en-US",{hour12:!0});L.value=`${o}, ${s} ${a} ${_}. ${q}`},{API_URL:K}=B().public,G=async e=>{const o=te();try{const s=await fetch(`${K}/streams/${e}`);if(s.ok){const a=await s.json();f.value=a.title,u.value=a.event,k.value=a.content,E.value=a.status,T.value=A(a.image_path),a.status==="enable"?d.value=a.link:d.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},O=async e=>{try{const o=await fetch(`${K}/streams/${e}`);if(o.ok){const s=await o.json();b.value=[],["link","link2","link3","link4"].forEach((a,_)=>{s[a]&&b.value.push({label:`Server ${_+1}`,url:s[a],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};g(()=>u.value?`(${u.value})`:"");const W=g(()=>f.value||"RacingStation - Stream"),x=g(()=>k.value||"Watch the live sports with RacingStation Stream."),X=g(()=>T.value||`${p}/public/img/default.jpg`);return H(async()=>{w?(await G(w),O(w),ce({title:W.value,ogTitle:W.value,description:x.value,ogDescription:x.value,ogImage:X.value,twitterCard:"summary_large_image"})):console.error("Slug is undefined"),U(),S=ie(U,1e3),document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("keydown",e=>{(e.ctrlKey&&e.shiftKey&&e.code==="KeyI"||e.ctrlKey&&e.shiftKey&&e.code==="KeyC"||e.ctrlKey&&e.code==="KeyU"||e.code==="F12")&&(e.preventDefault(),e.stopPropagation())})}),J(()=>{S!==null&&clearInterval(S),document.removeEventListener("contextmenu",e=>e.preventDefault()),document.removeEventListener("keydown",e=>{})}),(e,o)=>(n(),l("div",de,[t("header",null,[t("div",me,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:Q,alt:"RacingStation Logo",class:"logo-image"}),j(" RacingStation ")],-1)),t("div",ve,[t("button",{onClick:z,class:"icon-button"},[h.value?(n(),y(i(oe),{key:0})):(n(),y(i(ae),{key:1}))]),t("button",{onClick:F,class:"icon-button menu-toggle"},[v.value?(n(),y(i(V),{key:1})):(n(),y(i(ne),{key:0}))]),t("nav",he,[t("ul",null,[(n(),l($,null,C(D,s=>t("li",{key:s},[t("a",{href:R(s),class:N({active:M.value===s})},c(s),11,fe)])),64))])])])])]),m(Z,{name:"slide"},{default:Y(()=>[v.value?(n(),l("nav",pe,[t("div",_e,[t("button",{onClick:F,class:"icon-button close-menu"},[m(i(V))]),t("ul",null,[(n(),l($,null,C(D,s=>t("li",{key:s},[t("a",{href:R(s),class:N({active:M.value===s})},c(s),11,ge)])),64))])])])):I("",!0)]),_:1}),t("main",null,[m(le),t("div",ye,[t("h1",null,[j(c(f.value)+" ",1),u.value?(n(),l("span",we,"("+c(u.value)+")",1)):I("",!0)]),t("div",ke,[t("iframe",{src:d.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,be),o[1]||(o[1]=t("div",{class:"iframe-overlay"},null,-1))]),E.value==="enable"?(n(),l("div",Se,[(n(!0),l($,null,C(b.value,(s,a)=>(n(),l("button",{key:a,class:"action-button",onClick:se(_=>P(s.url),["prevent"])},c(s.label),9,$e))),128))])):I("",!0),t("div",Ce,[t("div",Ie,[m(i(ue)),t("span",Le,c(L.value),1)]),t("h1",null,"What is "+c(f.value)+"?",1),t("p",De,c(k.value),1)])])]),m(re)]))}};export{xe as default};
