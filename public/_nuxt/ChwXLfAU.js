import{_ as q}from"./B16HZT32.js";import{r as n,p as T,n as f,c as l,a as t,d as g,q as p,u,F as w,s as b,b as c,w as y,T as z,t as d,v as P,z as H,o as a}from"./NOtjPhkj.js";import{_ as J}from"./Cdtb-WDZ.js";import{S as U,M as X,a as G,X as R,F as K}from"./CpoidPF2.js";import{A as Q}from"./CYzYOwp6.js";import{s as Y}from"./BSB9h2yL.js";import{A as Z,C as tt,a as et}from"./Dv0WzLJl.js";const st={class:"app"},at={class:"header-content"},ot={class:"header-controls"},nt={class:"desktop-nav"},lt={key:0,class:"mobile-nav"},ct={class:"mobile-nav-content"},rt={key:0,class:"articles-section"},it={class:"stream-grid"},ut=["onClick"],dt={class:"stream-image-container"},_t=["src","alt"],mt={key:1},vt={class:"stream-content"},gt={class:"stream-footer"},pt={class:"read-more"},ht={class:"pagination"},kt=["disabled"],ft={class:"pagination-info"},wt=["disabled"],S=6,Dt={__name:"stream",setup(bt){const B=n(""),F=H(),V=n(""),C=()=>{const e=new Date;B.value=e.toLocaleTimeString()},$=n(null),_=n(!1),m=n(!0),L=n("Latest News");n(!1),n(""),n("");const N=()=>{const e=new URL(window.location.href);return e.port="5000",e.origin},A=["Latest News","Watch Sports"],M=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},h=()=>{_.value=!_.value},I=()=>{m.value=!m.value,document.body.classList.toggle("light-mode",!m.value)},v=n([]),x=async()=>{try{const e=await fetch(`${N()}/api/streams_card`);if(!e.ok)throw new Error("Network response was not ok");const o=await e.json();v.value=o.map(i=>(v.value.length===0&&(V.value=i.title),{...i,image_path:`${N()}${i.image_path}`})),console.log("Fetched streams:",v.value)}catch(e){console.error("Error fetching streams:",e)}};T(()=>{x()}),T(()=>{x(),C(),Y(C,1e3);const e=localStorage.getItem("selectedArticle");e&&($.value=JSON.parse(e),L.value="Detailed Article")});const D=f(()=>v.value.slice().sort((e,o)=>{const i=new Date(e.created_at),s=new Date(o.created_at);return i-s})),r=n(1),k=f(()=>Math.ceil(D.value.length/S)),E=f(()=>{const e=(r.value-1)*S,o=e+S;return D.value.slice(e,o)}),O=()=>{r.value<k.value&&r.value++},W=()=>{r.value>1&&r.value--},j=e=>{F.push(`/watch/${e}`)};return(e,o)=>{const i=q;return a(),l("div",st,[t("header",null,[t("div",at,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:J,alt:"RacingStation Logo",class:"logo-image"}),g(" RacingStation ")],-1)),t("div",ot,[t("button",{onClick:I,class:"icon-button"},[m.value?(a(),p(u(U),{key:0})):(a(),p(u(X),{key:1}))]),t("button",{onClick:h,class:"icon-button menu-toggle"},[_.value?(a(),p(u(R),{key:1})):(a(),p(u(G),{key:0}))]),t("nav",nt,[t("ul",null,[(a(),l(w,null,b(A,s=>t("li",{key:s},[c(i,{to:M(s),class:"no-active-link"},{default:y(()=>[g(d(s),1)]),_:2},1032,["to"])])),64))])])])])]),c(z,{name:"slide"},{default:y(()=>[_.value?(a(),l("nav",lt,[t("div",ct,[t("button",{onClick:h,class:"icon-button close-menu"},[c(u(R))]),t("ul",null,[(a(),l(w,null,b(A,s=>t("li",{key:s},[c(i,{to:M(s),class:"no-active-link",onClick:h},{default:y(()=>[g(d(s),1)]),_:2},1032,["to"])])),64))])])])):P("",!0)]),_:1}),t("main",null,[c(Q),L.value==="Latest News"?(a(),l("div",rt,[o[2]||(o[2]=t("h2",null,"Live Sports",-1)),t("div",it,[(a(!0),l(w,null,b(E.value,s=>(a(),l("article",{key:s.slug,class:"stream-card",onClick:yt=>j(s.slug)},[t("div",dt,[s.image_path?(a(),l("img",{key:0,src:s.image_path,alt:s.title,class:"stream-image"},null,8,_t)):(a(),l("p",mt,"Image not available"))]),t("div",vt,[t("h3",null,d(s.title),1),t("p",null,d(s.excerpt),1),t("div",gt,[t("span",pt,[o[1]||(o[1]=g(" Read more ")),c(u(Z))])])])],8,ut))),128))]),t("div",ht,[t("button",{onClick:W,disabled:r.value===1,class:"pagination-button"},[c(u(tt))],8,kt),t("span",ft,"Page "+d(r.value)+" of "+d(k.value),1),t("button",{onClick:O,disabled:r.value===k.value,class:"pagination-button"},[c(u(et))],8,wt)])])):P("",!0)]),c(K)])}}};export{Dt as default};
