import{r,u as q,c as _,o as H,C as J,a as l,b as t,_ as Q,d as j,e as g,f as i,F as C,g as D,h as m,i as Y,T as Z,t as c,j as L,k as ee,m as te,l as a,n as V,v as se}from"./C4TyFVf3.js";import{S as oe,M as ne,a as ae,X as A,F as re}from"./B67Uu2dg.js";import{A as le}from"./D6ylSB8P.js";import{u as ce}from"./D0TxJDFd.js";import{s as ie}from"./scFea8ss.js";import{C as ue}from"./ChfEI7uO.js";const de={class:"app"},me={class:"header-content"},ve={class:"header-controls"},he={class:"desktop-nav"},fe=["href"],pe={key:0,class:"mobile-nav"},_e={class:"mobile-nav-content"},ge=["href"],ye={class:"live-streaming"},we={key:0},ke={class:"video-container"},be=["src"],Se={key:0,class:"button-container"},$e=["onClick"],Ie={class:"live-commentary"},Ce={class:"update-info"},De={class:"time"},Le={class:"text-justify"},Be={__name:"[id]",setup(Te){const T=r(""),v=r(!1),h=r(!0),M=["Latest News","Watch Sports"],y=ee().params.id||null,f=r(""),u=r(""),d=r(""),w=r(""),E=r(""),F=r(null),k=r([]),U=r("");let b=null;const P=e=>{if(d.value!==e){d.value=e;const o=window.history.state;window.history.replaceState(o,"",window.location.href)}},W=()=>{v.value=!v.value},z=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},K=e=>{switch(e){case"Latest News":return"/";case"Watch Sports":return"/stream";default:return"/"}},x=()=>{const e=new Date,o=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(e),s=e.getDate(),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),p=new Intl.DateTimeFormat("en-US",{year:"numeric"}).format(e),X=e.toLocaleTimeString("en-US",{hour12:!0});T.value=`${o}, ${s} ${n} ${p}. ${X}`},{API_URL:B,IMAGE_URL:S}=q().public,R=e=>{const o=S.startsWith("http")?S:`https://${S}`;return!e||typeof e!="string"?`${o}/public/img/default.jpg`:e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/public/img/")?`${o}${e}`:`${o}/public/img/${e}`},$=_(()=>f.value||"Watch Stream"),I=_(()=>w.value||"Watch live streaming of your favorite events."),N=_(()=>R(E.value));ce({title:$,ogTitle:$,description:I,ogDescription:I,ogImage:N,twitterTitle:$,twitterDescription:I,twitterImage:N,twitterCard:"summary_large_image"});const G=async e=>{const o=te();try{const s=await fetch(`${B}/streams/${e}`);if(s.ok){const n=await s.json();f.value=n.title,u.value=n.event,w.value=n.content,U.value=n.status,E.value=R(n.image_path),n.status==="enable"?d.value=n.link:d.value="/watch/offline_screen"}else s.status===404?(console.error("Stream not found"),o.push("/404")):console.error("Failed to fetch stream data")}catch(s){console.error("Error fetching stream:",s),o.push("/404")}},O=async e=>{try{const o=await fetch(`${B}/streams/${e}`);if(o.ok){const s=await o.json();k.value=[],["link","link2","link3","link4"].forEach((n,p)=>{s[n]&&k.value.push({label:`Server ${p+1}`,url:s[n],status:s.status})})}else console.error("Failed to fetch buttons data")}catch(o){console.error("Error fetching buttons:",o)}};return _(()=>u.value?`(${u.value})`:""),H(()=>{y?(G(y),O(y)):console.error("Slug is undefined"),x(),b=ie(x,1e3),document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("keydown",e=>{(e.ctrlKey&&e.shiftKey&&e.code==="KeyI"||e.ctrlKey&&e.shiftKey&&e.code==="KeyC"||e.ctrlKey&&e.code==="KeyU"||e.code==="F12")&&(e.preventDefault(),e.stopPropagation())})}),J(()=>{b!==null&&clearInterval(b),document.removeEventListener("contextmenu",e=>e.preventDefault()),document.removeEventListener("keydown",e=>{})}),(e,o)=>(a(),l("div",de,[t("header",null,[t("div",me,[o[0]||(o[0]=t("h1",{class:"logo"},[t("img",{src:Q,alt:"RacingStation Logo",class:"logo-image"}),j(" RacingStation ")],-1)),t("div",ve,[t("button",{onClick:z,class:"icon-button"},[h.value?(a(),g(i(oe),{key:0})):(a(),g(i(ne),{key:1}))]),t("button",{onClick:W,class:"icon-button menu-toggle"},[v.value?(a(),g(i(A),{key:1})):(a(),g(i(ae),{key:0}))]),t("nav",he,[t("ul",null,[(a(),l(C,null,D(M,s=>t("li",{key:s},[t("a",{href:K(s),class:V({active:F.value===s})},c(s),11,fe)])),64))])])])])]),m(Z,{name:"slide"},{default:Y(()=>[v.value?(a(),l("nav",pe,[t("div",_e,[t("button",{onClick:W,class:"icon-button close-menu"},[m(i(A))]),t("ul",null,[(a(),l(C,null,D(M,s=>t("li",{key:s},[t("a",{href:K(s),class:V({active:F.value===s})},c(s),11,ge)])),64))])])])):L("",!0)]),_:1}),t("main",null,[m(le),t("div",ye,[t("h1",null,[j(c(f.value)+" ",1),u.value?(a(),l("span",we,"("+c(u.value)+")",1)):L("",!0)]),t("div",ke,[t("iframe",{src:d.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; encrypted-media",allowfullscreen:"",allowtransparency:"",style:{width:"100%",height:"100%",overflow:"hidden",border:"none"}},null,8,be),o[1]||(o[1]=t("div",{class:"iframe-overlay"},null,-1))]),U.value==="enable"?(a(),l("div",Se,[(a(!0),l(C,null,D(k.value,(s,n)=>(a(),l("button",{key:n,class:"action-button",onClick:se(p=>P(s.url),["prevent"])},c(s.label),9,$e))),128))])):L("",!0),t("div",Ie,[t("div",Ce,[m(i(ue)),t("span",De,c(T.value),1)]),t("h1",null,"What is "+c(f.value)+"?",1),t("p",Le,c(w.value),1)])])]),m(re)]))}};export{Be as default};
