import{s as u,k as d,c as p,a as t,b as g,y as b,z as i,A as r,D as k,q as f,o as v}from"./B683Eh06.js";import{u as y}from"./kDA8QHO3.js";import{_ as x}from"./y4ByELeD.js";const T={data(){return{stream:{image:null,title:"",category:"",event:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",scheduled_enable_time:null,scheduled_disable_time:null}}},setup(){const n=f();return y({title:"Tambah Data Stream",ogTitle:"Tambah Data Stream"}),{navigateToArtikel:()=>{n.push("/rikya/components/Livestream")},router:n}},methods:{async handleImageUpload(n){const{API_URL:e}=d().public,a=n.target.files[0];if(a&&a.type==="image/png"){const o=new FormData;o.append("image",a);try{const m=await(await fetch(`${e}/upload-image`,{method:"POST",body:o})).json();m.success?this.stream.image=m.imagePath:alert("Failed to upload image.")}catch(l){console.error("Error uploading image:",l),alert("Error uploading image.")}}else alert("Please upload a PNG file."),n.target.value=""},async submitStream(){const{API_URL:n}=d().public;try{const e={title:this.stream.title,category:this.stream.category,event:this.stream.event,excerpt:this.stream.excerpt,link:this.stream.link,link2:this.stream.link2,link3:this.stream.link3,link4:this.stream.link4,content:this.stream.content,scheduled_enable_time:this.stream.scheduled_enable_time,scheduled_disable_time:this.stream.scheduled_disable_time,imagePath:this.stream.image},a=await fetch(`${n}/streams`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await a.json();console.log("Response status:",a.status),console.log("Result:",o),a.ok?(alert("Stream submitted successfully!"),this.router.push("Home"),this.resetForm()):(console.error("Error submitting stream:",o.error||o.message),alert("Error submitting stream: "+(o.error||o.message)))}catch(e){console.error("Error submitting stream:",e),alert("Error submitting stream.")}},resetForm(){this.stream={image:null,title:"",category:"",excerpt:"",link:"",link2:"",link3:"",link4:"",content:"",status:""}}}},U={class:"app-wrapper"},c={class:"header-content"},S={class:"dashboard"},V={class:"form-container"},E={class:"form-group"},L={class:"form-group"},w={class:"form-group"},A={class:"form-group"},h={class:"form-group"},D={class:"form-group"},P={class:"form-group"},q={class:"form-group"},C={class:"form-group"},B={class:"form-group"},I={class:"form-group"},R={class:"form-group"},F={class:"buttons-container"};function M(n,e,a,o,l,m){return v(),p("div",U,[t("header",null,[t("header",null,[t("div",c,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...s)=>o.navigateToArtikel&&o.navigateToArtikel(...s)),style:{cursor:"pointer"}},e[15]||(e[15]=[t("img",{src:x,alt:"RacingStation Logo",class:"logo-image"},null,-1),g(" Dashboard ")]))])])]),t("div",S,[e[32]||(e[32]=t("h1",{class:"black-text"},"Add Live stream",-1)),t("div",V,[t("form",{onSubmit:e[14]||(e[14]=b((...s)=>m.submitStream&&m.submitStream(...s),["prevent"]))},[t("div",E,[e[16]||(e[16]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...s)=>m.handleImageUpload&&m.handleImageUpload(...s)),required:""},null,32)]),t("div",L,[e[17]||(e[17]=t("label",{for:"title"},"Title",-1)),i(t("input",{type:"text",id:"title","onUpdate:modelValue":e[2]||(e[2]=s=>l.stream.title=s),required:""},null,512),[[r,l.stream.title]])]),t("div",w,[e[19]||(e[19]=t("label",{for:"category"},"Category:",-1)),i(t("select",{id:"category","onUpdate:modelValue":e[3]||(e[3]=s=>l.stream.category=s),required:""},e[18]||(e[18]=[t("option",{value:"Motorsport"},"Motorsport",-1),t("option",{value:"Football"},"Football",-1),t("option",{value:"Basketball"},"Basketball",-1)]),512),[[k,l.stream.category]])]),t("div",A,[e[20]||(e[20]=t("label",{for:"title"},"Live Event",-1)),i(t("input",{type:"text",id:"event","onUpdate:modelValue":e[4]||(e[4]=s=>l.stream.event=s),required:""},null,512),[[r,l.stream.event]])]),t("div",h,[e[21]||(e[21]=t("label",{for:"excerpt"},"Excerpt",-1)),i(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[5]||(e[5]=s=>l.stream.excerpt=s),required:""},null,512),[[r,l.stream.excerpt]])]),t("div",D,[e[22]||(e[22]=t("label",{for:"link"},"Link 1",-1)),i(t("input",{type:"text",id:"link","onUpdate:modelValue":e[6]||(e[6]=s=>l.stream.link=s),required:""},null,512),[[r,l.stream.link]])]),t("div",P,[e[23]||(e[23]=t("label",{for:"link"},"Link 2",-1)),i(t("input",{type:"text",id:"link","onUpdate:modelValue":e[7]||(e[7]=s=>l.stream.link2=s)},null,512),[[r,l.stream.link2]])]),t("div",q,[e[24]||(e[24]=t("label",{for:"link"},"Link 3",-1)),i(t("input",{type:"text",id:"link","onUpdate:modelValue":e[8]||(e[8]=s=>l.stream.link3=s)},null,512),[[r,l.stream.link3]])]),t("div",C,[e[25]||(e[25]=t("label",{for:"link"},"Link 4",-1)),i(t("input",{type:"text",id:"link","onUpdate:modelValue":e[9]||(e[9]=s=>l.stream.link4=s)},null,512),[[r,l.stream.link4]])]),t("div",B,[e[26]||(e[26]=t("label",{for:"content"},"Content",-1)),i(t("textarea",{id:"content","onUpdate:modelValue":e[10]||(e[10]=s=>l.stream.content=s),required:""},null,512),[[r,l.stream.content]])]),t("div",I,[e[27]||(e[27]=t("label",{for:"scheduledEnableTime"},"Jadwal Start Live (opsional)",-1)),i(t("input",{type:"datetime-local",id:"scheduledEnableTime","onUpdate:modelValue":e[11]||(e[11]=s=>l.stream.scheduled_enable_time=s)},null,512),[[r,l.stream.scheduled_enable_time]]),e[28]||(e[28]=t("small",null,"Biarkan kosong untuk status disable",-1))]),t("div",R,[e[29]||(e[29]=t("label",{for:"scheduledDisableTime"},"Jadwal End Live (opsional)",-1)),i(t("input",{type:"datetime-local",id:"scheduledDisableTime","onUpdate:modelValue":e[12]||(e[12]=s=>l.stream.scheduled_disable_time=s)},null,512),[[r,l.stream.scheduled_disable_time]]),e[30]||(e[30]=t("small",null,"Biarkan kosong untuk status disable",-1))]),t("div",F,[e[31]||(e[31]=t("button",{type:"submit",class:"action-btn update-btn"},"Submit Stream",-1)),t("button",{type:"button",onClick:e[13]||(e[13]=(...s)=>o.navigateToArtikel&&o.navigateToArtikel(...s)),class:"action-btn cancel-btn"},"Cancel")])],32)])])])}const J=u(T,[["render",M],["__scopeId","data-v-41dc8574"]]);export{J as default};
