import{s as p,r as d,u as m,a as c,b as t,d as f,v as b,x as n,y as u,p as y,l as v}from"./D0Mnjpd1.js";import{_ as h}from"./BAKmooeW.js";const x={data(){return{article:{image:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:""}}},setup(){const l=y(),e=d(!1),o=d(!0),s=d("Home");return{isMenuOpen:e,isDarkMode:o,currentView:s,navigateToArtikel:()=>{l.push("/Artikel")},toggleDarkMode:()=>{o.value=!o.value},toggleMenu:()=>{e.value=!e.value},selectView:g=>{s.value=g},router:l}},methods:{async handleImageUpload(l){const{API_URL:e}=m().public,o=l.target.files[0];if(!o)return;if(o.type!=="image/png"){alert("Please upload a PNG file."),l.target.value="";return}if(o.size>3*1024*1024){alert("Ukuran file gambar terlalu besar. compress gambar terlebih dahulu"),l.target.value="";return}const s=new FormData;s.append("image",o);try{const a=await(await fetch(`${e}/upload-image`,{method:"POST",body:s})).json();a.success?this.article.image=a.imagePath:alert(a.message||"Failed to upload image.")}catch(i){console.error("Error uploading image:",i),alert("Error uploading image.")}},async submitArticle(){const{API_URL:l}=m().public;try{const e=await fetch(`${l}/articles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.article.category,title:this.article.title,excerpt:this.article.excerpt,date:this.article.date,author:this.article.author,readingTime:this.article.readingTime,content:this.article.content,imagePath:this.article.image})}),o=await e.json();e.ok?(alert("Article submitted successfully!"),this.router.push("Home"),this.resetForm()):alert("Error submitting article: "+o.error)}catch(e){console.error("Error submitting article:",e),alert("Error submitting article.")}},resetForm(){this.article={image:null,category:"",title:"",excerpt:"",date:"",author:"",readingTime:"",content:""}}}},T={class:"app-wrapper"},A={class:"header-content"},k={class:"dashboard"},U={class:"form-container"},V={class:"form-group"},w={class:"form-group"},P={class:"form-group"},q={class:"form-group"},D={class:"form-group"},M={class:"form-group"},E={class:"form-group"},I={class:"form-group"};function C(l,e,o,s,i,a){return v(),c("div",T,[t("header",null,[t("header",null,[t("div",A,[t("h1",{class:"logo",onClick:e[0]||(e[0]=(...r)=>s.navigateToArtikel&&s.navigateToArtikel(...r)),style:{cursor:"pointer"}},e[10]||(e[10]=[t("img",{src:h,alt:"RacingStation Logo",class:"logo-image"},null,-1),f(" Dashboard ")]))])])]),t("div",k,[e[20]||(e[20]=t("h1",null,"Add Articles",-1)),t("div",U,[t("form",{onSubmit:e[9]||(e[9]=b((...r)=>a.submitArticle&&a.submitArticle(...r),["prevent"]))},[t("div",V,[e[11]||(e[11]=t("label",{for:"image"},"Upload PNG Image:",-1)),t("input",{type:"file",id:"image",accept:".png",onChange:e[1]||(e[1]=(...r)=>a.handleImageUpload&&a.handleImageUpload(...r)),required:""},null,32)]),t("div",w,[e[12]||(e[12]=t("label",{for:"category"},"Category:",-1)),n(t("input",{type:"text",id:"category","onUpdate:modelValue":e[2]||(e[2]=r=>i.article.category=r),required:""},null,512),[[u,i.article.category]])]),t("div",P,[e[13]||(e[13]=t("label",{for:"title"},"Title:",-1)),n(t("input",{type:"text",id:"title","onUpdate:modelValue":e[3]||(e[3]=r=>i.article.title=r),required:""},null,512),[[u,i.article.title]])]),t("div",q,[e[14]||(e[14]=t("label",{for:"title"},"Excerpt",-1)),n(t("input",{type:"text",id:"excerpt","onUpdate:modelValue":e[4]||(e[4]=r=>i.article.excerpt=r),required:""},null,512),[[u,i.article.excerpt]])]),t("div",D,[e[15]||(e[15]=t("label",{for:"date"},"Date:",-1)),n(t("input",{type:"date",id:"date","onUpdate:modelValue":e[5]||(e[5]=r=>i.article.date=r),required:""},null,512),[[u,i.article.date]])]),t("div",M,[e[16]||(e[16]=t("label",{for:"author"},"Author:",-1)),n(t("input",{type:"text",id:"author","onUpdate:modelValue":e[6]||(e[6]=r=>i.article.author=r),required:""},null,512),[[u,i.article.author]])]),t("div",E,[e[17]||(e[17]=t("label",{for:"readingTime"},"Reading Time (min):",-1)),n(t("input",{type:"number",id:"readingTime","onUpdate:modelValue":e[7]||(e[7]=r=>i.article.readingTime=r),required:""},null,512),[[u,i.article.readingTime]])]),t("div",I,[e[18]||(e[18]=t("label",{for:"content"},"Content:",-1)),n(t("textarea",{id:"content","onUpdate:modelValue":e[8]||(e[8]=r=>i.article.content=r),required:""},null,512),[[u,i.article.content]])]),e[19]||(e[19]=t("button",{type:"submit"},"Submit Article",-1))],32)])])])}const F=p(x,[["render",C],["__scopeId","data-v-f2f599d7"]]);export{F as default};
