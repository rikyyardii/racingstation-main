import{s as G,r as i,G as Q,m as P,k as X,l as r,x as S,c as d,a as e,_ as q,b as N,d as b,u as h,F as C,e as A,f as x,w as J,T as K,z as Y,A as Z,t as l,o as a,y as E,n as T,g as ee}from"./B683Eh06.js";import{S as se,M as te,a as ne,X as V,F as oe}from"./D73_bQhw.js";import{u as ae}from"./kDA8QHO3.js";import{a as F}from"./CCb-kr4I.js";const le={class:"app admin"},ie={class:"header-content"},ce={class:"header-controls"},re={class:"desktop-nav"},de=["onClick"],ue={key:0,class:"mobile-nav"},ve={class:"mobile-nav-content"},he=["onClick"],ke={class:"container"},_e={class:"table-controls"},pe={class:"right-controls"},ge={class:"search-box"},fe={class:"table-container"},be={class:"data-table"},me={class:"action-buttons"},ye=["onClick"],we=["onClick"],Ce={class:"table-footer"},Ae={class:"entries-info"},xe={class:"pagination"},Le=["disabled"],Me={class:"page-number"},$e=["disabled"],De={__name:"Ads",setup(Pe){ae({title:"Data Artikel",ogTitle:"Data Artikel"});const k=i(!1),_=i(!0),m=i("Artikel"),L=["Home","Logout"],u=Q(),p=i(""),o=i(1),c=i(7),g=i([]),I=()=>{_.value=!_.value,document.body.classList.toggle("light-mode",!_.value)},y=()=>{window.innerWidth<=768&&(k.value=!k.value)},M=async s=>{if(window.innerWidth<=768&&y(),s==="Logout")try{(await(await fetch(`${f}/logout`,{method:"POST",credentials:"include"})).json()).success&&u.push("/rikya")}catch(n){console.error("Logout error:",n)}else s==="Home"?u.push("/rikya/components/Home"):m.value=s};P(async()=>{try{(await(await fetch(`${f}/check-session`,{credentials:"include"})).json()).isLoggedIn||u.push("/rikya")}catch(s){console.error("Session check error:",s)}});const{API_URL:f}=X().public;P(async()=>{try{const s=await F.get(`${f}/adslink_card`);g.value=s.data}catch(s){console.error("Error fetching adslink:",s)}});const $=r(()=>g.value.filter(s=>{const n=p.value.toLowerCase();return s.name.toLowerCase().includes(n)||s.adslink.toLowerCase().includes(n)})),v=r(()=>$.value.length),D=r(()=>Math.ceil(v.value/c.value)),B=r(()=>{const s=(o.value-1)*c.value,n=s+c.value;return $.value.slice(s,n)}),R=r(()=>v.value===0?0:(o.value-1)*c.value+1),H=r(()=>{const s=o.value*c.value;return s>v.value?v.value:s}),j=()=>{u.push("add_adslink")},z=s=>{u.push(`/rikya/edit_adslink/${s.id}`)},O=async s=>{if(confirm("Are you sure you want to delete this adslink?"))try{await F.delete(`${f}/adslink/${s.id}`),g.value=g.value.filter(t=>t.id!==s.id),alert("Adslink deleted successfully")}catch(t){console.error("Error deleting adslink:",t),alert("Failed to delete adslink")}},U=()=>{o.value>1&&o.value--},W=()=>{o.value<D.value&&o.value++};return S(p,()=>{o.value=1}),S(c,()=>{o.value=1}),(s,n)=>(a(),d("div",le,[e("header",null,[e("div",ie,[n[1]||(n[1]=e("h1",{class:"logo"},[e("img",{src:q,alt:"RacingStation Logo",class:"logo-image"}),N(" Dashboard ")],-1)),e("div",ce,[e("button",{onClick:I,class:"icon-button"},[_.value?(a(),b(h(se),{key:0})):(a(),b(h(te),{key:1}))]),e("button",{onClick:y,class:"icon-button menu-toggle"},[k.value?(a(),b(h(V),{key:1})):(a(),b(h(ne),{key:0}))]),e("nav",re,[e("ul",null,[(a(),d(C,null,A(L,t=>e("li",{key:t},[e("a",{href:"#",onClick:E(w=>M(t),["prevent"]),class:T({active:m.value===t})},l(t),11,de)])),64))])])])])]),x(K,{name:"slide"},{default:J(()=>[k.value?(a(),d("nav",ue,[e("div",ve,[e("button",{onClick:y,class:"icon-button close-menu"},[x(h(V))]),e("ul",null,[(a(),d(C,null,A(L,t=>e("li",{key:t},[e("a",{href:"#",onClick:E(w=>M(t),["prevent"]),class:T({active:m.value===t})},l(t),11,he)])),64))])])])):ee("",!0)]),_:1}),e("div",ke,[n[5]||(n[5]=e("h2",{class:"black-text"},"Ads Management",-1)),e("div",_e,[e("div",{class:"left-controls"},[e("button",{onClick:j,class:"new-btn"},n[2]||(n[2]=[e("span",{class:"plus-icon"},"+",-1),N("New")]))]),e("div",pe,[e("div",ge,[n[3]||(n[3]=e("label",null,"Search:",-1)),Y(e("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=t=>p.value=t),class:"search-input"},null,512),[[Z,p.value]])])])]),e("div",fe,[e("table",be,[n[4]||(n[4]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nama"),e("th",null,"Link"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),d(C,null,A(B.value,t=>(a(),d("tr",{key:t.id},[e("td",null,l(t.id),1),e("td",null,l(t.name),1),e("td",null,l(t.adslink),1),e("td",me,[e("button",{onClick:w=>z(t),class:"edit-btn"},"Edit",8,ye),e("button",{onClick:w=>O(t),class:"delete-btn"},"Delete",8,we)])]))),128))])])]),e("div",Ce,[e("div",Ae,"Showing "+l(R.value)+" to "+l(H.value)+" of "+l(v.value)+" entries",1),e("div",xe,[e("button",{onClick:U,disabled:o.value===1,class:"pagination-btn"},"Previous",8,Le),e("span",Me,l(o.value),1),e("button",{onClick:W,disabled:o.value===D.value,class:"pagination-btn"},"Next",8,$e)])])]),x(oe)]))}},Ve=G(De,[["__scopeId","data-v-bd0d6f54"]]);export{Ve as default};
