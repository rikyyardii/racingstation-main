import{v as I,r as i,k as U,p as $,c as d,a as e,_ as j,b as m,d as c,u as v,F as S,e as x,f as _,w as N,T as R,t as n,g,D as F,o as a,z as L,n as T}from"./D7vLjz9K.js";import P from"./CQIrrYk-.js";import z from"./TEfGuaRW.js";import{S as O,M as W,a as G,X as V,F as X}from"./BqqzK9yO.js";import{u as q}from"./D20v4k5w.js";import{s as J}from"./DNTqYxDL.js";import"./DcQSltNB.js";import"./CCb-kr4I.js";const K={class:"app admin"},Q={class:"header-content"},Y={class:"header-controls"},Z={class:"desktop-nav"},ee=["onClick"],se={key:0,class:"mobile-nav"},te={class:"mobile-nav-content"},oe=["onClick"],ae={key:0,class:"home-view section"},ne={class:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl mx-auto px-6"},re={class:"stats-container"},le={class:"stat-card"},ie={class:"stat-value"},ce={class:"stat-card"},ue={class:"stat-value"},de={class:"stat-card"},me={class:"stat-value"},ve={class:"stat-description"},pe={__name:"Home",setup(he){const k=i(0),y=i(0),p=i(!1),h=i(!0),r=i("Home"),w=["Home","Artikel","Livestream","Logout"],b=F(),f=()=>{window.innerWidth<=768&&(p.value=!p.value)},A=()=>{h.value=!h.value,document.body.classList.toggle("light-mode",!h.value)},{API_URL:u}=U().public,C=async t=>{if(t==="Logout")try{const o=await(await fetch(`${u}/logout`,{method:"POST",credentials:"include"})).json();o.success?b.push("/rikya"):console.error("Logout failed:",o.message)}catch(s){console.error("An error occurred while logging out:",s)}else r.value=t,localStorage.setItem("currentView",t);window.innerWidth<=768&&f()},B=async()=>{try{(await(await fetch(`${u}/check-session`,{method:"GET",credentials:"include"})).json()).isLoggedIn||(alert("Sudah logout, silahkan Login dulu!!"),b.push("/rikya"))}catch(t){console.error("Error checking session:",t)}},D=async()=>{try{const s=await(await fetch(`${u}/articles_count`)).json();k.value=s.totalArticles}catch(t){console.error("Error fetching article count:",t)}},E=async()=>{try{const s=await(await fetch(`${u}/streams_count`)).json();y.value=s.totalStream}catch(t){console.error("Error fetching stream count:",t)}},l=i({rss:"0 MB",heapTotal:"0 MB",heapUsed:"0 MB",external:"0 MB"}),M=async()=>{try{const s=await(await fetch(`${u}/memory-usage`)).json();l.value=s}catch(t){console.error("Error fetching memory usage:",t)}};return q({title:"Dashboard",ogTitle:"Dashboard"}),$(()=>{B(),D(),E(),M(),J(M,5e3);const t=localStorage.getItem("currentView");t&&(r.value=t)}),(t,s)=>(a(),d("div",K,[e("header",null,[e("div",Q,[s[0]||(s[0]=e("h1",{class:"logo"},[e("img",{src:j,alt:"RacingStation Logo",class:"logo-image"}),m(" Dashboard ")],-1)),e("div",Y,[e("button",{onClick:A,class:"icon-button"},[h.value?(a(),c(v(O),{key:0})):(a(),c(v(W),{key:1}))]),e("button",{onClick:f,class:"icon-button menu-toggle"},[p.value?(a(),c(v(V),{key:1})):(a(),c(v(G),{key:0}))]),e("nav",Z,[e("ul",null,[(a(),d(S,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(H=>C(o),["prevent"]),class:T({active:r.value===o})},n(o),11,ee)])),64))])])])])]),_(R,{name:"slide"},{default:N(()=>[p.value?(a(),d("nav",se,[e("div",te,[e("button",{onClick:f,class:"icon-button close-menu"},[_(v(V))]),e("ul",null,[(a(),d(S,null,x(w,o=>e("li",{key:o},[e("a",{href:"#",onClick:L(H=>C(o),["prevent"]),class:T({active:r.value===o})},n(o),11,oe)])),64))])])])):g("",!0)]),_:1}),r.value==="Home"?(a(),d("div",ae,[e("div",ne,[e("div",re,[e("div",le,[s[1]||(s[1]=e("h3",null,"Total Articles",-1)),e("div",ie,n(k.value),1),s[2]||(s[2]=e("p",{class:"stat-description"},"Published articles on your platform",-1))]),e("div",ce,[s[3]||(s[3]=e("h3",null,"Total Streams",-1)),e("div",ue,n(y.value),1),s[4]||(s[4]=e("p",{class:"stat-description"},"Currently live streams",-1))]),e("div",de,[s[8]||(s[8]=e("h3",null,"Nuxt Memory Usage",-1)),e("div",me,n(l.value.rss),1),e("p",ve,[m(" RSS: "+n(l.value.rss)+" ",1),s[5]||(s[5]=e("br",null,null,-1)),m(" Heap Total: "+n(l.value.heapTotal)+" ",1),s[6]||(s[6]=e("br",null,null,-1)),m(" Heap Used: "+n(l.value.heapUsed)+" ",1),s[7]||(s[7]=e("br",null,null,-1)),m(" External: "+n(l.value.external),1)])])])])])):g("",!0),r.value==="Artikel"?(a(),c(P,{key:1})):g("",!0),r.value==="Livestream"?(a(),c(z,{key:2})):g("",!0),_(X)]))}},Me=I(pe,[["__scopeId","data-v-9d238598"]]);export{Me as default};
